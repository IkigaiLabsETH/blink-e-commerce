(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[885],{9635:function(e){"use strict";e.exports=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var r=e.charAt(i),s=r.charCodeAt(0);if(255!==t[s])throw TypeError(r+" is ambiguous");t[s]=i}var a=e.length,o=e.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,i=0,r=0;e[n]===o;)i++,n++;for(var s=(e.length-n)*c+1>>>0,u=new Uint8Array(s);e[n];){var l=t[e.charCodeAt(n)];if(255===l)return;for(var h=0,d=s-1;(0!==l||h<r)&&-1!==d;d--,h++)l+=a*u[d]>>>0,u[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw Error("Non-zero carry");r=h,n++}for(var f=s-r;f!==s&&0===u[f];)f++;for(var y=new Uint8Array(i+(s-f)),p=i;f!==s;)y[p++]=u[f++];return y}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,i=0,r=0,s=t.length;r!==s&&0===t[r];)r++,n++;for(var c=(s-r)*u+1>>>0,l=new Uint8Array(c);r!==s;){for(var h=t[r],d=0,f=c-1;(0!==h||d<i)&&-1!==f;f--,d++)h+=256*l[f]>>>0,l[f]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");i=d,r++}for(var y=c-i;y!==c&&0===l[y];)y++;for(var p=o.repeat(n);y<c;++y)p+=e.charAt(l[y]);return p},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw Error("Non-base"+a+" character")}}}},1930:function(e,t,n){let i=n(9635);e.exports=i("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},8649:function(){},8708:function(e){e.exports={style:{fontFamily:"'__Inter_36bd41', '__Inter_Fallback_36bd41'",fontStyle:"normal"},className:"__className_36bd41",variable:"__variable_36bd41"}},3663:function(e){e.exports={style:{fontFamily:"'__Inter_36bd41', '__Inter_Fallback_36bd41'",fontStyle:"normal"},className:"__className_36bd41",variable:"__variable_36bd41"}},8070:function(e){var t,n,i,r=e.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var c=[],u=!1,l=-1;function h(){u&&i&&(u=!1,i.length?c=i.concat(c):l=-1,c.length&&d())}function d(){if(!u){var e=o(h);u=!0;for(var t=c.length;t;){for(i=c,c=[];++l<t;)i&&i[l].run();l=-1,t=c.length}i=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function y(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}},4313:function(e,t,n){"use strict";n.d(t,{q:function(){return E}});var i=n(3984),r=n(1945);class s extends Error{constructor(e){var t,n;super(e.response.message),n=void 0,(t="data")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n,this.name="EdgeStoreApiClientError",this.data=e.response}}let a=(e,t)=>{let n={...e,...t};return o({type:n.type},n)};function o(e,t){let n={type:e.type,input:r.z.never(),path:[],metadata:()=>({}),...t};return{$config:{ctx:void 0},_def:n,input:e=>a(n,{input:e}),path:e=>a(n,{path:e(function(){let e=(t,n)=>new Proxy(()=>t,{get:(n,i)=>e(`${t}.${String(i)}`)});return new Proxy(()=>"",{get:(t,n)=>e(String(n))})}())}),metadata:e=>a(n,{metadata:e}),accessControl:e=>a(n,{accessControl:e}),beforeUpload:e=>a(n,{beforeUpload:e}),beforeDelete:e=>a(n,{beforeDelete:e})}}class c{context(){return new c}create(){return{imageBucket:e=>u("IMAGE",e),fileBucket:e=>u("FILE",e),router:function(e){return{$config:{ctx:void 0},buckets:e}}}}}function u(e,t){return o({type:e},{bucketConfig:t})}new c;class l extends Error{constructor(e){super(e),this.name="UploadAbortedError"}}var h=n(8070);class d extends Error{constructor(e){super(e),this.name="EdgeStoreError"}}async function f(e){let t={};try{t=await e.json()}catch(t){throw new d(`Failed to parse response. Make sure the api is correctly configured at ${e.url}`)}throw new s({response:t})}async function y({file:e,signal:t,input:n,onProgressChange:i,options:r},{apiPath:s,bucketName:a}){try{i?.(0);let o=await fetch(`${s}/request-upload`,{method:"POST",credentials:"include",signal:t,body:JSON.stringify({bucketName:a,input:n,fileInfo:{extension:e.name.split(".").pop(),type:e.type,size:e.size,fileName:r?.manualFileName,replaceTargetUrl:r?.replaceTargetUrl,temporary:r?.temporary}}),headers:{"Content-Type":"application/json"}});o.ok||await f(o);let c=await o.json();if("multipart"in c)await w({bucketName:a,multipartInfo:c.multipart,onProgressChange:i,signal:t,file:e,apiPath:s});else if("uploadUrl"in c)await m({file:e,uploadUrl:c.uploadUrl,onProgressChange:i,signal:t});else throw new d("An error occurred");return{url:function(e,t){return e}(c.accessUrl,s),thumbnailUrl:c.thumbnailUrl?function(e,t){return e}(c.thumbnailUrl,s):null,size:c.size,uploadedAt:new Date(c.uploadedAt),path:c.path,pathOrder:c.pathOrder,metadata:c.metadata}}catch(e){if(e instanceof Error&&"AbortError"===e.name)throw new l("File upload aborted");throw i?.(0),e}}function p(e,t){return e}async function m(e){let{file:t,uploadUrl:n,onProgressChange:i,signal:r}=e;return new Promise((e,s)=>{if(r?.aborted){s(new l("File upload aborted"));return}let a=new XMLHttpRequest;a.open("PUT",n),a.setRequestHeader("x-ms-blob-type","BlockBlob"),a.addEventListener("loadstart",()=>{i?.(0)}),a.upload.addEventListener("progress",e=>{if(e.lengthComputable){let t=Math.round(e.loaded/e.total*1e4)/100;i?.(t)}}),a.addEventListener("error",()=>{s(Error("Error uploading file"))}),a.addEventListener("abort",()=>{s(new l("File upload aborted"))}),a.addEventListener("loadend",()=>{e(a.getResponseHeader("ETag"))}),r&&r.addEventListener("abort",()=>{a.abort()}),a.send(t)})}async function w(e){let{bucketName:t,multipartInfo:n,onProgressChange:i,file:r,signal:s,apiPath:a}=e,{partSize:o,parts:c,totalParts:u,uploadId:l,key:h}=n,y=[],p=async e=>{let{part:t,chunk:n}=e,{uploadUrl:r}=t,a=await m({file:n,uploadUrl:r,signal:s,onProgressChange:e=>{let n=y.find(e=>e.partNumber===t.partNumber);n?n.progress=e:y.push({partNumber:t.partNumber,progress:e});let r=Math.round(y.reduce((e,t)=>e+100*t.progress,0)/u)/100;i?.(r)}});if(!a)throw new d("Could not get ETag from multipart response");return{partNumber:t.partNumber,eTag:a}},w=await b({items:c.map(e=>({part:e,chunk:r.slice((e.partNumber-1)*o,e.partNumber*o)})),fn:p,maxParallel:5,maxRetries:10}),g=await fetch(`${a}/complete-multipart-upload`,{method:"POST",credentials:"include",body:JSON.stringify({bucketName:t,uploadId:l,key:h,parts:w}),headers:{"Content-Type":"application/json"}});g.ok||await f(g)}async function g({url:e},{apiPath:t,bucketName:n}){let i=await fetch(`${t}/confirm-upload`,{method:"POST",credentials:"include",body:JSON.stringify({url:e,bucketName:n}),headers:{"Content-Type":"application/json"}});return i.ok||await f(i),i.json()}async function v({url:e},{apiPath:t,bucketName:n}){let i=await fetch(`${t}/delete-file`,{method:"POST",credentials:"include",body:JSON.stringify({url:e,bucketName:n}),headers:{"Content-Type":"application/json"}});return i.ok||await f(i),i.json()}async function b({items:e,fn:t,maxParallel:n,maxRetries:i=0}){let r=Array(e.length),s=async(e,t)=>{try{return await e()}catch(n){if(n instanceof l)throw n;if(t>0)return await new Promise(e=>setTimeout(e,5e3)),s(e,t-1);throw n}},a={count:n,async wait(){for(;this.count<=0;)await new Promise(e=>setTimeout(e,500));this.count--},signal(){this.count++}},o=e.map((e,n)=>(async()=>{await a.wait();try{let a=await s(()=>t(e),i);r[n]=a}finally{a.signal()}})());return await Promise.all(o),r}let S=(void 0!==h?h.env.NEXT_PUBLIC_EDGE_STORE_BASE_URL:void 0)??"https://files.edgestore.dev";function E(e){let t=i.createContext(void 0);return{EdgeStoreProvider:({children:n,basePath:r})=>(function({children:e,context:t,basePath:n,maxConcurrentUploads:r}){let s=n?`${n}`:"/api/edgestore",[a,o]=i.useState({loading:!0,initialized:!1,error:!1}),c=i.useRef(0),u=i.useRef(!1);async function h(){try{o({loading:!0,initialized:!1,error:!1});let e=await fetch(`${s}/init`,{method:"POST",credentials:"include"});if(e.ok){let t=await e.json();if((await fetch(`${S}/_init`,{method:"GET",credentials:"include",headers:{"x-edgestore-token":t.token}})).ok)o({loading:!1,initialized:!0,error:!1});else throw o({loading:!1,initialized:!1,error:!0}),new d("Couldn't initialize Edge Store.")}else o({loading:!1,initialized:!1,error:!0}),await f(e)}catch(e){throw o({loading:!1,initialized:!1,error:!0}),e}}async function p(){await h()}return i.useEffect(()=>(u.current||h(),()=>{u.current=!0}),[]),i.createElement(i.Fragment,null,i.createElement(t.Provider,{value:{edgestore:function({apiPath:e,uploadingCountRef:t,maxConcurrentUploads:n=5}){return new Proxy({},{get:(i,r)=>({upload:async i=>{try{i.onProgressChange?.(0);let s=new Promise(e=>{i.signal?.addEventListener("abort",()=>{e()},{once:!0})});for(;t.current>=n&&t.current>0;)if(await Promise.race([new Promise(e=>setTimeout(e,300)),s]),i.signal?.aborted)throw new l("File upload aborted");return t.current++,await y(i,{bucketName:r,apiPath:e})}finally{t.current--}},confirmUpload:async t=>{let{success:n}=await g(t,{bucketName:r,apiPath:e});if(!n)throw new d("Failed to confirm upload")},delete:async t=>{let{success:n}=await v(t,{bucketName:r,apiPath:e});if(!n)throw new d("Failed to delete file")}})})}({apiPath:s,uploadingCountRef:c,maxConcurrentUploads:r}),reset:p,state:a}},e))})({children:n,context:t,basePath:r,maxConcurrentUploads:e?.maxConcurrentUploads}),useEdgeStore:function(){if(!t)throw Error("React Context is unavailable in Server Components");return i.useContext(t)}}}},6716:function(e,t,n){"use strict";n.d(t,{eC:function(){return o},qz:function(){return c}});var i=n(599),r=n(9329),s=n(8801);class a extends i.mI{async sendTransaction(e,t,n={}){let i=!0;try{if((0,s.W)(e)){if(!this.supportedTransactionVersions)throw new r.IW("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new r.IW(`Sending transaction version ${e.version} isn't supported by this wallet`);try{let i=(e=await this.signTransaction(e)).serialize();return await t.sendRawTransaction(i,n)}catch(e){if(e instanceof r.PY)throw i=!1,e;throw new r.IW(e?.message,e)}}else try{let{signers:i,...r}=n;e=await this.prepareTransaction(e,t,r),i?.length&&e.partialSign(...i);let s=(e=await this.signTransaction(e)).serialize();return await t.sendRawTransaction(s,r)}catch(e){if(e instanceof r.PY)throw i=!1,e;throw new r.IW(e?.message,e)}}catch(e){throw i&&this.emit("error",e),e}}async signAllTransactions(e){for(let t of e)if((0,s.W)(t)){if(!this.supportedTransactionVersions)throw new r.PY("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new r.PY(`Signing transaction version ${t.version} isn't supported by this wallet`)}let t=[];for(let n of e)t.push(await this.signTransaction(n));return t}}class o extends a{}class c extends o{}},8801:function(e,t,n){"use strict";function i(e){return"version"in e}n.d(t,{W:function(){return i}})},7002:function(e,t,n){"use strict";var i,r;n.d(t,{Q:function(){return i}}),(r=i||(i={})).Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"},4727:function(e,t,n){"use strict";n.d(t,{O:function(){return c}});var i=n(6716),r=n(599),s=n(9329),a=n(8801),o=n(1055);class c extends i.eC{constructor(e={}){super(),this.name="Phantom",this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState="undefined"==typeof window||"undefined"==typeof document?r.i1.Unsupported:r.i1.NotDetected,this._disconnected=()=>{let e=this._wallet;e&&(e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new s.at),this.emit("disconnect"))},this._accountChanged=e=>{let t=this._publicKey;if(t){try{e=new o.PublicKey(e.toBytes())}catch(e){this.emit("error",new s.Nx(e?.message,e));return}t.equals(e)||(this._publicKey=e,this.emit("connect",e))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==r.i1.Unsupported&&((0,r.H)()?(this._readyState=r.i1.Loadable,this.emit("readyStateChange",this._readyState)):(0,r.su)(()=>!!(window.phantom?.solana?.isPhantom||window.solana?.isPhantom)&&(this._readyState=r.i1.Installed,this.emit("readyStateChange",this._readyState),!0)))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===r.i1.Installed&&await this.connect()}async connect(){try{let e;if(this.connected||this.connecting)return;if(this.readyState===r.i1.Loadable){let e=encodeURIComponent(window.location.href),t=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${e}?ref=${t}`;return}if(this.readyState!==r.i1.Installed)throw new s.OZ;this._connecting=!0;let t=window.phantom?.solana||window.solana;if(!t.isConnected)try{await t.connect()}catch(e){throw new s.$w(e?.message,e)}if(!t.publicKey)throw new s.cO;try{e=new o.PublicKey(t.publicKey.toBytes())}catch(e){throw new s.Nx(e?.message,e)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=e,this.emit("connect",e)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(e){this.emit("error",new s.UG(e?.message,e))}}this.emit("disconnect")}async sendTransaction(e,t,n={}){try{let i=this._wallet;if(!i)throw new s.oS;try{let{signers:r,...s}=n;(0,a.W)(e)?r?.length&&e.sign(r):(e=await this.prepareTransaction(e,t,s),r?.length&&e.partialSign(...r)),s.preflightCommitment=s.preflightCommitment||t.commitment;let{signature:o}=await i.signAndSendTransaction(e,s);return o}catch(e){if(e instanceof s.lj)throw e;throw new s.IW(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signTransaction(e){try{let t=this._wallet;if(!t)throw new s.oS;try{return await t.signTransaction(e)||e}catch(e){throw new s.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new s.oS;try{return await t.signAllTransactions(e)||e}catch(e){throw new s.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new s.oS;try{let{signature:n}=await t.signMessage(e);return n}catch(e){throw new s.fk(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}},7912:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var i=n(1055),r=n(3984),s=n(2293);let a=({children:e,endpoint:t,config:n={commitment:"confirmed"}})=>{let a=(0,r.useMemo)(()=>new i.Connection(t,n),[t,n]);return r.createElement(s.h.Provider,{value:{connection:a}},e)}},5098:function(e,t,n){"use strict";let i,r,s;n.d(t,{n:function(){return ez}});var a,o,c,u,l,h,d,f,y,p,m,w,g,v,b,S,E,_,O,T,C,A=n(6716),M=n(599),R=n(9329),I=n(1055);let N=`(?:\\nURI: (?<uri>[^\\n]+))?(?:\\nVersion: (?<version>[^\\n]+))?(?:\\nChain ID: (?<chainId>[^\\n]+))?(?:\\nNonce: (?<nonce>[^\\n]+))?(?:\\nIssued At: (?<issuedAt>[^\\n]+))?(?:\\nExpiration Time: (?<expirationTime>[^\\n]+))?(?:\\nNot Before: (?<notBefore>[^\\n]+))?(?:\\nRequest ID: (?<requestId>[^\\n]+))?(?:\\nResources:(?<resources>(?:\\n- [^\\n]+)*))?`;RegExp(`^(?<domain>[^\\n]+?) wants you to sign in with your Solana account:\\n(?<address>[^\\n]+)(?:\\n|$)(?:\\n(?<statement>[\\S\\s]*?)(?:\\n|$))??${N}\\n*$`);let D={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class L extends Error{constructor(...e){let[t,n,i]=e;super(n),this.code=t,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class j extends Error{constructor(...e){let[t,n,i,r]=e;super(i),this.code=n,this.data=r,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function P(e,t,n,i){return new(n||(n=Promise))(function(r,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,o)}c((i=i.apply(e,t||[])).next())})}let z="solana:cloneAuthorization";function x(e,t){return P(this,void 0,void 0,function*(){let n=e.slice(0,4),r=e.slice(4,16),s=e.slice(16),a=yield crypto.subtle.decrypt(U(n,r),t,s);return(void 0===i&&(i=new TextDecoder("utf-8")),i).decode(a)})}function U(e,t){return{additionalData:e,iv:t,name:"AES-GCM",tagLength:128}}function k(e){if(e<49152||e>65535)throw new L(D.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${e} given.`,{port:e});return e}function F(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}let q={Firefox:0,Other:1},W=null,Q=[150,150,200,500,500,750,750,1e3];function K(e){return new DataView(e).getUint32(0,!1)}var B=n(1930);function G(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)0>t.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function $(e,t,n,i){return new(n||(n=Promise))(function(r,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,o)}c((i=i.apply(e,t||[])).next())})}function H(e){return window.btoa(String.fromCharCode.call(null,...e))}function Y(e){return new Uint8Array(window.atob(e).split("").map(e=>e.charCodeAt(0)))}function V(e){return H("version"in e?e.serialize():e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}function Z(e){let t=e[0]*I.SIGNATURE_LENGTH_IN_BYTES+1;return"legacy"===I.VersionedMessage.deserializeMessageVersion(e.slice(t,e.length))?I.Transaction.from(e):I.VersionedTransaction.deserialize(e)}function J(e,t,n,i){return new(n||(n=Promise))(function(r,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,o)}c((i=i.apply(e,t||[])).next())})}function X(e){return new Uint8Array(window.atob(e).split("").map(e=>e.charCodeAt(0)))}let ee="Mobile Wallet Adapter";function et(e){return"version"in e}class en extends A.qz{constructor(e){var t;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=ee,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState="undefined"!=typeof window&&window.isSecureContext&&"undefined"!=typeof document&&/android/i.test(navigator.userAgent)?M.i1.Loadable:M.i1.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._chain=null!==(t=e.chain)&&void 0!==t?t:e.cluster,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==M.i1.Unsupported&&this._authorizationResultCache.get().then(e=>{e&&this.declareWalletAsInstalled()})}get publicKey(){if(null==this._publicKey&&null!=this._selectedAddress)try{this._publicKey=function(e){let t=X(e);return new I.PublicKey(t)}(this._selectedAddress)}catch(e){throw new R.Nx(e instanceof Error&&(null==e?void 0:e.message)||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==M.i1.Installed&&this.emit("readyStateChange",this._readyState=M.i1.Installed)}runWithGuard(e){return J(this,void 0,void 0,function*(){try{return yield e()}catch(e){throw this.emit("error",e),e}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return J(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return J(this,void 0,void 0,function*(){if(!this.connecting&&!this.connected)return yield this.runWithGuard(()=>J(this,void 0,void 0,function*(){if(this._readyState!==M.i1.Installed&&this._readyState!==M.i1.Loadable)throw new R.OZ;this._connecting=!0;try{let e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new R.$w(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}connect(){return J(this,void 0,void 0,function*(){if(!this.connecting&&!this.connected)return yield this.runWithGuard(()=>J(this,void 0,void 0,function*(){if(this._readyState!==M.i1.Installed&&this._readyState!==M.i1.Loadable)throw new R.OZ;this._connecting=!0;try{yield this.performAuthorization()}catch(e){throw new R.$w(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}performAuthorization(e){return J(this,void 0,void 0,function*(){try{let t=yield this._authorizationResultCache.get();if(t)return this.handleAuthorizationResult(t),t;return yield this.transact(t=>J(this,void 0,void 0,function*(){let n=yield t.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:e});return Promise.all([this._authorizationResultCache.set(n),this.handleAuthorizationResult(n)]),n}))}catch(e){throw new R.$w(e instanceof Error&&e.message||"Unknown error",e)}})}handleAuthorizationResult(e){var t;return J(this,void 0,void 0,function*(){let n=null==this._authorizationResult||(null===(t=this._authorizationResult)||void 0===t?void 0:t.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some((t,n)=>t.address!==e.accounts[n].address);if(this._authorizationResult=e,this.declareWalletAsInstalled(),n){let t=yield this._addressSelector.select(e.accounts.map(({address:e})=>e));t!==this._selectedAddress&&(this._selectedAddress=t,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(e,t){return J(this,void 0,void 0,function*(){try{let n=yield e.authorize({auth_token:t,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(n),this.handleAuthorizationResult(n)])}catch(e){throw this.disconnect(),new R.at(e instanceof Error&&(null==e?void 0:e.message)||"Unknown error",e)}})}disconnect(){return J(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(e){var t;return J(this,void 0,void 0,function*(){let n=null===(t=this._authorizationResult)||void 0===t?void 0:t.wallet_uri_base,i=this._connectionGeneration;try{return yield function(e,t){return $(this,void 0,void 0,function*(){return yield function(e,t){return P(this,void 0,void 0,function*(){let n;!function(){if("undefined"==typeof window||!0!==window.isSecureContext)throw new L(D.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}();let i=yield function(){return P(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}(),r=yield function(e,t){return P(this,void 0,void 0,function*(){let n=k(49152+Math.floor(16384*Math.random())),i=yield function(e,t,n,i=["v1"]){return P(this,void 0,void 0,function*(){let r=k(t),s=function(e){let t="",n=new Uint8Array(e),i=n.byteLength;for(let e=0;e<i;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}((yield crypto.subtle.exportKey("raw",e))),a=function(e,t){let n=null;if(t){try{n=new URL(t)}catch(e){}if((null==n?void 0:n.protocol)!=="https:")throw new L(D.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}return n||(n=new URL("solana-wallet:/")),new URL(e.startsWith("/")?e:[...F(n.pathname),...F(e)].join("/"),n)}("v1/associate/local",n);return a.searchParams.set("association",s.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])),a.searchParams.set("port",`${r}`),i.forEach(e=>{a.searchParams.set("v",e)}),a})}(e,n,t);if("https:"===i.protocol)window.location.assign(i);else try{switch(-1!==navigator.userAgent.indexOf("Firefox/")?q.Firefox:q.Other){case q.Firefox:null==W&&((W=document.createElement("iframe")).style.display="none",document.body.appendChild(W)),W.contentWindow.location.href=i.toString();break;case q.Other:{let e=new Promise((e,t)=>{function n(){clearTimeout(r),window.removeEventListener("blur",i)}function i(){n(),e()}window.addEventListener("blur",i);let r=setTimeout(()=>{n(),t()},2e3)});window.location.assign(i),yield e}}}catch(e){throw new L(D.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}return n})}(i.publicKey,null==t?void 0:t.baseUri),s=`ws://localhost:${r}/solana-wallet`,a=(()=>{let e=[...Q];return()=>e.length>1?e.shift():e[0]})(),o=1,c=0,u={__type:"disconnected"};return new Promise((t,l)=>{let h,d,f;let y={},p=()=>P(this,void 0,void 0,function*(){if("connecting"!==u.__type){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${u.__type}\`.`);return}let{associationKeypair:e}=u;h.removeEventListener("open",p);let t=yield function(){return P(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}();h.send((yield function(e,t){return P(this,void 0,void 0,function*(){let n=yield crypto.subtle.exportKey("raw",e),i=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,n),r=new Uint8Array(n.byteLength+i.byteLength);return r.set(new Uint8Array(n),0),r.set(new Uint8Array(i),n.byteLength),r})}(t.publicKey,e.privateKey))),u={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:t.privateKey}}),m=e=>{e.wasClean?u={__type:"disconnected"}:l(new L(D.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${e.code}: ${e.reason}).`,{closeEvent:e})),d()},w=e=>P(this,void 0,void 0,function*(){d(),Date.now()-n>=3e4?l(new L(D.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket on port ${r}.`)):(yield new Promise(e=>{let t=a();f=window.setTimeout(e,t)}),v())}),g=n=>P(this,void 0,void 0,function*(){let i=yield n.data.arrayBuffer();switch(u.__type){case"connected":try{let e=i.slice(0,4),t=K(e);if(t!==c+1)throw Error("Encrypted message has invalid sequence number");c=t;let n=yield function(e,t){return P(this,void 0,void 0,function*(){let n=JSON.parse((yield x(e,t)));if(Object.hasOwnProperty.call(n,"error"))throw new j(n.id,n.error.code,n.error.message);return n})}(i,u.sharedSecret),r=y[n.id];delete y[n.id],r.resolve(n.result)}catch(e){if(e instanceof j){let t=y[e.jsonRpcMessageId];delete y[e.jsonRpcMessageId],t.reject(e)}else throw e}break;case"hello_req_sent":{var r,s;let n=yield function(e,t,n){return P(this,void 0,void 0,function*(){let[i,r]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",e.slice(0,65),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:r},n,256),a=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(i),info:new Uint8Array},a,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}(i,u.associationPublicKey,u.ecdhPrivateKey),a=i.slice(65),f=0!==a.byteLength?yield P(this,void 0,void 0,function*(){let e=K(a.slice(0,4));if(e!==c+1)throw Error("Encrypted message has invalid sequence number");return c=e,function(e,t){return P(this,void 0,void 0,function*(){let n=JSON.parse((yield x(e,t))),i="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new L(D.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:i}})}(a,n)}):{protocol_version:"legacy"};u={__type:"connected",sharedSecret:n,sessionProperties:f};let p=(r=f.protocol_version,s=(e,t)=>P(this,void 0,void 0,function*(){let i=o++;return h.send((yield function(e,t){return P(this,void 0,void 0,function*(){let n=JSON.stringify(e);return function(e,t,n){return P(this,void 0,void 0,function*(){let i=function(e){if(e>=4294967296)throw Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!1),new Uint8Array(t)}(t),r=new Uint8Array(12);crypto.getRandomValues(r);let s=yield crypto.subtle.encrypt(U(i,r),n,new TextEncoder().encode(e)),a=new Uint8Array(i.byteLength+r.byteLength+s.byteLength);return a.set(new Uint8Array(i),0),a.set(new Uint8Array(r),i.byteLength),a.set(new Uint8Array(s),i.byteLength+r.byteLength),a})}(n,e.id,t)})}({id:i,jsonrpc:"2.0",method:e,params:null!=t?t:{}},n))),new Promise((t,n)=>{y[i]={resolve(i){switch(e){case"authorize":case"reauthorize":{let{wallet_uri_base:e}=i;if(null!=e)try{!function(e){let t;try{t=new URL(e)}catch(e){throw new L(D.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if("https:"!==t.protocol)throw new L(D.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}(e)}catch(e){n(e);return}}}t(i)},reject:n}})}),new Proxy({},{get:(e,t)=>(null==e[t]&&(e[t]=function(e){return P(this,void 0,void 0,function*(){let{method:n,params:i}=function(e,t,n){let i=t,r=e.toString().replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`).toLowerCase();switch(e){case"authorize":{let{chain:e}=i;if("legacy"===n){switch(e){case"solana:testnet":e="testnet";break;case"solana:devnet":e="devnet";break;case"solana:mainnet":e="mainnet-beta";break;default:e=i.cluster}i.cluster=e}else{switch(e){case"testnet":case"devnet":e=`solana:${e}`;break;case"mainnet-beta":e="solana:mainnet"}i.chain=e}}case"reauthorize":{let{auth_token:e,identity:t}=i;e&&("legacy"===n?(r="reauthorize",i={auth_token:e,identity:t}):r="authorize")}}return{method:r,params:i}}(t,e,r),a=yield s(n,i);return"authorize"===n&&i.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield function(e,t,n){var i;return P(this,void 0,void 0,function*(){var r,s;let a=null!==(i=e.domain)&&void 0!==i?i:window.location.host,o=t.accounts[0].address,c=(r=Object.assign(Object.assign({},e),{domain:a,address:o}),s=function(e){let t=`${e.domain} wants you to sign in with your Solana account:
`;t+=`${e.address}`,e.statement&&(t+=`

${e.statement}`);let n=[];if(e.uri&&n.push(`URI: ${e.uri}`),e.version&&n.push(`Version: ${e.version}`),e.chainId&&n.push(`Chain ID: ${e.chainId}`),e.nonce&&n.push(`Nonce: ${e.nonce}`),e.issuedAt&&n.push(`Issued At: ${e.issuedAt}`),e.expirationTime&&n.push(`Expiration Time: ${e.expirationTime}`),e.notBefore&&n.push(`Not Before: ${e.notBefore}`),e.requestId&&n.push(`Request ID: ${e.requestId}`),e.resources)for(let t of(n.push("Resources:"),e.resources))n.push(`- ${t}`);return n.length&&(t+=`

${n.join("\n")}`),t}(r),window.btoa(s)),u=yield n("sign_messages",{addresses:[o],payloads:[c]});return{address:o,signed_message:c,signature:u.signed_payloads[0].slice(c.length)}})}(i.sign_in_payload,a,s)),function(e,t,n){if("getCapabilities"===e)switch(n){case"legacy":{let e=["solana:signTransactions"];return!0===t.supports_clone_authorization&&e.push(z),Object.assign(Object.assign({},t),{features:e})}case"v1":return Object.assign(Object.assign({},t),{supports_sign_and_send_transactions:!0,supports_clone_authorization:t.features.includes(z)})}return t}(t,a,r)})}),e[t]),defineProperty:()=>!1,deleteProperty:()=>!1}));try{t((yield e(p)))}catch(e){l(e)}finally{d(),h.close()}}}}),v=()=>{d&&d(),u={__type:"connecting",associationKeypair:i},void 0===n&&(n=Date.now()),(h=new WebSocket(s,["com.solana.mobilewalletadapter.v1"])).addEventListener("open",p),h.addEventListener("close",m),h.addEventListener("error",w),h.addEventListener("message",g),d=()=>{window.clearTimeout(f),h.removeEventListener("open",p),h.removeEventListener("close",m),h.removeEventListener("error",w),h.removeEventListener("message",g)}};v()})})}(t=>e(new Proxy({},{get(e,n){if(null==e[n])switch(n){case"signAndSendTransactions":e[n]=function(e){var{minContextSlot:n,commitment:i,skipPreflight:r,maxRetries:s,waitForCommitmentToSendNextTransaction:a,transactions:o}=e,c=G(e,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return $(this,void 0,void 0,function*(){let e=o.map(V),u={min_context_slot:n,commitment:i,skip_preflight:r,max_retries:s,wait_for_commitment_to_send_next_transaction:a},{signatures:l}=yield t.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},c),Object.values(u).some(e=>null!=e)?{options:u}:null),{payloads:e}));return l.map(Y).map(B.encode)})};break;case"signMessages":e[n]=function(e){var{payloads:n}=e,i=G(e,["payloads"]);return $(this,void 0,void 0,function*(){let e=n.map(H),{signed_payloads:r}=yield t.signMessages(Object.assign(Object.assign({},i),{payloads:e}));return r.map(Y)})};break;case"signTransactions":e[n]=function(e){var{transactions:n}=e,i=G(e,["transactions"]);return $(this,void 0,void 0,function*(){let e=n.map(V),{signed_payloads:r}=yield t.signTransactions(Object.assign(Object.assign({},i),{payloads:e}));return r.map(Y).map(Z)})};break;default:e[n]=t[n]}return e[n]},defineProperty:()=>!1,deleteProperty:()=>!1})),t)})}(e,n?{baseUri:n}:void 0)}catch(e){throw this._connectionGeneration!==i&&(yield new Promise(()=>{})),e instanceof Error&&"SolanaMobileWalletAdapterError"===e.name&&"ERROR_WALLET_NOT_FOUND"===e.code&&(yield this._onWalletNotFound(this)),e}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new R.oS;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return J(this,void 0,void 0,function*(){let{authToken:t}=this.assertIsAuthorized();try{return yield this.transact(n=>J(this,void 0,void 0,function*(){return yield this.performReauthorization(n,t),yield n.signTransactions({transactions:e})}))}catch(e){throw new R.PY(null==e?void 0:e.message,e)}})}sendTransaction(e,t,n){return J(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>J(this,void 0,void 0,function*(){let{authToken:i}=this.assertIsAuthorized(),r=null==n?void 0:n.minContextSlot;try{return yield this.transact(s=>J(this,void 0,void 0,function*(){function a(){let e,i;switch(t.commitment){case"confirmed":case"finalized":case"processed":e=t.commitment;break;default:e="finalized"}switch(null==n?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":i=n.preflightCommitment;break;case void 0:i=e;break;default:i="finalized"}let r="finalized"===i?2:"confirmed"===i?1:0,s="finalized"===e?2:"confirmed"===e?1:0;return r<s?i:e}let[o,c,u]=yield Promise.all([s.getCapabilities(),this.performReauthorization(s,i),et(e)?null:J(this,void 0,void 0,function*(){var n;if(e.feePayer||(e.feePayer=null!==(n=this.publicKey)&&void 0!==n?n:void 0),null==e.recentBlockhash){let{blockhash:n}=yield t.getLatestBlockhash({commitment:a()});e.recentBlockhash=n}})]);if(o.supports_sign_and_send_transactions)return(yield s.signAndSendTransactions({minContextSlot:r,transactions:[e]}))[0];{let[i]=yield s.signTransactions({transactions:[e]});if(et(i))return yield t.sendTransaction(i);{let e=i.serialize();return yield t.sendRawTransaction(e,Object.assign(Object.assign({},n),{preflightCommitment:a()}))}}}))}catch(e){throw new R.IW(null==e?void 0:e.message,e)}}))})}signTransaction(e){return J(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>J(this,void 0,void 0,function*(){let[t]=yield this.performSignTransactions([e]);return t}))})}signAllTransactions(e){return J(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>J(this,void 0,void 0,function*(){return yield this.performSignTransactions(e)}))})}signMessage(e){return J(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>J(this,void 0,void 0,function*(){let{authToken:t,selectedAddress:n}=this.assertIsAuthorized();try{return yield this.transact(i=>J(this,void 0,void 0,function*(){yield this.performReauthorization(i,t);let[r]=yield i.signMessages({addresses:[n],payloads:[e]});return r.slice(-64)}))}catch(e){throw new R.fk(null==e?void 0:e.message,e)}}))})}signIn(e){return J(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>J(this,void 0,void 0,function*(){var t,n;if(this._readyState!==M.i1.Installed&&this._readyState!==M.i1.Loadable)throw new R.OZ;this._connecting=!0;try{let i=yield this.performAuthorization(Object.assign(Object.assign({},e),{domain:null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:window.location.host}));if(!i.sign_in_result)throw Error("Sign in failed, no sign in result returned by wallet");let r=i.sign_in_result.address;return{account:Object.assign(Object.assign({},null!==(n=i.accounts.find(e=>e.address==r))&&void 0!==n?n:{address:r}),{publicKey:X(r)}),signedMessage:X(i.sign_in_result.signed_message),signature:X(i.sign_in_result.signature)}}catch(e){throw new R.$w(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}}let ei="SolanaMobileWalletAdapterDefaultAuthorizationCache";function er(e){return J(this,void 0,void 0,function*(){"undefined"!=typeof window&&window.location.assign(e.url)})}let es="solana:signAndSendTransaction",ea="solana:signTransaction",eo="standard:connect",ec="standard:events",eu=function(e){return eo in e.features&&ec in e.features&&(es in e.features||ea in e.features)};var el=n(8801);let eh="solana:signMessage",ed="solana:signIn",ef="solana:mainnet";function ey(e){switch(e){case"processed":case"confirmed":case"finalized":case void 0:return e;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}let ep="standard:disconnect";new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap;var em=function(e,t,n,i,r){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!r)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},ew=function(e,t,n,i){if("a"===n&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};class eg extends M.mI{constructor({wallet:e}){super(),o.add(this),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),h.set(this,void 0),d.set(this,void 0),f.set(this,void 0),y.set(this,void 0),p.set(this,"undefined"==typeof window||"undefined"==typeof document?M.i1.Unsupported:M.i1.Installed),b.set(this,e=>{if("accounts"in e){let e=ew(this,y,"f").accounts[0];ew(this,c,"f")&&!ew(this,h,"f")&&e!==ew(this,c,"f")&&(e?ew(this,o,"m",w).call(this,e):(this.emit("error",new R.at),ew(this,o,"m",g).call(this)))}"features"in e&&ew(this,o,"m",v).call(this)}),em(this,y,e,"f"),em(this,c,null,"f"),em(this,u,null,"f"),em(this,l,!1,"f"),em(this,h,!1,"f"),em(this,d,ew(this,y,"f").features[ec].on("change",ew(this,b,"f")),"f"),ew(this,o,"m",v).call(this)}get name(){return ew(this,y,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return ew(this,y,"f").icon}get readyState(){return ew(this,p,"f")}get publicKey(){return ew(this,u,"f")}get connecting(){return ew(this,l,"f")}get supportedTransactionVersions(){return ew(this,f,"f")}get wallet(){return ew(this,y,"f")}get standard(){return!0}destroy(){em(this,c,null,"f"),em(this,u,null,"f"),em(this,l,!1,"f"),em(this,h,!1,"f");let e=ew(this,d,"f");e&&(em(this,d,null,"f"),e())}async autoConnect(){return ew(this,o,"m",m).call(this,{silent:!0})}async connect(){return ew(this,o,"m",m).call(this)}async disconnect(){if(ep in ew(this,y,"f").features)try{em(this,h,!0,"f"),await ew(this,y,"f").features[ep].disconnect()}catch(e){this.emit("error",new R.UG(e?.message,e))}finally{em(this,h,!1,"f")}ew(this,o,"m",g).call(this)}async sendTransaction(e,t,n={}){try{var i;let r;let s=ew(this,c,"f");if(!s)throw new R.oS;if(es in ew(this,y,"f").features){if(s.features.includes(es))r=es;else if(ea in ew(this,y,"f").features&&s.features.includes(ea))r=ea;else throw new R.cO}else if(ea in ew(this,y,"f").features){if(!s.features.includes(ea))throw new R.cO;r=ea}else throw new R.p6;let a=(i=t.rpcEndpoint).includes("https://api.mainnet-beta.solana.com")?ef:/\bdevnet\b/i.test(i)?"solana:devnet":/\btestnet\b/i.test(i)?"solana:testnet":/\blocalhost\b/i.test(i)||/\b127\.0\.0\.1\b/.test(i)?"solana:localnet":ef;if(!s.chains.includes(a))throw new R.IW;try{let i;let{signers:o,...c}=n;if((0,el.W)(e)?(o?.length&&e.sign(o),i=e.serialize()):(e=await this.prepareTransaction(e,t,c),o?.length&&e.partialSign(...o),i=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),r===es){let[e]=await ew(this,y,"f").features[es].signAndSendTransaction({account:s,chain:a,transaction:i,options:{preflightCommitment:ey(c.preflightCommitment||t.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return B.encode(e.signature)}{let[e]=await ew(this,y,"f").features[ea].signTransaction({account:s,chain:a,transaction:i,options:{preflightCommitment:ey(c.preflightCommitment||t.commitment),minContextSlot:c.minContextSlot}});return await t.sendRawTransaction(e.signedTransaction,{...c,preflightCommitment:ey(c.preflightCommitment||t.commitment)})}}catch(e){if(e instanceof R.lj)throw e;throw new R.IW(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}c=new WeakMap,u=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,y=new WeakMap,p=new WeakMap,b=new WeakMap,o=new WeakSet,m=async function(e){try{if(this.connected||this.connecting)return;if(ew(this,p,"f")!==M.i1.Installed)throw new R.OZ;if(em(this,l,!0,"f"),!ew(this,y,"f").accounts.length)try{await ew(this,y,"f").features[eo].connect(e)}catch(e){throw new R.$w(e?.message,e)}let t=ew(this,y,"f").accounts[0];if(!t)throw new R.cO;ew(this,o,"m",w).call(this,t)}catch(e){throw this.emit("error",e),e}finally{em(this,l,!1,"f")}},w=function(e){let t;try{t=new I.PublicKey(e.address)}catch(e){throw new R.Nx(e?.message,e)}em(this,c,e,"f"),em(this,u,t,"f"),ew(this,o,"m",v).call(this),this.emit("connect",t)},g=function(){em(this,c,null,"f"),em(this,u,null,"f"),ew(this,o,"m",v).call(this),this.emit("disconnect")},v=function(){let e=es in ew(this,y,"f").features?ew(this,y,"f").features[es].supportedTransactionVersions:ew(this,y,"f").features[ea].supportedTransactionVersions;em(this,f,!function(e,t){if(e===t)return!0;let n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}(e,["legacy"])?new Set(e):null,"f"),ea in ew(this,y,"f").features&&ew(this,c,"f")?.features.includes(ea)?(this.signTransaction=ew(this,o,"m",S),this.signAllTransactions=ew(this,o,"m",E)):(delete this.signTransaction,delete this.signAllTransactions),eh in ew(this,y,"f").features&&ew(this,c,"f")?.features.includes(eh)?this.signMessage=ew(this,o,"m",_):delete this.signMessage,ed in ew(this,y,"f").features?this.signIn=ew(this,o,"m",O):delete this.signIn},S=async function(e){try{let t=ew(this,c,"f");if(!t)throw new R.oS;if(!(ea in ew(this,y,"f").features))throw new R.p6;if(!t.features.includes(ea))throw new R.cO;try{let n=(await ew(this,y,"f").features[ea].signTransaction({account:t,transaction:(0,el.W)(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return(0,el.W)(e)?I.VersionedTransaction.deserialize(n):I.Transaction.from(n)}catch(e){if(e instanceof R.lj)throw e;throw new R.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}},E=async function(e){try{let t=ew(this,c,"f");if(!t)throw new R.oS;if(!(ea in ew(this,y,"f").features))throw new R.p6;if(!t.features.includes(ea))throw new R.cO;try{let n=await ew(this,y,"f").features[ea].signTransaction(...e.map(e=>({account:t,transaction:(0,el.W)(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((e,t)=>{let i=n[t].signedTransaction;return(0,el.W)(e)?I.VersionedTransaction.deserialize(i):I.Transaction.from(i)})}catch(e){throw new R.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}},_=async function(e){try{let t=ew(this,c,"f");if(!t)throw new R.oS;if(!(eh in ew(this,y,"f").features))throw new R.p6;if(!t.features.includes(eh))throw new R.cO;try{return(await ew(this,y,"f").features[eh].signMessage({account:t,message:e}))[0].signature}catch(e){throw new R.fk(e?.message,e)}}catch(e){throw this.emit("error",e),e}},O=async function(e={}){try{let t;if(!(ed in ew(this,y,"f").features))throw new R.p6;try{[t]=await ew(this,y,"f").features[ed].signIn(e)}catch(e){throw new R.bD(e?.message,e)}if(!t)throw new R.bD;return ew(this,o,"m",w).call(this,t.account),t}catch(e){throw this.emit("error",e),e}};var ev=function(e,t,n,i,r){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!r)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},eb=function(e,t,n,i){if("a"===n&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)};let eS=new Set,eE={};function e_(...e){return(e=e.filter(e=>!eS.has(e))).length?(e.forEach(e=>eS.add(e)),eE.register?.forEach(t=>eC(()=>t(...e))),function(){e.forEach(e=>eS.delete(e)),eE.unregister?.forEach(t=>eC(()=>t(...e)))}):()=>{}}function eO(){return[...eS]}function eT(e,t){return eE[e]?.push(t)||(eE[e]=[t]),function(){eE[e]=eE[e]?.filter(e=>t!==e)}}function eC(e){try{e()}catch(e){console.error(e)}}class eA extends Event{constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),T.set(this,void 0),ev(this,T,e,"f")}get detail(){return eb(this,T,"f")}get type(){return"wallet-standard:app-ready"}preventDefault(){throw Error("preventDefault cannot be called")}stopImmediatePropagation(){throw Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw Error("stopPropagation cannot be called")}}T=new WeakMap;var eM=n(3984);function eR(e){let t=(0,eM.useRef)();return t.current||(t.current={value:e()}),t.current.value}function eI(e){return e.filter(eu).map(e=>new eg({wallet:e}))}(a=C||(C={}))[a.DESKTOP_WEB=0]="DESKTOP_WEB",a[a.MOBILE_WEB=1]="MOBILE_WEB";var eN=n(2293);class eD extends R.lj{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}var eL=n(7162);function ej({children:e,wallets:t,adapter:n,isUnloadingRef:i,onAutoConnectRequest:r,onConnectError:s,onError:a,onSelectWallet:o}){let c=(0,eM.useRef)(!1),[u,l]=(0,eM.useState)(!1),h=(0,eM.useRef)(!1),[d,f]=(0,eM.useState)(!1),[y,p]=(0,eM.useState)(()=>n?.publicKey??null),[m,w]=(0,eM.useState)(()=>n?.connected??!1),g=(0,eM.useRef)(a);(0,eM.useEffect)(()=>(g.current=a,()=>{g.current=void 0}),[a]);let v=(0,eM.useRef)((e,t)=>(!i.current&&(g.current?g.current(e,t):(console.error(e,t),e instanceof R.OZ&&"undefined"!=typeof window&&t&&window.open(t.url,"_blank"))),e)),[b,S]=(0,eM.useState)(()=>t.map(e=>({adapter:e,readyState:e.readyState})).filter(({readyState:e})=>e!==M.i1.Unsupported));(0,eM.useEffect)(()=>{function e(e){S(t=>{let n=t.findIndex(({adapter:e})=>e===this);if(-1===n)return t;let{adapter:i}=t[n];return[...t.slice(0,n),{adapter:i,readyState:e},...t.slice(n+1)].filter(({readyState:e})=>e!==M.i1.Unsupported)})}return S(e=>t.map((t,n)=>{let i=e[n];return i&&i.adapter===t&&i.readyState===t.readyState?i:{adapter:t,readyState:t.readyState}}).filter(({readyState:e})=>e!==M.i1.Unsupported)),t.forEach(t=>t.on("readyStateChange",e,t)),()=>{t.forEach(t=>t.off("readyStateChange",e,t))}},[n,t]);let E=(0,eM.useMemo)(()=>b.find(e=>e.adapter===n)??null,[n,b]);(0,eM.useEffect)(()=>{if(!n)return;let e=e=>{p(e),c.current=!1,l(!1),w(!0),h.current=!1,f(!1)},t=()=>{i.current||(p(null),c.current=!1,l(!1),w(!1),h.current=!1,f(!1))},r=e=>{v.current(e,n)};return n.on("connect",e),n.on("disconnect",t),n.on("error",r),()=>{n.off("connect",e),n.off("disconnect",t),n.off("error",r),t()}},[n,i]);let _=(0,eM.useRef)(!1);(0,eM.useEffect)(()=>()=>{_.current=!1},[n]),(0,eM.useEffect)(()=>{_.current||c.current||m||!r||E?.readyState!==M.i1.Installed&&E?.readyState!==M.i1.Loadable||(c.current=!0,l(!0),_.current=!0,async function(){try{await r()}catch{s()}finally{l(!1),c.current=!1}}())},[m,r,s,E]);let O=(0,eM.useCallback)(async(e,t,i)=>{if(!n)throw v.current(new eD);if(!m)throw v.current(new R.oS,n);return await n.sendTransaction(e,t,i)},[n,m]),T=(0,eM.useMemo)(()=>n&&"signTransaction"in n?async e=>{if(!m)throw v.current(new R.oS,n);return await n.signTransaction(e)}:void 0,[n,m]),C=(0,eM.useMemo)(()=>n&&"signAllTransactions"in n?async e=>{if(!m)throw v.current(new R.oS,n);return await n.signAllTransactions(e)}:void 0,[n,m]),A=(0,eM.useMemo)(()=>n&&"signMessage"in n?async e=>{if(!m)throw v.current(new R.oS,n);return await n.signMessage(e)}:void 0,[n,m]),I=(0,eM.useMemo)(()=>n&&"signIn"in n?async e=>await n.signIn(e):void 0,[n]),N=(0,eM.useCallback)(async()=>{if(c.current||h.current||E?.adapter.connected)return;if(!E)throw v.current(new eD);let{adapter:e,readyState:t}=E;if(!(t===M.i1.Installed||t===M.i1.Loadable))throw v.current(new R.OZ,e);c.current=!0,l(!0);try{await e.connect()}catch(e){throw s(),e}finally{l(!1),c.current=!1}},[s,E]),D=(0,eM.useCallback)(async()=>{if(!h.current&&n){h.current=!0,f(!0);try{await n.disconnect()}finally{f(!1),h.current=!1}}},[n]);return eM.createElement(eL.z.Provider,{value:{autoConnect:!!r,wallets:b,wallet:E,publicKey:y,connected:m,connecting:u,disconnecting:d,select:o,connect:N,disconnect:D,sendTransaction:O,signTransaction:T,signAllTransactions:C,signMessage:A,signIn:I}},e)}function eP(e){return function({adapters:e,userAgentString:t}){return e.some(e=>e.name!==ee&&e.readyState===M.i1.Installed)?C.DESKTOP_WEB:t&&/android/i.test(t)&&!/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)?C.MOBILE_WEB:C.DESKTOP_WEB}({adapters:e,userAgentString:(void 0===r&&(r=globalThis.navigator?.userAgent??null),r)})===C.MOBILE_WEB}function ez({children:e,wallets:t,autoConnect:n,localStorageKey:i="walletName",onError:r}){let{connection:a}=(0,eN.R)(),o=function(e){let t=eR(()=>new Set),{get:n,on:i}=eR(()=>(function(){if(s||(s=function(){if(s||(s=Object.freeze({register:e_,get:eO,on:eT}),"undefined"==typeof window))return s;let e=Object.freeze({register:e_});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(e))}catch(e){console.error("wallet-standard:register-wallet event listener could not be added\n",e)}try{window.dispatchEvent(new eA(e))}catch(e){console.error("wallet-standard:app-ready event could not be dispatched\n",e)}return s}(),"undefined"==typeof window))return s;let e=window.navigator.wallets||[];if(!Array.isArray(e))return console.error("window.navigator.wallets is not an array"),s;let{register:t}=s,n=(...e)=>e.forEach(e=>eC(()=>e({register:t})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:n})})}catch(e){return console.error("window.navigator.wallets could not be set"),s}return n(...e),s})()),[r,a]=(0,eM.useState)(()=>eI(n()));(0,eM.useEffect)(()=>{let e=[i("register",(...e)=>a(t=>[...t,...eI(e)])),i("unregister",(...e)=>a(t=>t.filter(t=>e.some(e=>e===t.wallet))))];return()=>e.forEach(e=>e())},[i]);let o=function(e){let t=(0,eM.useRef)();return(0,eM.useEffect)(()=>{t.current=e}),t.current}(r);return(0,eM.useEffect)(()=>{if(!o)return;let e=new Set(r);new Set(o.filter(t=>!e.has(t))).forEach(e=>e.destroy())},[o,r]),(0,eM.useEffect)(()=>()=>r.forEach(e=>e.destroy()),[]),(0,eM.useMemo)(()=>[...r,...e.filter(({name:e})=>!r.some(t=>t.name===e)||(t.has(e)||(t.add(e),console.warn(`${e} was registered as a Standard Wallet. The Wallet Adapter for ${e} can be removed from your app.`)),!1))],[r,e,t])}(t),c=(0,eM.useMemo)(()=>{var e;if(!eP(o))return null;let t=o.find(e=>e.name===ee);return t||new en({addressSelector:{select(e){return J(this,void 0,void 0,function*(){return e[0]})}},appIdentity:{uri:function(){let e=globalThis.location;if(e)return`${e.protocol}//${e.host}`}()},authorizationResultCache:function(){let e;try{e=window.localStorage}catch(e){}return{clear(){return J(this,void 0,void 0,function*(){if(e)try{e.removeItem(ei)}catch(e){}})},get(){return J(this,void 0,void 0,function*(){if(e)try{return JSON.parse(e.getItem(ei))||void 0}catch(e){}})},set(t){return J(this,void 0,void 0,function*(){if(e)try{e.setItem(ei,JSON.stringify(t))}catch(e){}})}}}(),cluster:(e=a?.rpcEndpoint)?/devnet/i.test(e)?"devnet":/testnet/i.test(e)?"testnet":"mainnet-beta":"mainnet-beta",onWalletNotFound:er})},[o,a?.rpcEndpoint]),u=(0,eM.useMemo)(()=>null==c||-1!==o.indexOf(c)?o:[c,...o],[o,c]),[l,h]=function(e,t){let n=(0,eM.useState)(()=>{try{let t=localStorage.getItem(e);if(t)return JSON.parse(t)}catch(e){"undefined"!=typeof window&&console.error(e)}return t}),i=n[0],r=(0,eM.useRef)(!0);return(0,eM.useEffect)(()=>{if(r.current){r.current=!1;return}try{null===i?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(i))}catch(e){"undefined"!=typeof window&&console.error(e)}},[i,e]),n}(i,eP(o)?ee:null),d=(0,eM.useMemo)(()=>u.find(e=>e.name===l)??null,[u,l]),f=(0,eM.useCallback)(e=>{l!==e&&(d&&d.name!==ee&&d.disconnect(),h(e))},[d,h,l]);(0,eM.useEffect)(()=>{if(d)return d.on("disconnect",e),()=>{d.off("disconnect",e)};function e(){!m.current&&(l===ee&&eP(o)||h(null))}},[d,o,h,l]);let y=(0,eM.useRef)(!1),p=(0,eM.useMemo)(()=>{if(n&&d)return async()=>{(!0===n||await n(d))&&(y.current?await d.connect():await d.autoConnect())}},[n,d]),m=(0,eM.useRef)(!1);(0,eM.useEffect)(()=>{if(l===ee&&eP(o)){m.current=!1;return}function e(){m.current=!0}return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[o,l]);let w=(0,eM.useCallback)(()=>{d&&d.name!==ee&&f(null)},[d,f]),g=(0,eM.useCallback)(e=>{y.current=!0,f(e)},[f]);return eM.createElement(ej,{wallets:u,adapter:d,isUnloadingRef:m,onAutoConnectRequest:p,onConnectError:w,onError:r,onSelectWallet:g},e)}},2293:function(e,t,n){"use strict";n.d(t,{R:function(){return s},h:function(){return r}});var i=n(3984);let r=(0,i.createContext)({});function s(){return(0,i.useContext)(r)}},4524:function(e,t,n){"use strict";n.d(t,{S:function(){return j}});var i="undefined"==typeof window||"Deno"in globalThis;function r(){}function s(e,t){return"function"==typeof e?e(t):e}function a(e,t){let{type:n="all",exact:i,fetchStatus:r,predicate:s,queryKey:a,stale:o}=e;if(a){if(i){if(t.queryHash!==c(a,t.options))return!1}else if(!l(t.queryKey,a))return!1}if("all"!==n){let e=t.isActive();if("active"===n&&!e||"inactive"===n&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&(!r||r===t.state.fetchStatus)&&(!s||!!s(t))}function o(e,t){let{exact:n,status:i,predicate:r,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(u(t.options.mutationKey)!==u(s))return!1}else if(!l(t.options.mutationKey,s))return!1}return(!i||t.state.status===i)&&(!r||!!r(t))}function c(e,t){return(t?.queryKeyHashFn||u)(e)}function u(e){return JSON.stringify(e,(e,t)=>d(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function l(e,t){return e===t||typeof e==typeof t&&!!e&&!!t&&"object"==typeof e&&"object"==typeof t&&!Object.keys(t).some(n=>!l(e[n],t[n]))}function h(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function d(e){if(!f(e))return!1;let t=e.constructor;if(void 0===t)return!0;let n=t.prototype;return!!(f(n)&&n.hasOwnProperty("isPrototypeOf"))&&Object.getPrototypeOf(e)===Object.prototype}function f(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e,t,n=0){let i=[...e,t];return n&&i.length>n?i.slice(1):i}function p(e,t,n=0){let i=[t,...e];return n&&i.length>n?i.slice(0,-1):i}var m=Symbol();function w(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==m?e.queryFn:()=>Promise.reject(Error(`Missing queryFn: '${e.queryHash}'`))}var g=function(){let e=[],t=0,n=e=>{e()},i=e=>{e()},r=e=>setTimeout(e,0),s=i=>{t?e.push(i):r(()=>{n(i)})},a=()=>{let t=e;e=[],t.length&&r(()=>{i(()=>{t.forEach(e=>{n(e)})})})};return{batch:e=>{let n;t++;try{n=e()}finally{--t||a()}return n},batchCalls:e=>(...t)=>{s(()=>{e(...t)})},schedule:s,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{i=e},setScheduler:e=>{r=e}}}(),v=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},b=new class extends v{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!i&&window.addEventListener){let t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){let e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#e?this.#e:globalThis.document?.visibilityState!=="hidden"}},S=new class extends v{#i=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!i&&window.addEventListener){let t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#i!==e&&(this.#i=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#i}};function E(e){return Math.min(1e3*2**e,3e4)}function _(e){return(e??"online")!=="online"||S.isOnline()}var O=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function T(e){return e instanceof O}function C(e){let t,n,r,s=!1,a=0,o=!1,c=new Promise((e,t)=>{n=e,r=t}),u=()=>b.isFocused()&&("always"===e.networkMode||S.isOnline())&&e.canRun(),l=()=>_(e.networkMode)&&e.canRun(),h=i=>{o||(o=!0,e.onSuccess?.(i),t?.(),n(i))},d=n=>{o||(o=!0,e.onError?.(n),t?.(),r(n))},f=()=>new Promise(n=>{t=e=>{(o||u())&&n(e)},e.onPause?.()}).then(()=>{t=void 0,o||e.onContinue?.()}),y=()=>{let t;if(o)return;let n=0===a?e.initialPromise:void 0;try{t=n??e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(h).catch(t=>{if(o)return;let n=e.retry??(i?0:3),r=e.retryDelay??E,c="function"==typeof r?r(a,t):r,l=!0===n||"number"==typeof n&&a<n||"function"==typeof n&&n(a,t);if(s||!l){d(t);return}a++,e.onFail?.(a,t),new Promise(e=>{setTimeout(e,c)}).then(()=>u()?void 0:f()).then(()=>{s?d(t):y()})})};return{promise:c,cancel:t=>{o||(d(new O(t)),e.abort?.())},continue:()=>(t?.(),c),cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:l,start:()=>(l()?y():f().then(y),c)}}var A=class{#r;destroy(){this.clearGcTimeout()}scheduleGc(){var e;this.clearGcTimeout(),"number"==typeof(e=this.gcTime)&&e>=0&&e!==1/0&&(this.#r=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(i?1/0:3e5))}clearGcTimeout(){this.#r&&(clearTimeout(this.#r),this.#r=void 0)}},M=class extends A{#s;#a;#o;#c;#u;#l;constructor(e){super(),this.#l=!1,this.#u=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#o=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#s=function(e){let t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,i=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=e.state??this.#s,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#c?.promise}setOptions(e){this.options={...this.#u,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#o.remove(this)}setData(e,t){var n,i;let r=(n=this.state.data,"function"==typeof(i=this.options).structuralSharing?i.structuralSharing(n,e):!1!==i.structuralSharing?function e(t,n){if(t===n)return t;let i=h(t)&&h(n);if(i||d(t)&&d(n)){let r=i?t:Object.keys(t),s=r.length,a=i?n:Object.keys(n),o=a.length,c=i?[]:{},u=0;for(let s=0;s<o;s++){let o=i?s:a[s];(!i&&r.includes(o)||i)&&void 0===t[o]&&void 0===n[o]?(c[o]=void 0,u++):(c[o]=e(t[o],n[o]),c[o]===t[o]&&void 0!==t[o]&&u++)}return s===o&&u===s?t:c}return n}(n,e):e);return this.#h({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#h({type:"setState",state:e,setStateOptions:t})}cancel(e){let t=this.#c?.promise;return this.#c?.cancel(e),t?t.then(r).catch(r):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#s)}isActive(){return this.observers.some(e=>{var t;return!1!==("function"==typeof(t=e.options.enabled)?t(this):t)})}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data)}isStaleByTime(e=0){return this.state.isInvalidated||void 0===this.state.data||!Math.max(this.state.dataUpdatedAt+(e||0)-Date.now(),0)}onFocus(){let e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#c?.continue()}onOnline(){let e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#c?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#o.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#c&&(this.#l?this.#c.cancel({revert:!0}):this.#c.cancelRetry()),this.scheduleGc()),this.#o.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#h({type:"invalidate"})}fetch(e,t){if("idle"!==this.state.fetchStatus){if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#c)return this.#c.continueRetry(),this.#c.promise}if(e&&this.setOptions(e),!this.options.queryFn){let e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}let n=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#l=!0,n.signal)})},r={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{let e=w(this.options,t),n={queryKey:this.queryKey,meta:this.meta};return(i(n),this.#l=!1,this.options.persister)?this.options.persister(e,n,this):e(n)}};i(r),this.options.behavior?.onFetch(r,this),this.#a=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==r.fetchOptions?.meta)&&this.#h({type:"fetch",meta:r.fetchOptions?.meta});let s=e=>{T(e)&&e.silent||this.#h({type:"error",error:e}),T(e)||(this.#o.config.onError?.(e,this),this.#o.config.onSettled?.(this.state.data,e,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.#c=C({initialPromise:t?.initialPromise,fn:r.fetchFn,abort:n.abort.bind(n),onSuccess:e=>{if(void 0===e){s(Error(`${this.queryHash} data is undefined`));return}try{this.setData(e)}catch(e){s(e);return}this.#o.config.onSuccess?.(e,this),this.#o.config.onSettled?.(e,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:s,onFail:(e,t)=>{this.#h({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#h({type:"pause"})},onContinue:()=>{this.#h({type:"continue"})},retry:r.options.retry,retryDelay:r.options.retryDelay,networkMode:r.options.networkMode,canRun:()=>!0}),this.#c.start()}#h(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":var n;return{...t,...(n=t.data,{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_(this.options.networkMode)?"fetching":"paused",...void 0===n&&{error:null,status:"pending"}}),fetchMeta:e.meta??null};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let i=e.error;if(T(i)&&i.revert&&this.#a)return{...this.#a,fetchStatus:"idle"};return{...t,error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),g.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#o.notify({query:this,type:"updated",action:e})})}},R=class extends v{constructor(e={}){super(),this.config=e,this.#d=new Map}#d;build(e,t,n){let i=t.queryKey,r=t.queryHash??c(i,t),s=this.get(r);return s||(s=new M({cache:this,queryKey:i,queryHash:r,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(s)),s}add(e){this.#d.has(e.queryHash)||(this.#d.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#d.get(e.queryHash);t&&(e.destroy(),t===e&&this.#d.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){g.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#d.get(e)}getAll(){return[...this.#d.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>a(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>a(e,t)):t}notify(e){g.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){g.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){g.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},I=class extends A{#f;#y;#c;constructor(e){super(),this.mutationId=e.mutationId,this.#y=e.mutationCache,this.#f=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#f.includes(e)||(this.#f.push(e),this.clearGcTimeout(),this.#y.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#f=this.#f.filter(t=>t!==e),this.scheduleGc(),this.#y.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#f.length||("pending"===this.state.status?this.scheduleGc():this.#y.remove(this))}continue(){return this.#c?.continue()??this.execute(this.state.variables)}async execute(e){this.#c=C({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#h({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#h({type:"pause"})},onContinue:()=>{this.#h({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#y.canRun(this)});let t="pending"===this.state.status,n=!this.#c.canStart();try{if(!t){this.#h({type:"pending",variables:e,isPaused:n}),await this.#y.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#h({type:"pending",context:t,variables:e,isPaused:n})}let i=await this.#c.start();return await this.#y.config.onSuccess?.(i,e,this.state.context,this),await this.options.onSuccess?.(i,e,this.state.context),await this.#y.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,e,this.state.context),this.#h({type:"success",data:i}),i}catch(t){try{throw await this.#y.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#y.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#h({type:"error",error:t})}}finally{this.#y.runNext(this)}}#h(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),g.batch(()=>{this.#f.forEach(t=>{t.onMutationUpdate(e)}),this.#y.notify({mutation:this,type:"updated",action:e})})}},N=class extends v{constructor(e={}){super(),this.config=e,this.#p=new Map,this.#m=Date.now()}#p;#m;build(e,t,n){let i=new I({mutationCache:this,mutationId:++this.#m,options:e.defaultMutationOptions(t),state:n});return this.add(i),i}add(e){let t=D(e),n=this.#p.get(t)??[];n.push(e),this.#p.set(t,n),this.notify({type:"added",mutation:e})}remove(e){let t=D(e);if(this.#p.has(t)){let n=this.#p.get(t)?.filter(t=>t!==e);n&&(0===n.length?this.#p.delete(t):this.#p.set(t,n))}this.notify({type:"removed",mutation:e})}canRun(e){let t=this.#p.get(D(e))?.find(e=>"pending"===e.state.status);return!t||t===e}runNext(e){let t=this.#p.get(D(e))?.find(t=>t!==e&&t.state.isPaused);return t?.continue()??Promise.resolve()}clear(){g.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#p.values()].flat()}find(e){let t={exact:!0,...e};return this.getAll().find(e=>o(t,e))}findAll(e={}){return this.getAll().filter(t=>o(e,t))}notify(e){g.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return g.batch(()=>Promise.all(e.map(e=>e.continue().catch(r))))}};function D(e){return e.options.scope?.id??String(e.mutationId)}function L(e,{pages:t,pageParams:n}){let i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,n[i],n):void 0}var j=class{#w;#y;#u;#g;#v;#b;#S;#E;constructor(e={}){this.#w=e.queryCache||new R,this.#y=e.mutationCache||new N,this.#u=e.defaultOptions||{},this.#g=new Map,this.#v=new Map,this.#b=0}mount(){this.#b++,1===this.#b&&(this.#S=b.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#w.onFocus())}),this.#E=S.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#w.onOnline())}))}unmount(){this.#b--,0===this.#b&&(this.#S?.(),this.#S=void 0,this.#E?.(),this.#E=void 0)}isFetching(e){return this.#w.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#y.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#w.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.getQueryData(e.queryKey);if(void 0===t)return this.fetchQuery(e);{let n=this.defaultQueryOptions(e),i=this.#w.build(this,n);return e.revalidateIfStale&&i.isStaleByTime(s(n.staleTime,i))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return this.#w.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){let i=this.defaultQueryOptions({queryKey:e}),r=this.#w.get(i.queryHash),s=r?.state.data,a="function"==typeof t?t(s):t;if(void 0!==a)return this.#w.build(this,i).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return g.batch(()=>this.#w.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#w.get(t.queryHash)?.state}removeQueries(e){let t=this.#w;g.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let n=this.#w,i={type:"active",...e};return g.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(i,t)))}cancelQueries(e={},t={}){let n={revert:!0,...t};return Promise.all(g.batch(()=>this.#w.findAll(e).map(e=>e.cancel(n)))).then(r).catch(r)}invalidateQueries(e={},t={}){return g.batch(()=>{if(this.#w.findAll(e).forEach(e=>{e.invalidate()}),"none"===e.refetchType)return Promise.resolve();let n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){let n={...t,cancelRefetch:t?.cancelRefetch??!0};return Promise.all(g.batch(()=>this.#w.findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(r)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(r)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let n=this.#w.build(this,t);return n.isStaleByTime(s(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(r).catch(r)}fetchInfiniteQuery(e){var t;return e.behavior=(t=e.pages,{onFetch:(e,n)=>{let i=async()=>{let n;let i=e.options,r=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],a=e.state.data?.pageParams||[],o=!1,c=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(e.signal.aborted?o=!0:e.signal.addEventListener("abort",()=>{o=!0}),e.signal)})},u=w(e.options,e.fetchOptions),l=async(t,n,i)=>{if(o)return Promise.reject();if(null==n&&t.pages.length)return Promise.resolve(t);let r={queryKey:e.queryKey,pageParam:n,direction:i?"backward":"forward",meta:e.options.meta};c(r);let s=await u(r),{maxPages:a}=e.options,l=i?p:y;return{pages:l(t.pages,s,a),pageParams:l(t.pageParams,n,a)}};if(r&&s.length){let e="backward"===r,t={pages:s,pageParams:a},o=(e?function(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}:L)(i,t);n=await l(t,o,e)}else{n=await l({pages:[],pageParams:[]},a[0]??i.initialPageParam);let e=t??s.length;for(let t=1;t<e;t++){let e=L(i,n);if(null==e)break;n=await l(n,e)}}return n};e.options.persister?e.fetchFn=()=>e.options.persister?.(i,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=i}}),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(r).catch(r)}resumePausedMutations(){return S.isOnline()?this.#y.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#w}getMutationCache(){return this.#y}getDefaultOptions(){return this.#u}setDefaultOptions(e){this.#u=e}setQueryDefaults(e,t){this.#g.set(u(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#g.values()],n={};return t.forEach(t=>{l(e,t.queryKey)&&(n={...n,...t.defaultOptions})}),n}setMutationDefaults(e,t){this.#v.set(u(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#v.values()],n={};return t.forEach(t=>{l(e,t.mutationKey)&&(n={...n,...t.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#u.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=c(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),!0!==t.enabled&&t.queryFn===m&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#u.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#w.clear(),this.#y.clear()}}},1488:function(e,t,n){"use strict";n.d(t,{aH:function(){return a}});var i=n(3984),r=n(3502),s=i.createContext(void 0),a=e=>{let{client:t,children:n}=e;return i.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),(0,r.jsx)(s.Provider,{value:t,children:n})}},2912:function(e,t,n){"use strict";n.d(t,{f:function(){return c}});var i=n(3984),r=["light","dark"],s="(prefers-color-scheme: dark)",a="undefined"==typeof window,o=i.createContext(void 0),c=e=>i.useContext(o)?e.children:i.createElement(l,{...e}),u=["light","dark"],l=e=>{let{forcedTheme:t,disableTransitionOnChange:n=!1,enableSystem:a=!0,enableColorScheme:c=!0,storageKey:l="theme",themes:p=u,defaultTheme:m=a?"system":"light",attribute:w="data-theme",value:g,children:v,nonce:b}=e,[S,E]=i.useState(()=>d(l,m)),[_,O]=i.useState(()=>d(l)),T=g?Object.values(g):p,C=i.useCallback(e=>{let t=e;if(!t)return;"system"===e&&a&&(t=y());let i=g?g[t]:t,s=n?f():null,o=document.documentElement;if("class"===w?(o.classList.remove(...T),i&&o.classList.add(i)):i?o.setAttribute(w,i):o.removeAttribute(w),c){let e=r.includes(m)?m:null,n=r.includes(t)?t:e;o.style.colorScheme=n}null==s||s()},[]),A=i.useCallback(e=>{let t="function"==typeof e?e(e):e;E(t);try{localStorage.setItem(l,t)}catch(e){}},[t]),M=i.useCallback(e=>{O(y(e)),"system"===S&&a&&!t&&C("system")},[S,t]);i.useEffect(()=>{let e=window.matchMedia(s);return e.addListener(M),M(e),()=>e.removeListener(M)},[M]),i.useEffect(()=>{let e=e=>{e.key===l&&A(e.newValue||m)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[A]),i.useEffect(()=>{C(null!=t?t:S)},[t,S]);let R=i.useMemo(()=>({theme:S,setTheme:A,forcedTheme:t,resolvedTheme:"system"===S?_:S,themes:a?[...p,"system"]:p,systemTheme:a?_:void 0}),[S,A,t,_,a,p]);return i.createElement(o.Provider,{value:R},i.createElement(h,{forcedTheme:t,disableTransitionOnChange:n,enableSystem:a,enableColorScheme:c,storageKey:l,themes:p,defaultTheme:m,attribute:w,value:g,children:v,attrs:T,nonce:b}),v)},h=i.memo(e=>{let{forcedTheme:t,storageKey:n,attribute:a,enableSystem:o,enableColorScheme:c,defaultTheme:u,value:l,attrs:h,nonce:d}=e,f="system"===u,y="class"===a?"var d=document.documentElement,c=d.classList;".concat("c.remove(".concat(h.map(e=>"'".concat(e,"'")).join(","),")"),";"):"var d=document.documentElement,n='".concat(a,"',s='setAttribute';"),p=c?(r.includes(u)?u:null)?"if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'".concat(u,"'"):"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=l?l[e]:e,s=t?e+"|| ''":"'".concat(i,"'"),o="";return c&&n&&!t&&r.includes(e)&&(o+="d.style.colorScheme = '".concat(e,"';")),"class"===a?t||i?o+="c.add(".concat(s,")"):o+="null":i&&(o+="d[s](n,".concat(s,")")),o},w=t?"!function(){".concat(y).concat(m(t),"}()"):o?"!function(){try{".concat(y,"var e=localStorage.getItem('").concat(n,"');if('system'===e||(!e&&").concat(f,")){var t='").concat(s,"',m=window.matchMedia(t);if(m.media!==t||m.matches){").concat(m("dark"),"}else{").concat(m("light"),"}}else if(e){").concat(l?"var x=".concat(JSON.stringify(l),";"):"").concat(m(l?"x[e]":"e",!0),"}").concat(f?"":"else{"+m(u,!1,!1)+"}").concat(p,"}catch(e){}}()"):"!function(){try{".concat(y,"var e=localStorage.getItem('").concat(n,"');if(e){").concat(l?"var x=".concat(JSON.stringify(l),";"):"").concat(m(l?"x[e]":"e",!0),"}else{").concat(m(u,!1,!1),";}").concat(p,"}catch(t){}}();");return i.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:w}})}),d=(e,t)=>{let n;if(!a){try{n=localStorage.getItem(e)||void 0}catch(e){}return n||t}},f=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},y=e=>(e||(e=window.matchMedia(s)),e.matches?"dark":"light")}}]);