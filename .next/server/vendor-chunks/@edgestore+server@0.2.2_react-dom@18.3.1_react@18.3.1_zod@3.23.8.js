"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8";
exports.ids = ["vendor-chunks/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/adapters/next/app/index.mjs":
/*!*************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/adapters/next/app/index.mjs ***!
  \*************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEdgeStoreNextHandler: () => (/* binding */ createEdgeStoreNextHandler)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/.pnpm/@edgestore+shared@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/shared/dist/index.mjs\");\n/* harmony import */ var _utils_f6f56d38_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils-f6f56d38.mjs */ \"(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/utils-f6f56d38.mjs\");\n/* harmony import */ var _providers_edgestore_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../providers/edgestore/index.mjs */ \"(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/providers/edgestore/index.mjs\");\n/* harmony import */ var _shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared-039276af.mjs */ \"(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/shared-039276af.mjs\");\n/* harmony import */ var _index_28efdacf_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../index-28efdacf.mjs */ \"(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/index-28efdacf.mjs\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! cookie */ \"(rsc)/./node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js\");\n\n\n\n\n\n\n\n\n\n\nfunction createEdgeStoreNextHandler(config) {\n    const { provider = (0,_providers_edgestore_index_mjs__WEBPACK_IMPORTED_MODULE_2__.EdgeStoreProvider)() } = config;\n    const log = new _utils_f6f56d38_mjs__WEBPACK_IMPORTED_MODULE_1__.L(config.logLevel);\n    globalThis._EDGE_STORE_LOGGER = log;\n    log.debug('Creating Edge Store Next handler (app adapter)');\n    return async (req)=>{\n        try {\n            if (!('nextUrl' in req)) throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: 'Error running the app adapter. Make sure you are importing the correct adapter in your router configuration',\n                code: 'SERVER_ERROR'\n            });\n            const pathname = req.nextUrl.pathname;\n            if ((0,_utils_f6f56d38_mjs__WEBPACK_IMPORTED_MODULE_1__.m)(pathname, '/health')) {\n                return new Response('OK', {\n                    status: 200\n                });\n            } else if ((0,_utils_f6f56d38_mjs__WEBPACK_IMPORTED_MODULE_1__.m)(pathname, '/init')) {\n                let ctx = {};\n                try {\n                    ctx = 'createContext' in config ? await config.createContext({\n                        req\n                    }) : {};\n                } catch (err) {\n                    throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                        message: 'Error creating context',\n                        code: 'CREATE_CONTEXT_ERROR',\n                        cause: err instanceof Error ? err : undefined\n                    });\n                }\n                const { newCookies, token, baseUrl } = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.i)({\n                    ctx,\n                    provider,\n                    router: config.router\n                });\n                const res = new Response(JSON.stringify({\n                    token,\n                    baseUrl\n                }), {\n                    status: 200,\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                });\n                for (const cookie of newCookies){\n                    res.headers.append('Set-Cookie', cookie);\n                }\n                return res;\n            } else if ((0,_utils_f6f56d38_mjs__WEBPACK_IMPORTED_MODULE_1__.m)(pathname, '/request-upload')) {\n                const res = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.r)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get('edgestore-ctx')?.value\n                });\n                return new Response(JSON.stringify(res), {\n                    status: 200,\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                });\n            } else if ((0,_utils_f6f56d38_mjs__WEBPACK_IMPORTED_MODULE_1__.m)(pathname, '/request-upload-parts')) {\n                const res = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.a)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get('edgestore-ctx')?.value\n                });\n                return new Response(JSON.stringify(res), {\n                    status: 200,\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                });\n            } else if ((0,_utils_f6f56d38_mjs__WEBPACK_IMPORTED_MODULE_1__.m)(pathname, '/complete-multipart-upload')) {\n                await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.c)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get('edgestore-ctx')?.value\n                });\n                return new Response(null, {\n                    status: 200\n                });\n            } else if ((0,_utils_f6f56d38_mjs__WEBPACK_IMPORTED_MODULE_1__.m)(pathname, '/confirm-upload')) {\n                const res = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.d)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get('edgestore-ctx')?.value\n                });\n                return new Response(JSON.stringify(res), {\n                    status: 200,\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                });\n            } else if ((0,_utils_f6f56d38_mjs__WEBPACK_IMPORTED_MODULE_1__.m)(pathname, '/delete-file')) {\n                const res = await (0,_shared_039276af_mjs__WEBPACK_IMPORTED_MODULE_3__.e)({\n                    provider,\n                    router: config.router,\n                    body: await req.json(),\n                    ctxToken: req.cookies.get('edgestore-ctx')?.value\n                });\n                return new Response(JSON.stringify(res), {\n                    status: 200,\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                });\n            } else if ((0,_utils_f6f56d38_mjs__WEBPACK_IMPORTED_MODULE_1__.m)(pathname, '/proxy-file')) {\n                const url = req.nextUrl.searchParams.get('url');\n                if (typeof url === 'string') {\n                    const proxyRes = await fetch(url, {\n                        headers: {\n                            cookie: req.cookies.toString() ?? ''\n                        }\n                    });\n                    const data = await proxyRes.arrayBuffer();\n                    return new Response(data, {\n                        status: proxyRes.status,\n                        headers: {\n                            'Content-Type': proxyRes.headers.get('Content-Type') ?? 'application/octet-stream'\n                        }\n                    });\n                } else {\n                    return new Response(null, {\n                        status: 400\n                    });\n                }\n            } else {\n                return new Response(null, {\n                    status: 404\n                });\n            }\n        } catch (err) {\n            if (err instanceof _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError) {\n                log[err.level](err.formattedMessage());\n                if (err.cause) log[err.level](err.cause);\n                return new Response(JSON.stringify(err.formattedJson()), {\n                    status: _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EDGE_STORE_ERROR_CODES[err.code],\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                });\n            }\n            log.error(err);\n            return new Response(JSON.stringify(new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: 'Internal server error',\n                code: 'SERVER_ERROR'\n            }).formattedJson()), {\n                status: 500,\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n        }\n    };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStzZXJ2ZXJAMC4yLjJfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfem9kQDMuMjMuOC9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9hZGFwdGVycy9uZXh0L2FwcC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEyRTtBQUNEO0FBQ0M7QUFDOEY7QUFDcEk7QUFDaEI7QUFDTDtBQUNGO0FBQ0E7O0FBRWQ7QUFDQSxZQUFZLFdBQVcsaUZBQWlCLEtBQUs7QUFDN0Msb0JBQW9CLGtEQUFNO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDZEQUFjO0FBQzdEO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxnQkFBZ0Isc0RBQVM7QUFDekI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixjQUFjLFNBQVMsc0RBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsa0JBQWtCO0FBQ2xCLDhCQUE4Qiw2REFBYztBQUM1QztBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSx3QkFBd0IsNkJBQTZCLFFBQVEsdURBQUk7QUFDakU7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsU0FBUyxzREFBUztBQUNoQyxrQ0FBa0MsdURBQWE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixjQUFjLFNBQVMsc0RBQVM7QUFDaEMsa0NBQWtDLHVEQUFrQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGNBQWMsU0FBUyxzREFBUztBQUNoQyxzQkFBc0IsdURBQXVCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsY0FBYyxTQUFTLHNEQUFTO0FBQ2hDLGtDQUFrQyx1REFBYTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGNBQWMsU0FBUyxzREFBUztBQUNoQyxrQ0FBa0MsdURBQVU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixjQUFjLFNBQVMsc0RBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsVUFBVTtBQUNWLCtCQUErQiw2REFBYztBQUM3QztBQUNBO0FBQ0E7QUFDQSw0QkFBNEIscUVBQXNCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsbURBQW1ELDZEQUFjO0FBQ2pFO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVzQyIsInNvdXJjZXMiOlsid2VicGFjazovL2JsaW5rLWUtY29tbWVyY2UvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStzZXJ2ZXJAMC4yLjJfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfem9kQDMuMjMuOC9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9hZGFwdGVycy9uZXh0L2FwcC9pbmRleC5tanM/ZGI1OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFZGdlU3RvcmVFcnJvciwgRURHRV9TVE9SRV9FUlJPUl9DT0RFUyB9IGZyb20gJ0BlZGdlc3RvcmUvc2hhcmVkJztcbmltcG9ydCB7IEwgYXMgTG9nZ2VyLCBtIGFzIG1hdGNoUGF0aCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzLWY2ZjU2ZDM4Lm1qcyc7XG5pbXBvcnQgeyBFZGdlU3RvcmVQcm92aWRlciB9IGZyb20gJy4uLy4uLy4uL3Byb3ZpZGVycy9lZGdlc3RvcmUvaW5kZXgubWpzJztcbmltcG9ydCB7IGkgYXMgaW5pdCwgciBhcyByZXF1ZXN0VXBsb2FkLCBhIGFzIHJlcXVlc3RVcGxvYWRQYXJ0cywgYyBhcyBjb21wbGV0ZU11bHRpcGFydFVwbG9hZCwgZCBhcyBjb25maXJtVXBsb2FkLCBlIGFzIGRlbGV0ZUZpbGUgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQtMDM5Mjc2YWYubWpzJztcbmltcG9ydCAnLi4vLi4vLi4vaW5kZXgtMjhlZmRhY2YubWpzJztcbmltcG9ydCAnQHBhbnZhL2hrZGYnO1xuaW1wb3J0ICdjb29raWUnO1xuaW1wb3J0ICdqb3NlJztcbmltcG9ydCAndXVpZCc7XG5cbmZ1bmN0aW9uIGNyZWF0ZUVkZ2VTdG9yZU5leHRIYW5kbGVyKGNvbmZpZykge1xuICAgIGNvbnN0IHsgcHJvdmlkZXIgPSBFZGdlU3RvcmVQcm92aWRlcigpIH0gPSBjb25maWc7XG4gICAgY29uc3QgbG9nID0gbmV3IExvZ2dlcihjb25maWcubG9nTGV2ZWwpO1xuICAgIGdsb2JhbFRoaXMuX0VER0VfU1RPUkVfTE9HR0VSID0gbG9nO1xuICAgIGxvZy5kZWJ1ZygnQ3JlYXRpbmcgRWRnZSBTdG9yZSBOZXh0IGhhbmRsZXIgKGFwcCBhZGFwdGVyKScpO1xuICAgIHJldHVybiBhc3luYyAocmVxKT0+e1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCEoJ25leHRVcmwnIGluIHJlcSkpIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdGhlIGFwcCBhZGFwdGVyLiBNYWtlIHN1cmUgeW91IGFyZSBpbXBvcnRpbmcgdGhlIGNvcnJlY3QgYWRhcHRlciBpbiB5b3VyIHJvdXRlciBjb25maWd1cmF0aW9uJyxcbiAgICAgICAgICAgICAgICBjb2RlOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBwYXRobmFtZSA9IHJlcS5uZXh0VXJsLnBhdGhuYW1lO1xuICAgICAgICAgICAgaWYgKG1hdGNoUGF0aChwYXRobmFtZSwgJy9oZWFsdGgnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoJ09LJywge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYXRjaFBhdGgocGF0aG5hbWUsICcvaW5pdCcpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGN0eCA9IHt9O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9ICdjcmVhdGVDb250ZXh0JyBpbiBjb25maWcgPyBhd2FpdCBjb25maWcuY3JlYXRlQ29udGV4dCh7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXFcbiAgICAgICAgICAgICAgICAgICAgfSkgOiB7fTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBjcmVhdGluZyBjb250ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICdDUkVBVEVfQ09OVEVYVF9FUlJPUicsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXVzZTogZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHsgbmV3Q29va2llcywgdG9rZW4sIGJhc2VVcmwgfSA9IGF3YWl0IGluaXQoe1xuICAgICAgICAgICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZXI6IGNvbmZpZy5yb3V0ZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgICAgICAgICAgYmFzZVVybFxuICAgICAgICAgICAgICAgIH0pLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvb2tpZSBvZiBuZXdDb29raWVzKXtcbiAgICAgICAgICAgICAgICAgICAgcmVzLmhlYWRlcnMuYXBwZW5kKCdTZXQtQ29va2llJywgY29va2llKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hQYXRoKHBhdGhuYW1lLCAnL3JlcXVlc3QtdXBsb2FkJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCByZXF1ZXN0VXBsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlcjogY29uZmlnLnJvdXRlcixcbiAgICAgICAgICAgICAgICAgICAgYm9keTogYXdhaXQgcmVxLmpzb24oKSxcbiAgICAgICAgICAgICAgICAgICAgY3R4VG9rZW46IHJlcS5jb29raWVzLmdldCgnZWRnZXN0b3JlLWN0eCcpPy52YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkocmVzKSwge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoUGF0aChwYXRobmFtZSwgJy9yZXF1ZXN0LXVwbG9hZC1wYXJ0cycpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVxdWVzdFVwbG9hZFBhcnRzKHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlcjogY29uZmlnLnJvdXRlcixcbiAgICAgICAgICAgICAgICAgICAgYm9keTogYXdhaXQgcmVxLmpzb24oKSxcbiAgICAgICAgICAgICAgICAgICAgY3R4VG9rZW46IHJlcS5jb29raWVzLmdldCgnZWRnZXN0b3JlLWN0eCcpPy52YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkocmVzKSwge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoUGF0aChwYXRobmFtZSwgJy9jb21wbGV0ZS1tdWx0aXBhcnQtdXBsb2FkJykpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjb21wbGV0ZU11bHRpcGFydFVwbG9hZCh7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZXI6IGNvbmZpZy5yb3V0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IGF3YWl0IHJlcS5qc29uKCksXG4gICAgICAgICAgICAgICAgICAgIGN0eFRva2VuOiByZXEuY29va2llcy5nZXQoJ2VkZ2VzdG9yZS1jdHgnKT8udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyMDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hQYXRoKHBhdGhuYW1lLCAnL2NvbmZpcm0tdXBsb2FkJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBjb25maXJtVXBsb2FkKHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgICAgICAgICAgICAgIHJvdXRlcjogY29uZmlnLnJvdXRlcixcbiAgICAgICAgICAgICAgICAgICAgYm9keTogYXdhaXQgcmVxLmpzb24oKSxcbiAgICAgICAgICAgICAgICAgICAgY3R4VG9rZW46IHJlcS5jb29raWVzLmdldCgnZWRnZXN0b3JlLWN0eCcpPy52YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkocmVzKSwge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoUGF0aChwYXRobmFtZSwgJy9kZWxldGUtZmlsZScpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZGVsZXRlRmlsZSh7XG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgICAgICByb3V0ZXI6IGNvbmZpZy5yb3V0ZXIsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IGF3YWl0IHJlcS5qc29uKCksXG4gICAgICAgICAgICAgICAgICAgIGN0eFRva2VuOiByZXEuY29va2llcy5nZXQoJ2VkZ2VzdG9yZS1jdHgnKT8udmFsdWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHJlcyksIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYXRjaFBhdGgocGF0aG5hbWUsICcvcHJveHktZmlsZScpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gcmVxLm5leHRVcmwuc2VhcmNoUGFyYW1zLmdldCgndXJsJyk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3h5UmVzID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29va2llOiByZXEuY29va2llcy50b1N0cmluZygpID8/ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcHJveHlSZXMuYXJyYXlCdWZmZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShkYXRhLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHByb3h5UmVzLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogcHJveHlSZXMuaGVhZGVycy5nZXQoJ0NvbnRlbnQtVHlwZScpID8/ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiA0MDBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiA0MDRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRWRnZVN0b3JlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dbZXJyLmxldmVsXShlcnIuZm9ybWF0dGVkTWVzc2FnZSgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyLmNhdXNlKSBsb2dbZXJyLmxldmVsXShlcnIuY2F1c2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoZXJyLmZvcm1hdHRlZEpzb24oKSksIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBFREdFX1NUT1JFX0VSUk9SX0NPREVTW2Vyci5jb2RlXSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2cuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkobmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICAgICAgICAgICAgICBjb2RlOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgICAgICAgfSkuZm9ybWF0dGVkSnNvbigpKSwge1xuICAgICAgICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgY3JlYXRlRWRnZVN0b3JlTmV4dEhhbmRsZXIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/adapters/next/app/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/index-28efdacf.mjs":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/index-28efdacf.mjs ***!
  \****************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   E: () => (/* binding */ EdgeStoreCredentialsError),\n/* harmony export */   e: () => (/* binding */ edgeStoreRawSdk),\n/* harmony export */   i: () => (/* binding */ initEdgeStoreSdk)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/.pnpm/@edgestore+shared@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/shared/dist/index.mjs\");\n\n\nconst DEFAULT_MESSAGE = `Missing EDGE_STORE_ACCESS_KEY or EDGE_STORE_SECRET_KEY. \nThis can happen if you are trying to import something related to the backend of Edge Store in a client component.`;\nclass EdgeStoreCredentialsError extends Error {\n    constructor(message = DEFAULT_MESSAGE){\n        super(message);\n        this.name = 'EdgeStoreCredentialsError';\n    }\n}\n\nconst API_ENDPOINT = process.env.EDGE_STORE_API_ENDPOINT ?? 'https://api.edgestore.dev';\nasync function makeRequest(params) {\n    const { body, accessKey, secretKey, path } = params;\n    const res = await fetch(`${API_ENDPOINT}${path}`, {\n        method: 'POST',\n        body: JSON.stringify(body),\n        headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Basic ${Buffer.from(`${accessKey}:${secretKey}`).toString('base64')}`\n        }\n    });\n    if (!res.ok) {\n        throw new Error(`Failed to make request to ${path}: ${await res.text()}`);\n    }\n    return await res.json();\n}\nconst edgeStoreRawSdk = {\n    async getToken (params) {\n        const reqBuckets = Object.entries(params.router.buckets).reduce((acc, [bucketName, bucket])=>{\n            acc[bucketName] = {\n                path: bucket._def.path.map((p)=>{\n                    const paramEntries = Object.entries(p);\n                    if (paramEntries[0] === undefined) {\n                        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                            message: `Empty path param found in: ${JSON.stringify(bucket._def.path)}`,\n                            code: 'SERVER_ERROR'\n                        });\n                    }\n                    const [key, value] = paramEntries[0];\n                    return {\n                        key,\n                        value: value()\n                    };\n                }),\n                accessControl: bucket._def.accessControl\n            };\n            return acc;\n        }, {});\n        const { token } = await makeRequest({\n            body: {\n                ctx: params.ctx,\n                buckets: reqBuckets\n            },\n            accessKey: params.accessKey,\n            secretKey: params.secretKey,\n            path: '/get-token'\n        });\n        return token;\n    },\n    async getFile ({ accessKey, secretKey, url }) {\n        return await makeRequest({\n            path: '/get-file',\n            accessKey,\n            secretKey,\n            body: {\n                url\n            }\n        });\n    },\n    async requestUpload ({ accessKey, secretKey, bucketName, bucketType, fileInfo, multipart }) {\n        const res = await makeRequest({\n            path: '/request-upload',\n            accessKey,\n            secretKey,\n            body: {\n                multipart,\n                bucketName,\n                bucketType,\n                isPublic: fileInfo.isPublic,\n                path: fileInfo.path,\n                extension: fileInfo.extension,\n                size: fileInfo.size,\n                mimeType: fileInfo.type,\n                metadata: fileInfo.metadata,\n                fileName: fileInfo.fileName,\n                replaceTargetUrl: fileInfo.replaceTargetUrl,\n                isTemporary: fileInfo.temporary\n            }\n        });\n        return {\n            multipart: res.multipart,\n            signedUrl: res.signedUrl,\n            accessUrl: res.url,\n            path: res.path,\n            thumbnailUrl: res.thumbnailUrl\n        };\n    },\n    async requestUploadParts ({ accessKey, secretKey, key, multipart }) {\n        const res = await makeRequest({\n            path: '/request-upload-parts',\n            accessKey,\n            secretKey,\n            body: {\n                multipart,\n                key\n            }\n        });\n        return {\n            multipart: res.multipart\n        };\n    },\n    async completeMultipartUpload ({ accessKey, secretKey, uploadId, key, parts }) {\n        return await makeRequest({\n            path: '/complete-multipart-upload',\n            accessKey,\n            secretKey,\n            body: {\n                uploadId,\n                key,\n                parts\n            }\n        });\n    },\n    async confirmUpload ({ accessKey, secretKey, url }) {\n        return await makeRequest({\n            path: '/confirm-upload',\n            accessKey,\n            secretKey,\n            body: {\n                url\n            }\n        });\n    },\n    async deleteFile ({ accessKey, secretKey, url }) {\n        return await makeRequest({\n            path: '/delete-file',\n            accessKey,\n            secretKey,\n            body: {\n                url\n            }\n        });\n    },\n    async listFiles ({ accessKey, secretKey, bucketName, filter, pagination }) {\n        return await makeRequest({\n            path: '/list-files',\n            accessKey,\n            secretKey,\n            body: {\n                bucketName,\n                filter,\n                pagination\n            }\n        });\n    }\n};\nfunction initEdgeStoreSdk(params) {\n    const { accessKey = process.env.EDGE_STORE_ACCESS_KEY, secretKey = process.env.EDGE_STORE_SECRET_KEY } = params ?? {};\n    if (!accessKey || !secretKey) {\n        throw new EdgeStoreCredentialsError();\n    }\n    return {\n        async getToken (params) {\n            return await edgeStoreRawSdk.getToken({\n                accessKey,\n                secretKey,\n                ctx: params.ctx,\n                router: params.router\n            });\n        },\n        async getFile ({ url }) {\n            return await edgeStoreRawSdk.getFile({\n                accessKey,\n                secretKey,\n                url\n            });\n        },\n        async requestUpload ({ bucketName, bucketType, fileInfo, multipart }) {\n            return await edgeStoreRawSdk.requestUpload({\n                accessKey,\n                secretKey,\n                bucketName,\n                bucketType,\n                fileInfo,\n                multipart\n            });\n        },\n        async requestUploadParts ({ key, multipart }) {\n            return await edgeStoreRawSdk.requestUploadParts({\n                accessKey,\n                secretKey,\n                key,\n                multipart\n            });\n        },\n        async completeMultipartUpload ({ uploadId, key, parts }) {\n            return await edgeStoreRawSdk.completeMultipartUpload({\n                accessKey,\n                secretKey,\n                uploadId,\n                key,\n                parts\n            });\n        },\n        async confirmUpload ({ url }) {\n            return await edgeStoreRawSdk.confirmUpload({\n                accessKey,\n                secretKey,\n                url\n            });\n        },\n        async deleteFile ({ url }) {\n            return await edgeStoreRawSdk.deleteFile({\n                accessKey,\n                secretKey,\n                url\n            });\n        },\n        async listFiles (params) {\n            return await edgeStoreRawSdk.listFiles({\n                accessKey,\n                secretKey,\n                ...params\n            });\n        }\n    };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStzZXJ2ZXJAMC4yLjJfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfem9kQDMuMjMuOC9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9pbmRleC0yOGVmZGFjZi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFtRDs7QUFFbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsWUFBWSxtQ0FBbUM7QUFDL0MsK0JBQStCLGFBQWEsRUFBRSxLQUFLO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGVBQWUsVUFBVSxHQUFHLFVBQVUsc0JBQXNCO0FBQ2hHO0FBQ0EsS0FBSztBQUNMO0FBQ0EscURBQXFELEtBQUssSUFBSSxpQkFBaUI7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsNkRBQWM7QUFDaEQsbUVBQW1FLGlDQUFpQztBQUNwRztBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsU0FBUyxJQUFJO0FBQ2IsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTCxxQkFBcUIsMkJBQTJCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTCwyQkFBMkIsbUVBQW1FO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxnQ0FBZ0Msc0NBQXNDO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHFDQUFxQyw0Q0FBNEM7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTCwyQkFBMkIsMkJBQTJCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTCx3QkFBd0IsMkJBQTJCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTCx1QkFBdUIsc0RBQXNEO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtGQUErRjtBQUMzRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QseUJBQXlCLEtBQUs7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULCtCQUErQiw2Q0FBNkM7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULG9DQUFvQyxnQkFBZ0I7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1QseUNBQXlDLHNCQUFzQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULCtCQUErQixLQUFLO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCw0QkFBNEIsS0FBSztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRXVGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmxpbmstZS1jb21tZXJjZS8uL25vZGVfbW9kdWxlcy8ucG5wbS9AZWRnZXN0b3JlK3NlcnZlckAwLjIuMl9yZWFjdC1kb21AMTguMy4xX3JlYWN0QDE4LjMuMV96b2RAMy4yMy44L25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NlcnZlci9kaXN0L2luZGV4LTI4ZWZkYWNmLm1qcz9iN2IwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVkZ2VTdG9yZUVycm9yIH0gZnJvbSAnQGVkZ2VzdG9yZS9zaGFyZWQnO1xuXG5jb25zdCBERUZBVUxUX01FU1NBR0UgPSBgTWlzc2luZyBFREdFX1NUT1JFX0FDQ0VTU19LRVkgb3IgRURHRV9TVE9SRV9TRUNSRVRfS0VZLiBcblRoaXMgY2FuIGhhcHBlbiBpZiB5b3UgYXJlIHRyeWluZyB0byBpbXBvcnQgc29tZXRoaW5nIHJlbGF0ZWQgdG8gdGhlIGJhY2tlbmQgb2YgRWRnZSBTdG9yZSBpbiBhIGNsaWVudCBjb21wb25lbnQuYDtcbmNsYXNzIEVkZ2VTdG9yZUNyZWRlbnRpYWxzRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSA9IERFRkFVTFRfTUVTU0FHRSl7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSAnRWRnZVN0b3JlQ3JlZGVudGlhbHNFcnJvcic7XG4gICAgfVxufVxuXG5jb25zdCBBUElfRU5EUE9JTlQgPSBwcm9jZXNzLmVudi5FREdFX1NUT1JFX0FQSV9FTkRQT0lOVCA/PyAnaHR0cHM6Ly9hcGkuZWRnZXN0b3JlLmRldic7XG5hc3luYyBmdW5jdGlvbiBtYWtlUmVxdWVzdChwYXJhbXMpIHtcbiAgICBjb25zdCB7IGJvZHksIGFjY2Vzc0tleSwgc2VjcmV0S2V5LCBwYXRoIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7QVBJX0VORFBPSU5UfSR7cGF0aH1gLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCYXNpYyAke0J1ZmZlci5mcm9tKGAke2FjY2Vzc0tleX06JHtzZWNyZXRLZXl9YCkudG9TdHJpbmcoJ2Jhc2U2NCcpfWBcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIG1ha2UgcmVxdWVzdCB0byAke3BhdGh9OiAke2F3YWl0IHJlcy50ZXh0KCl9YCk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCByZXMuanNvbigpO1xufVxuY29uc3QgZWRnZVN0b3JlUmF3U2RrID0ge1xuICAgIGFzeW5jIGdldFRva2VuIChwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVxQnVja2V0cyA9IE9iamVjdC5lbnRyaWVzKHBhcmFtcy5yb3V0ZXIuYnVja2V0cykucmVkdWNlKChhY2MsIFtidWNrZXROYW1lLCBidWNrZXRdKT0+e1xuICAgICAgICAgICAgYWNjW2J1Y2tldE5hbWVdID0ge1xuICAgICAgICAgICAgICAgIHBhdGg6IGJ1Y2tldC5fZGVmLnBhdGgubWFwKChwKT0+e1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbUVudHJpZXMgPSBPYmplY3QuZW50cmllcyhwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtRW50cmllc1swXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBFbXB0eSBwYXRoIHBhcmFtIGZvdW5kIGluOiAke0pTT04uc3RyaW5naWZ5KGJ1Y2tldC5fZGVmLnBhdGgpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogJ1NFUlZFUl9FUlJPUidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHBhcmFtRW50cmllc1swXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSgpXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgYWNjZXNzQ29udHJvbDogYnVja2V0Ll9kZWYuYWNjZXNzQ29udHJvbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgY29uc3QgeyB0b2tlbiB9ID0gYXdhaXQgbWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIGN0eDogcGFyYW1zLmN0eCxcbiAgICAgICAgICAgICAgICBidWNrZXRzOiByZXFCdWNrZXRzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWNjZXNzS2V5OiBwYXJhbXMuYWNjZXNzS2V5LFxuICAgICAgICAgICAgc2VjcmV0S2V5OiBwYXJhbXMuc2VjcmV0S2V5LFxuICAgICAgICAgICAgcGF0aDogJy9nZXQtdG9rZW4nXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgfSxcbiAgICBhc3luYyBnZXRGaWxlICh7IGFjY2Vzc0tleSwgc2VjcmV0S2V5LCB1cmwgfSkge1xuICAgICAgICByZXR1cm4gYXdhaXQgbWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgcGF0aDogJy9nZXQtZmlsZScsXG4gICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgdXJsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgcmVxdWVzdFVwbG9hZCAoeyBhY2Nlc3NLZXksIHNlY3JldEtleSwgYnVja2V0TmFtZSwgYnVja2V0VHlwZSwgZmlsZUluZm8sIG11bHRpcGFydCB9KSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IG1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgIHBhdGg6ICcvcmVxdWVzdC11cGxvYWQnLFxuICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIG11bHRpcGFydCxcbiAgICAgICAgICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICAgICAgICAgIGJ1Y2tldFR5cGUsXG4gICAgICAgICAgICAgICAgaXNQdWJsaWM6IGZpbGVJbmZvLmlzUHVibGljLFxuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGVJbmZvLnBhdGgsXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uOiBmaWxlSW5mby5leHRlbnNpb24sXG4gICAgICAgICAgICAgICAgc2l6ZTogZmlsZUluZm8uc2l6ZSxcbiAgICAgICAgICAgICAgICBtaW1lVHlwZTogZmlsZUluZm8udHlwZSxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogZmlsZUluZm8ubWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6IGZpbGVJbmZvLmZpbGVOYW1lLFxuICAgICAgICAgICAgICAgIHJlcGxhY2VUYXJnZXRVcmw6IGZpbGVJbmZvLnJlcGxhY2VUYXJnZXRVcmwsXG4gICAgICAgICAgICAgICAgaXNUZW1wb3Jhcnk6IGZpbGVJbmZvLnRlbXBvcmFyeVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG11bHRpcGFydDogcmVzLm11bHRpcGFydCxcbiAgICAgICAgICAgIHNpZ25lZFVybDogcmVzLnNpZ25lZFVybCxcbiAgICAgICAgICAgIGFjY2Vzc1VybDogcmVzLnVybCxcbiAgICAgICAgICAgIHBhdGg6IHJlcy5wYXRoLFxuICAgICAgICAgICAgdGh1bWJuYWlsVXJsOiByZXMudGh1bWJuYWlsVXJsXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBhc3luYyByZXF1ZXN0VXBsb2FkUGFydHMgKHsgYWNjZXNzS2V5LCBzZWNyZXRLZXksIGtleSwgbXVsdGlwYXJ0IH0pIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgbWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgcGF0aDogJy9yZXF1ZXN0LXVwbG9hZC1wYXJ0cycsXG4gICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgbXVsdGlwYXJ0LFxuICAgICAgICAgICAgICAgIGtleVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG11bHRpcGFydDogcmVzLm11bHRpcGFydFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgYXN5bmMgY29tcGxldGVNdWx0aXBhcnRVcGxvYWQgKHsgYWNjZXNzS2V5LCBzZWNyZXRLZXksIHVwbG9hZElkLCBrZXksIHBhcnRzIH0pIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IG1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgIHBhdGg6ICcvY29tcGxldGUtbXVsdGlwYXJ0LXVwbG9hZCcsXG4gICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgdXBsb2FkSWQsXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHBhcnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgY29uZmlybVVwbG9hZCAoeyBhY2Nlc3NLZXksIHNlY3JldEtleSwgdXJsIH0pIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IG1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgIHBhdGg6ICcvY29uZmlybS11cGxvYWQnLFxuICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGRlbGV0ZUZpbGUgKHsgYWNjZXNzS2V5LCBzZWNyZXRLZXksIHVybCB9KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBtYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICBwYXRoOiAnL2RlbGV0ZS1maWxlJyxcbiAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICB1cmxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBsaXN0RmlsZXMgKHsgYWNjZXNzS2V5LCBzZWNyZXRLZXksIGJ1Y2tldE5hbWUsIGZpbHRlciwgcGFnaW5hdGlvbiB9KSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBtYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICBwYXRoOiAnL2xpc3QtZmlsZXMnLFxuICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICAgICAgZmlsdGVyLFxuICAgICAgICAgICAgICAgIHBhZ2luYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufTtcbmZ1bmN0aW9uIGluaXRFZGdlU3RvcmVTZGsocGFyYW1zKSB7XG4gICAgY29uc3QgeyBhY2Nlc3NLZXkgPSBwcm9jZXNzLmVudi5FREdFX1NUT1JFX0FDQ0VTU19LRVksIHNlY3JldEtleSA9IHByb2Nlc3MuZW52LkVER0VfU1RPUkVfU0VDUkVUX0tFWSB9ID0gcGFyYW1zID8/IHt9O1xuICAgIGlmICghYWNjZXNzS2V5IHx8ICFzZWNyZXRLZXkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUNyZWRlbnRpYWxzRXJyb3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXN5bmMgZ2V0VG9rZW4gKHBhcmFtcykge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGVkZ2VTdG9yZVJhd1Nkay5nZXRUb2tlbih7XG4gICAgICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgICAgICBjdHg6IHBhcmFtcy5jdHgsXG4gICAgICAgICAgICAgICAgcm91dGVyOiBwYXJhbXMucm91dGVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZ2V0RmlsZSAoeyB1cmwgfSkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGVkZ2VTdG9yZVJhd1Nkay5nZXRGaWxlKHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHJlcXVlc3RVcGxvYWQgKHsgYnVja2V0TmFtZSwgYnVja2V0VHlwZSwgZmlsZUluZm8sIG11bHRpcGFydCB9KSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZWRnZVN0b3JlUmF3U2RrLnJlcXVlc3RVcGxvYWQoe1xuICAgICAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgICAgICAgICBidWNrZXRUeXBlLFxuICAgICAgICAgICAgICAgIGZpbGVJbmZvLFxuICAgICAgICAgICAgICAgIG11bHRpcGFydFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIHJlcXVlc3RVcGxvYWRQYXJ0cyAoeyBrZXksIG11bHRpcGFydCB9KSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZWRnZVN0b3JlUmF3U2RrLnJlcXVlc3RVcGxvYWRQYXJ0cyh7XG4gICAgICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgbXVsdGlwYXJ0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgY29tcGxldGVNdWx0aXBhcnRVcGxvYWQgKHsgdXBsb2FkSWQsIGtleSwgcGFydHMgfSkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGVkZ2VTdG9yZVJhd1Nkay5jb21wbGV0ZU11bHRpcGFydFVwbG9hZCh7XG4gICAgICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgICAgICB1cGxvYWRJZCxcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgcGFydHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBjb25maXJtVXBsb2FkICh7IHVybCB9KSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZWRnZVN0b3JlUmF3U2RrLmNvbmZpcm1VcGxvYWQoe1xuICAgICAgICAgICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgICAgICAgICBzZWNyZXRLZXksXG4gICAgICAgICAgICAgICAgdXJsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgZGVsZXRlRmlsZSAoeyB1cmwgfSkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGVkZ2VTdG9yZVJhd1Nkay5kZWxldGVGaWxlKHtcbiAgICAgICAgICAgICAgICBhY2Nlc3NLZXksXG4gICAgICAgICAgICAgICAgc2VjcmV0S2V5LFxuICAgICAgICAgICAgICAgIHVybFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGxpc3RGaWxlcyAocGFyYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgZWRnZVN0b3JlUmF3U2RrLmxpc3RGaWxlcyh7XG4gICAgICAgICAgICAgICAgYWNjZXNzS2V5LFxuICAgICAgICAgICAgICAgIHNlY3JldEtleSxcbiAgICAgICAgICAgICAgICAuLi5wYXJhbXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgRWRnZVN0b3JlQ3JlZGVudGlhbHNFcnJvciBhcyBFLCBlZGdlU3RvcmVSYXdTZGsgYXMgZSwgaW5pdEVkZ2VTdG9yZVNkayBhcyBpIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/index-28efdacf.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/index.mjs":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/index.mjs ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initEdgeStore: () => (/* reexport safe */ _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.initEdgeStore)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/.pnpm/@edgestore+shared@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/shared/dist/index.mjs\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStzZXJ2ZXJAMC4yLjJfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfem9kQDMuMjMuOC9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ibGluay1lLWNvbW1lcmNlLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0BlZGdlc3RvcmUrc2VydmVyQDAuMi4yX3JlYWN0LWRvbUAxOC4zLjFfcmVhY3RAMTguMy4xX3pvZEAzLjIzLjgvbm9kZV9tb2R1bGVzL0BlZGdlc3RvcmUvc2VydmVyL2Rpc3QvaW5kZXgubWpzPzAxMzAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgaW5pdEVkZ2VTdG9yZSB9IGZyb20gJ0BlZGdlc3RvcmUvc2hhcmVkJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/providers/edgestore/index.mjs":
/*!***************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/providers/edgestore/index.mjs ***!
  \***************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EdgeStoreProvider: () => (/* binding */ EdgeStoreProvider)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/.pnpm/@edgestore+shared@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/shared/dist/index.mjs\");\n/* harmony import */ var _index_28efdacf_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index-28efdacf.mjs */ \"(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/index-28efdacf.mjs\");\n\n\n\nconst DEFAULT_BASE_URL = 'https://files.edgestore.dev';\nfunction EdgeStoreProvider(options) {\n    const { accessKey = process.env.EDGE_STORE_ACCESS_KEY, secretKey = process.env.EDGE_STORE_SECRET_KEY } = options ?? {};\n    const baseUrl = process.env.EDGE_STORE_BASE_URL ?? DEFAULT_BASE_URL;\n    if (!accessKey || !secretKey) {\n        throw new _index_28efdacf_mjs__WEBPACK_IMPORTED_MODULE_1__.E();\n    }\n    const edgeStoreSdk = (0,_index_28efdacf_mjs__WEBPACK_IMPORTED_MODULE_1__.i)({\n        accessKey,\n        secretKey\n    });\n    return {\n        init: async ({ ctx, router })=>{\n            const token = await edgeStoreSdk.getToken({\n                ctx,\n                router\n            });\n            return {\n                token\n            };\n        },\n        getBaseUrl () {\n            return baseUrl;\n        },\n        getFile: async ({ url })=>{\n            const { uploadedAt, ...rest } = await edgeStoreSdk.getFile({\n                url\n            });\n            return {\n                uploadedAt: new Date(uploadedAt),\n                ...rest\n            };\n        },\n        async requestUpload ({ bucketName, bucketType, fileInfo }) {\n            // multipart upload if file is bigger than a certain size\n            const MULTIPART_THRESHOLD = 10 * 1024 * 1024; // 10MB\n            let partSize = 5 * 1024 * 1024; // 5MB\n            if (fileInfo.size > MULTIPART_THRESHOLD) {\n                let totalParts = Math.ceil(fileInfo.size / partSize);\n                if (totalParts > 1000) {\n                    // the maximum number of parts is 1000\n                    totalParts = 1000;\n                    partSize = Math.ceil(fileInfo.size / totalParts);\n                }\n                const res = await edgeStoreSdk.requestUpload({\n                    bucketName,\n                    bucketType,\n                    fileInfo,\n                    multipart: {\n                        parts: Array.from({\n                            length: totalParts\n                        }).map((_, index)=>index + 1)\n                    }\n                });\n                const multipart = res.multipart ? {\n                    key: res.multipart.key,\n                    uploadId: res.multipart.uploadId,\n                    parts: res.multipart.parts.map((part)=>({\n                            partNumber: part.partNumber,\n                            uploadUrl: part.signedUrl\n                        })),\n                    partSize,\n                    totalParts\n                } : undefined;\n                if (multipart) {\n                    return {\n                        accessUrl: res.accessUrl,\n                        thumbnailUrl: res.thumbnailUrl,\n                        multipart\n                    };\n                } else if (res.signedUrl) {\n                    return {\n                        accessUrl: res.accessUrl,\n                        uploadUrl: res.signedUrl,\n                        thumbnailUrl: res.thumbnailUrl\n                    };\n                } else {\n                    throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                        message: 'Could not get upload url',\n                        code: 'SERVER_ERROR'\n                    });\n                }\n            }\n            const res = await edgeStoreSdk.requestUpload({\n                bucketName,\n                bucketType,\n                fileInfo\n            });\n            if (res.signedUrl) {\n                return {\n                    accessUrl: res.accessUrl,\n                    uploadUrl: res.signedUrl,\n                    thumbnailUrl: res.thumbnailUrl\n                };\n            }\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: 'Could not get upload url',\n                code: 'SERVER_ERROR'\n            });\n        },\n        requestUploadParts: async ({ multipart, path })=>{\n            const res = await edgeStoreSdk.requestUploadParts({\n                multipart,\n                key: path\n            });\n            return {\n                multipart: {\n                    uploadId: res.multipart.uploadId,\n                    parts: res.multipart.parts.map((part)=>({\n                            partNumber: part.partNumber,\n                            uploadUrl: part.signedUrl\n                        }))\n                }\n            };\n        },\n        completeMultipartUpload: async ({ uploadId, key, parts })=>{\n            return await edgeStoreSdk.completeMultipartUpload({\n                uploadId,\n                key,\n                parts\n            });\n        },\n        confirmUpload: async ({ url })=>{\n            return await edgeStoreSdk.confirmUpload({\n                url\n            });\n        },\n        deleteFile: async ({ url })=>{\n            return await edgeStoreSdk.deleteFile({\n                url\n            });\n        }\n    };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStzZXJ2ZXJAMC4yLjJfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfem9kQDMuMjMuOC9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9wcm92aWRlcnMvZWRnZXN0b3JlL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBbUQ7QUFDOEM7O0FBRWpHO0FBQ0E7QUFDQSxZQUFZLCtGQUErRjtBQUMzRztBQUNBO0FBQ0Esa0JBQWtCLGtEQUF5QjtBQUMzQztBQUNBLHlCQUF5QixzREFBZ0I7QUFDekM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHVCQUF1QixhQUFhO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCwwQkFBMEIsS0FBSztBQUMvQixvQkFBb0Isc0JBQXNCO0FBQzFDO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULCtCQUErQixrQ0FBa0M7QUFDakU7QUFDQSwwREFBMEQ7QUFDMUQsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEIsOEJBQThCLDZEQUFjO0FBQzVDO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZEQUFjO0FBQ3BDO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULHFDQUFxQyxpQkFBaUI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsU0FBUztBQUNULDBDQUEwQyxzQkFBc0I7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULGdDQUFnQyxLQUFLO0FBQ3JDO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULDZCQUE2QixLQUFLO0FBQ2xDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUU2QiIsInNvdXJjZXMiOlsid2VicGFjazovL2JsaW5rLWUtY29tbWVyY2UvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStzZXJ2ZXJAMC4yLjJfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfem9kQDMuMjMuOC9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9wcm92aWRlcnMvZWRnZXN0b3JlL2luZGV4Lm1qcz8xZWNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVkZ2VTdG9yZUVycm9yIH0gZnJvbSAnQGVkZ2VzdG9yZS9zaGFyZWQnO1xuaW1wb3J0IHsgRSBhcyBFZGdlU3RvcmVDcmVkZW50aWFsc0Vycm9yLCBpIGFzIGluaXRFZGdlU3RvcmVTZGsgfSBmcm9tICcuLi8uLi9pbmRleC0yOGVmZGFjZi5tanMnO1xuXG5jb25zdCBERUZBVUxUX0JBU0VfVVJMID0gJ2h0dHBzOi8vZmlsZXMuZWRnZXN0b3JlLmRldic7XG5mdW5jdGlvbiBFZGdlU3RvcmVQcm92aWRlcihvcHRpb25zKSB7XG4gICAgY29uc3QgeyBhY2Nlc3NLZXkgPSBwcm9jZXNzLmVudi5FREdFX1NUT1JFX0FDQ0VTU19LRVksIHNlY3JldEtleSA9IHByb2Nlc3MuZW52LkVER0VfU1RPUkVfU0VDUkVUX0tFWSB9ID0gb3B0aW9ucyA/PyB7fTtcbiAgICBjb25zdCBiYXNlVXJsID0gcHJvY2Vzcy5lbnYuRURHRV9TVE9SRV9CQVNFX1VSTCA/PyBERUZBVUxUX0JBU0VfVVJMO1xuICAgIGlmICghYWNjZXNzS2V5IHx8ICFzZWNyZXRLZXkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUNyZWRlbnRpYWxzRXJyb3IoKTtcbiAgICB9XG4gICAgY29uc3QgZWRnZVN0b3JlU2RrID0gaW5pdEVkZ2VTdG9yZVNkayh7XG4gICAgICAgIGFjY2Vzc0tleSxcbiAgICAgICAgc2VjcmV0S2V5XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogYXN5bmMgKHsgY3R4LCByb3V0ZXIgfSk9PntcbiAgICAgICAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgZWRnZVN0b3JlU2RrLmdldFRva2VuKHtcbiAgICAgICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICAgICAgcm91dGVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9rZW5cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGdldEJhc2VVcmwgKCkge1xuICAgICAgICAgICAgcmV0dXJuIGJhc2VVcmw7XG4gICAgICAgIH0sXG4gICAgICAgIGdldEZpbGU6IGFzeW5jICh7IHVybCB9KT0+e1xuICAgICAgICAgICAgY29uc3QgeyB1cGxvYWRlZEF0LCAuLi5yZXN0IH0gPSBhd2FpdCBlZGdlU3RvcmVTZGsuZ2V0RmlsZSh7XG4gICAgICAgICAgICAgICAgdXJsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXBsb2FkZWRBdDogbmV3IERhdGUodXBsb2FkZWRBdCksXG4gICAgICAgICAgICAgICAgLi4ucmVzdFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgcmVxdWVzdFVwbG9hZCAoeyBidWNrZXROYW1lLCBidWNrZXRUeXBlLCBmaWxlSW5mbyB9KSB7XG4gICAgICAgICAgICAvLyBtdWx0aXBhcnQgdXBsb2FkIGlmIGZpbGUgaXMgYmlnZ2VyIHRoYW4gYSBjZXJ0YWluIHNpemVcbiAgICAgICAgICAgIGNvbnN0IE1VTFRJUEFSVF9USFJFU0hPTEQgPSAxMCAqIDEwMjQgKiAxMDI0OyAvLyAxME1CXG4gICAgICAgICAgICBsZXQgcGFydFNpemUgPSA1ICogMTAyNCAqIDEwMjQ7IC8vIDVNQlxuICAgICAgICAgICAgaWYgKGZpbGVJbmZvLnNpemUgPiBNVUxUSVBBUlRfVEhSRVNIT0xEKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRvdGFsUGFydHMgPSBNYXRoLmNlaWwoZmlsZUluZm8uc2l6ZSAvIHBhcnRTaXplKTtcbiAgICAgICAgICAgICAgICBpZiAodG90YWxQYXJ0cyA+IDEwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIG1heGltdW0gbnVtYmVyIG9mIHBhcnRzIGlzIDEwMDBcbiAgICAgICAgICAgICAgICAgICAgdG90YWxQYXJ0cyA9IDEwMDA7XG4gICAgICAgICAgICAgICAgICAgIHBhcnRTaXplID0gTWF0aC5jZWlsKGZpbGVJbmZvLnNpemUgLyB0b3RhbFBhcnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZWRnZVN0b3JlU2RrLnJlcXVlc3RVcGxvYWQoe1xuICAgICAgICAgICAgICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICAgICAgICAgICAgICBidWNrZXRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBmaWxlSW5mbyxcbiAgICAgICAgICAgICAgICAgICAgbXVsdGlwYXJ0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0czogQXJyYXkuZnJvbSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiB0b3RhbFBhcnRzXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5tYXAoKF8sIGluZGV4KT0+aW5kZXggKyAxKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbXVsdGlwYXJ0ID0gcmVzLm11bHRpcGFydCA/IHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiByZXMubXVsdGlwYXJ0LmtleSxcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkSWQ6IHJlcy5tdWx0aXBhcnQudXBsb2FkSWQsXG4gICAgICAgICAgICAgICAgICAgIHBhcnRzOiByZXMubXVsdGlwYXJ0LnBhcnRzLm1hcCgocGFydCk9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFydE51bWJlcjogcGFydC5wYXJ0TnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZFVybDogcGFydC5zaWduZWRVcmxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgcGFydFNpemUsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsUGFydHNcbiAgICAgICAgICAgICAgICB9IDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChtdWx0aXBhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc1VybDogcmVzLmFjY2Vzc1VybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbFVybDogcmVzLnRodW1ibmFpbFVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGFydFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLnNpZ25lZFVybCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzVXJsOiByZXMuYWNjZXNzVXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkVXJsOiByZXMuc2lnbmVkVXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsVXJsOiByZXMudGh1bWJuYWlsVXJsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb3VsZCBub3QgZ2V0IHVwbG9hZCB1cmwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogJ1NFUlZFUl9FUlJPUidcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZWRnZVN0b3JlU2RrLnJlcXVlc3RVcGxvYWQoe1xuICAgICAgICAgICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICAgICAgYnVja2V0VHlwZSxcbiAgICAgICAgICAgICAgICBmaWxlSW5mb1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVzLnNpZ25lZFVybCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc1VybDogcmVzLmFjY2Vzc1VybCxcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkVXJsOiByZXMuc2lnbmVkVXJsLFxuICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxVcmw6IHJlcy50aHVtYm5haWxVcmxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ291bGQgbm90IGdldCB1cGxvYWQgdXJsJyxcbiAgICAgICAgICAgICAgICBjb2RlOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVlc3RVcGxvYWRQYXJ0czogYXN5bmMgKHsgbXVsdGlwYXJ0LCBwYXRoIH0pPT57XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBlZGdlU3RvcmVTZGsucmVxdWVzdFVwbG9hZFBhcnRzKHtcbiAgICAgICAgICAgICAgICBtdWx0aXBhcnQsXG4gICAgICAgICAgICAgICAga2V5OiBwYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbXVsdGlwYXJ0OiB7XG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZElkOiByZXMubXVsdGlwYXJ0LnVwbG9hZElkLFxuICAgICAgICAgICAgICAgICAgICBwYXJ0czogcmVzLm11bHRpcGFydC5wYXJ0cy5tYXAoKHBhcnQpPT4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnROdW1iZXI6IHBhcnQucGFydE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRVcmw6IHBhcnQuc2lnbmVkVXJsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBjb21wbGV0ZU11bHRpcGFydFVwbG9hZDogYXN5bmMgKHsgdXBsb2FkSWQsIGtleSwgcGFydHMgfSk9PntcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBlZGdlU3RvcmVTZGsuY29tcGxldGVNdWx0aXBhcnRVcGxvYWQoe1xuICAgICAgICAgICAgICAgIHVwbG9hZElkLFxuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICBwYXJ0c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbmZpcm1VcGxvYWQ6IGFzeW5jICh7IHVybCB9KT0+e1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGVkZ2VTdG9yZVNkay5jb25maXJtVXBsb2FkKHtcbiAgICAgICAgICAgICAgICB1cmxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWxldGVGaWxlOiBhc3luYyAoeyB1cmwgfSk9PntcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBlZGdlU3RvcmVTZGsuZGVsZXRlRmlsZSh7XG4gICAgICAgICAgICAgICAgdXJsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCB7IEVkZ2VTdG9yZVByb3ZpZGVyIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/providers/edgestore/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/shared-039276af.mjs":
/*!*****************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/shared-039276af.mjs ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   a: () => (/* binding */ requestUploadParts),\n/* harmony export */   b: () => (/* binding */ buildPath),\n/* harmony export */   c: () => (/* binding */ completeMultipartUpload),\n/* harmony export */   d: () => (/* binding */ confirmUpload),\n/* harmony export */   e: () => (/* binding */ deleteFile),\n/* harmony export */   i: () => (/* binding */ init),\n/* harmony export */   p: () => (/* binding */ parsePath),\n/* harmony export */   r: () => (/* binding */ requestUpload)\n/* harmony export */ });\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edgestore/shared */ \"(rsc)/./node_modules/.pnpm/@edgestore+shared@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/shared/dist/index.mjs\");\n/* harmony import */ var _panva_hkdf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @panva/hkdf */ \"(rsc)/./node_modules/.pnpm/@panva+hkdf@1.2.1/node_modules/@panva/hkdf/dist/node/esm/index.js\");\n/* harmony import */ var cookie__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cookie */ \"(rsc)/./node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@4.15.9/node_modules/jose/dist/node/esm/jwt/encrypt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/.pnpm/jose@4.15.9/node_modules/jose/dist/node/esm/jwt/decrypt.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-node/v4.js\");\n\n\n\n\n\n\nconst IMAGE_MIME_TYPES = [\n    'image/jpeg',\n    'image/png',\n    'image/gif',\n    'image/webp',\n    'image/svg+xml',\n    'image/tiff',\n    'image/bmp',\n    'image/x-icon'\n];\n\n// TODO: change it to 1 hour when we have a way to refresh the token\nconst DEFAULT_MAX_AGE = 30 * 24 * 60 * 60; // 30 days\nasync function init(params) {\n    const log = globalThis._EDGE_STORE_LOGGER;\n    const { ctx, provider, router } = params;\n    log.debug('Running [init]', {\n        ctx\n    });\n    const ctxToken = await encryptJWT(ctx);\n    const { token } = await provider.init({\n        ctx,\n        router: router\n    });\n    const newCookies = [\n        (0,cookie__WEBPACK_IMPORTED_MODULE_1__.serialize)('edgestore-ctx', ctxToken, {\n            path: '/',\n            maxAge: DEFAULT_MAX_AGE\n        })\n    ];\n    if (token) {\n        newCookies.push((0,cookie__WEBPACK_IMPORTED_MODULE_1__.serialize)('edgestore-token', token, {\n            path: '/',\n            maxAge: DEFAULT_MAX_AGE\n        }));\n    }\n    const baseUrl = await provider.getBaseUrl();\n    log.debug('Finished [init]', {\n        ctx,\n        newCookies,\n        token,\n        baseUrl\n    });\n    return {\n        newCookies,\n        token,\n        baseUrl\n    };\n}\nasync function requestUpload(params) {\n    const { provider, router, ctxToken, body: { bucketName, input, fileInfo } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug('Running [requestUpload]', {\n        bucketName,\n        input,\n        fileInfo\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: 'Missing edgestore-ctx cookie',\n            code: 'UNAUTHORIZED'\n        });\n    }\n    const ctx = await getContext(ctxToken);\n    log.debug('Decrypted Context', {\n        ctx\n    });\n    const bucket = router.buckets[bucketName];\n    if (!bucket) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: `Bucket ${bucketName} not found`,\n            code: 'BAD_REQUEST'\n        });\n    }\n    if (bucket._def.beforeUpload) {\n        log.debug('Running [beforeUpload]');\n        const canUpload = await bucket._def.beforeUpload?.({\n            ctx,\n            input,\n            fileInfo: {\n                size: fileInfo.size,\n                type: fileInfo.type,\n                fileName: fileInfo.fileName,\n                extension: fileInfo.extension,\n                replaceTargetUrl: fileInfo.replaceTargetUrl,\n                temporary: fileInfo.temporary\n            }\n        });\n        log.debug('Finished [beforeUpload]', {\n            canUpload\n        });\n        if (!canUpload) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: 'Upload not allowed for the current context',\n                code: 'UPLOAD_NOT_ALLOWED'\n            });\n        }\n    }\n    if (bucket._def.type === 'IMAGE') {\n        if (!IMAGE_MIME_TYPES.includes(fileInfo.type)) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                code: 'MIME_TYPE_NOT_ALLOWED',\n                message: 'Only images are allowed in this bucket',\n                details: {\n                    allowedMimeTypes: IMAGE_MIME_TYPES,\n                    mimeType: fileInfo.type\n                }\n            });\n        }\n    }\n    if (bucket._def.bucketConfig?.maxSize) {\n        if (fileInfo.size > bucket._def.bucketConfig.maxSize) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                code: 'FILE_TOO_LARGE',\n                message: `File size is too big. Max size is ${bucket._def.bucketConfig.maxSize}`,\n                details: {\n                    maxFileSize: bucket._def.bucketConfig.maxSize,\n                    fileSize: fileInfo.size\n                }\n            });\n        }\n    }\n    if (bucket._def.bucketConfig?.accept) {\n        const accept = bucket._def.bucketConfig.accept;\n        let accepted = false;\n        for (const acceptedMimeType of accept){\n            if (acceptedMimeType.endsWith('/*')) {\n                const mimeType = acceptedMimeType.replace('/*', '');\n                if (fileInfo.type.startsWith(mimeType)) {\n                    accepted = true;\n                    break;\n                }\n            } else if (fileInfo.type === acceptedMimeType) {\n                accepted = true;\n                break;\n            }\n        }\n        if (!accepted) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                code: 'MIME_TYPE_NOT_ALLOWED',\n                message: `\"${fileInfo.type}\" is not allowed. Accepted types are ${JSON.stringify(accept)}`,\n                details: {\n                    allowedMimeTypes: accept,\n                    mimeType: fileInfo.type\n                }\n            });\n        }\n    }\n    const path = buildPath({\n        fileInfo,\n        bucket,\n        pathAttrs: {\n            ctx,\n            input\n        }\n    });\n    const metadata = await bucket._def.metadata?.({\n        ctx,\n        input\n    });\n    const isPublic = bucket._def.accessControl === undefined;\n    log.debug('upload info', {\n        path,\n        metadata,\n        isPublic,\n        bucketType: bucket._def.type\n    });\n    const requestUploadRes = await provider.requestUpload({\n        bucketName,\n        bucketType: bucket._def.type,\n        fileInfo: {\n            ...fileInfo,\n            path,\n            isPublic,\n            metadata\n        }\n    });\n    const { parsedPath, pathOrder } = parsePath(path);\n    log.debug('Finished [requestUpload]');\n    return {\n        ...requestUploadRes,\n        size: fileInfo.size,\n        uploadedAt: new Date().toISOString(),\n        path: parsedPath,\n        pathOrder,\n        metadata\n    };\n}\nasync function requestUploadParts(params) {\n    const { provider, ctxToken, body: { multipart, path } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug('Running [requestUploadParts]', {\n        multipart,\n        path\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: 'Missing edgestore-ctx cookie',\n            code: 'UNAUTHORIZED'\n        });\n    }\n    await getContext(ctxToken); // just to check if the token is valid\n    const res = await provider.requestUploadParts({\n        multipart,\n        path\n    });\n    log.debug('Finished [requestUploadParts]');\n    return res;\n}\nasync function completeMultipartUpload(params) {\n    const { provider, router, ctxToken, body: { bucketName, uploadId, key, parts } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug('Running [completeMultipartUpload]', {\n        bucketName,\n        uploadId,\n        key\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: 'Missing edgestore-ctx cookie',\n            code: 'UNAUTHORIZED'\n        });\n    }\n    await getContext(ctxToken); // just to check if the token is valid\n    const bucket = router.buckets[bucketName];\n    if (!bucket) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: `Bucket ${bucketName} not found`,\n            code: 'BAD_REQUEST'\n        });\n    }\n    const res = await provider.completeMultipartUpload({\n        uploadId,\n        key,\n        parts\n    });\n    log.debug('Finished [completeMultipartUpload]');\n    return res;\n}\nasync function confirmUpload(params) {\n    const { provider, router, ctxToken, body: { bucketName, url } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug('Running [confirmUpload]', {\n        bucketName,\n        url\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: 'Missing edgestore-ctx cookie',\n            code: 'UNAUTHORIZED'\n        });\n    }\n    await getContext(ctxToken); // just to check if the token is valid\n    const bucket = router.buckets[bucketName];\n    if (!bucket) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: `Bucket ${bucketName} not found`,\n            code: 'BAD_REQUEST'\n        });\n    }\n    const res = await provider.confirmUpload({\n        bucket,\n        url: unproxyUrl(url)\n    });\n    log.debug('Finished [confirmUpload]');\n    return res;\n}\nasync function deleteFile(params) {\n    const { provider, router, ctxToken, body: { bucketName, url } } = params;\n    const log = globalThis._EDGE_STORE_LOGGER;\n    log.debug('Running [deleteFile]', {\n        bucketName,\n        url\n    });\n    if (!ctxToken) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: 'Missing edgestore-ctx cookie',\n            code: 'UNAUTHORIZED'\n        });\n    }\n    const ctx = await getContext(ctxToken);\n    const bucket = router.buckets[bucketName];\n    if (!bucket) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: `Bucket ${bucketName} not found`,\n            code: 'BAD_REQUEST'\n        });\n    }\n    if (!bucket._def.beforeDelete) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: 'You need to define beforeDelete if you want to delete files directly from the frontend.',\n            code: 'SERVER_ERROR'\n        });\n    }\n    const fileInfo = await provider.getFile({\n        url: unproxyUrl(url)\n    });\n    const canDelete = await bucket._def.beforeDelete({\n        ctx,\n        fileInfo\n    });\n    if (!canDelete) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: 'Delete not allowed for the current context',\n            code: 'DELETE_NOT_ALLOWED'\n        });\n    }\n    const res = await provider.deleteFile({\n        bucket,\n        url: unproxyUrl(url)\n    });\n    log.debug('Finished [deleteFile]');\n    return res;\n}\nasync function encryptJWT(ctx) {\n    const secret = process.env.EDGE_STORE_JWT_SECRET ?? process.env.EDGE_STORE_SECRET_KEY;\n    if (!secret) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: 'EDGE_STORE_JWT_SECRET or EDGE_STORE_SECRET_KEY is not defined',\n            code: 'SERVER_ERROR'\n        });\n    }\n    const encryptionSecret = await getDerivedEncryptionKey(secret);\n    return await new jose__WEBPACK_IMPORTED_MODULE_2__.EncryptJWT(ctx).setProtectedHeader({\n        alg: 'dir',\n        enc: 'A256GCM'\n    }).setIssuedAt().setExpirationTime(Date.now() / 1000 + DEFAULT_MAX_AGE).setJti((0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])()).encrypt(encryptionSecret);\n}\nasync function decryptJWT(token) {\n    const secret = process.env.EDGE_STORE_JWT_SECRET ?? process.env.EDGE_STORE_SECRET_KEY;\n    if (!secret) {\n        throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n            message: 'EDGE_STORE_JWT_SECRET or EDGE_STORE_SECRET_KEY is not defined',\n            code: 'SERVER_ERROR'\n        });\n    }\n    const encryptionSecret = await getDerivedEncryptionKey(secret);\n    const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.jwtDecrypt)(token, encryptionSecret, {\n        clockTolerance: 15\n    });\n    return payload;\n}\nasync function getDerivedEncryptionKey(secret) {\n    return await (0,_panva_hkdf__WEBPACK_IMPORTED_MODULE_5__.hkdf)('sha256', secret, '', 'Edge Store Generated Encryption Key', 32);\n}\nfunction buildPath(params) {\n    const { bucket } = params;\n    const pathParams = bucket._def.path;\n    const path = pathParams.map((param)=>{\n        const paramEntries = Object.entries(param);\n        if (paramEntries[0] === undefined) {\n            throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                message: `Empty path param found in: ${JSON.stringify(pathParams)}`,\n                code: 'SERVER_ERROR'\n            });\n        }\n        const [key, value] = paramEntries[0];\n        // this is a string like: \"ctx.xxx\" or \"input.yyy.zzz\"\n        const currParamVal = value().split('.').reduce((acc2, key)=>{\n            if (acc2[key] === undefined) {\n                throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_0__.EdgeStoreError({\n                    message: `Missing key ${key} in ${JSON.stringify(acc2)}`,\n                    code: 'BAD_REQUEST'\n                });\n            }\n            return acc2[key];\n        }, params.pathAttrs);\n        return {\n            key,\n            value: currParamVal\n        };\n    });\n    return path;\n}\nfunction parsePath(path) {\n    const parsedPath = path.reduce((acc, curr)=>{\n        acc[curr.key] = curr.value;\n        return acc;\n    }, {});\n    const pathOrder = path.map((p)=>p.key);\n    return {\n        parsedPath,\n        pathOrder\n    };\n}\nasync function getContext(token) {\n    return await decryptJWT(token);\n}\n/**\n * On local development, protected files are proxied to the server,\n * which changes the original URL.\n *\n * This function is used to get the original URL,\n * so that we can delete or confirm the upload.\n */ function unproxyUrl(url) {\n    if ( true && url.startsWith('http://')) {\n        // get the url param from the query string\n        const urlParam = new URL(url).searchParams.get('url');\n        if (urlParam) {\n            return urlParam;\n        }\n    }\n    return url;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStzZXJ2ZXJAMC4yLjJfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfem9kQDMuMjMuOC9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9zaGFyZWQtMDM5Mjc2YWYubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW1EO0FBQ2hCO0FBQ0E7QUFDVztBQUNwQjs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBLFlBQVksd0JBQXdCO0FBQ3BDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLFFBQVEsaURBQVM7QUFDakI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esd0JBQXdCLGlEQUFTO0FBQ2pDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9DQUFvQyxnQ0FBZ0M7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGtCQUFrQiw2REFBYztBQUNoQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxrQkFBa0IsNkRBQWM7QUFDaEMsK0JBQStCLFlBQVk7QUFDM0M7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esc0JBQXNCLDZEQUFjO0FBQ3BDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkRBQWM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZEQUFjO0FBQ3BDO0FBQ0EsOERBQThELGlDQUFpQztBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw2REFBYztBQUNwQztBQUNBLDZCQUE2QixjQUFjLHVDQUF1Qyx1QkFBdUI7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVksd0JBQXdCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDRCQUE0QixvQkFBb0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxrQkFBa0IsNkRBQWM7QUFDaEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9DQUFvQyxxQ0FBcUM7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGtCQUFrQiw2REFBYztBQUNoQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxrQkFBa0IsNkRBQWM7QUFDaEMsK0JBQStCLFlBQVk7QUFDM0M7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0NBQW9DLG9CQUFvQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGtCQUFrQiw2REFBYztBQUNoQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxrQkFBa0IsNkRBQWM7QUFDaEMsK0JBQStCLFlBQVk7QUFDM0M7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9DQUFvQyxvQkFBb0I7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxrQkFBa0IsNkRBQWM7QUFDaEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2REFBYztBQUNoQywrQkFBK0IsWUFBWTtBQUMzQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esa0JBQWtCLDZEQUFjO0FBQ2hDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGtCQUFrQiw2REFBYztBQUNoQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2REFBYztBQUNoQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxxQkFBcUIsNENBQVU7QUFDL0I7QUFDQTtBQUNBLEtBQUssOEVBQThFLGdEQUFFO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDZEQUFjO0FBQ2hDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFlBQVksVUFBVSxRQUFRLGdEQUFVO0FBQ3hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixpREFBSTtBQUNyQjtBQUNBO0FBQ0EsWUFBWSxTQUFTO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZEQUFjO0FBQ3BDLHVEQUF1RCwyQkFBMkI7QUFDbEY7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiw2REFBYztBQUN4Qyw0Q0FBNEMsS0FBSyxLQUFLLHFCQUFxQjtBQUMzRTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSTtBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxLQUFzQztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVxSyIsInNvdXJjZXMiOlsid2VicGFjazovL2JsaW5rLWUtY29tbWVyY2UvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStzZXJ2ZXJAMC4yLjJfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfem9kQDMuMjMuOC9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC9zaGFyZWQtMDM5Mjc2YWYubWpzP2Q4NmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRWRnZVN0b3JlRXJyb3IgfSBmcm9tICdAZWRnZXN0b3JlL3NoYXJlZCc7XG5pbXBvcnQgeyBoa2RmIH0gZnJvbSAnQHBhbnZhL2hrZGYnO1xuaW1wb3J0IHsgc2VyaWFsaXplIH0gZnJvbSAnY29va2llJztcbmltcG9ydCB7IEVuY3J5cHRKV1QsIGp3dERlY3J5cHQgfSBmcm9tICdqb3NlJztcbmltcG9ydCB7IHY0IH0gZnJvbSAndXVpZCc7XG5cbmNvbnN0IElNQUdFX01JTUVfVFlQRVMgPSBbXG4gICAgJ2ltYWdlL2pwZWcnLFxuICAgICdpbWFnZS9wbmcnLFxuICAgICdpbWFnZS9naWYnLFxuICAgICdpbWFnZS93ZWJwJyxcbiAgICAnaW1hZ2Uvc3ZnK3htbCcsXG4gICAgJ2ltYWdlL3RpZmYnLFxuICAgICdpbWFnZS9ibXAnLFxuICAgICdpbWFnZS94LWljb24nXG5dO1xuXG4vLyBUT0RPOiBjaGFuZ2UgaXQgdG8gMSBob3VyIHdoZW4gd2UgaGF2ZSBhIHdheSB0byByZWZyZXNoIHRoZSB0b2tlblxuY29uc3QgREVGQVVMVF9NQVhfQUdFID0gMzAgKiAyNCAqIDYwICogNjA7IC8vIDMwIGRheXNcbmFzeW5jIGZ1bmN0aW9uIGluaXQocGFyYW1zKSB7XG4gICAgY29uc3QgbG9nID0gZ2xvYmFsVGhpcy5fRURHRV9TVE9SRV9MT0dHRVI7XG4gICAgY29uc3QgeyBjdHgsIHByb3ZpZGVyLCByb3V0ZXIgfSA9IHBhcmFtcztcbiAgICBsb2cuZGVidWcoJ1J1bm5pbmcgW2luaXRdJywge1xuICAgICAgICBjdHhcbiAgICB9KTtcbiAgICBjb25zdCBjdHhUb2tlbiA9IGF3YWl0IGVuY3J5cHRKV1QoY3R4KTtcbiAgICBjb25zdCB7IHRva2VuIH0gPSBhd2FpdCBwcm92aWRlci5pbml0KHtcbiAgICAgICAgY3R4LFxuICAgICAgICByb3V0ZXI6IHJvdXRlclxuICAgIH0pO1xuICAgIGNvbnN0IG5ld0Nvb2tpZXMgPSBbXG4gICAgICAgIHNlcmlhbGl6ZSgnZWRnZXN0b3JlLWN0eCcsIGN0eFRva2VuLCB7XG4gICAgICAgICAgICBwYXRoOiAnLycsXG4gICAgICAgICAgICBtYXhBZ2U6IERFRkFVTFRfTUFYX0FHRVxuICAgICAgICB9KVxuICAgIF07XG4gICAgaWYgKHRva2VuKSB7XG4gICAgICAgIG5ld0Nvb2tpZXMucHVzaChzZXJpYWxpemUoJ2VkZ2VzdG9yZS10b2tlbicsIHRva2VuLCB7XG4gICAgICAgICAgICBwYXRoOiAnLycsXG4gICAgICAgICAgICBtYXhBZ2U6IERFRkFVTFRfTUFYX0FHRVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNvbnN0IGJhc2VVcmwgPSBhd2FpdCBwcm92aWRlci5nZXRCYXNlVXJsKCk7XG4gICAgbG9nLmRlYnVnKCdGaW5pc2hlZCBbaW5pdF0nLCB7XG4gICAgICAgIGN0eCxcbiAgICAgICAgbmV3Q29va2llcyxcbiAgICAgICAgdG9rZW4sXG4gICAgICAgIGJhc2VVcmxcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBuZXdDb29raWVzLFxuICAgICAgICB0b2tlbixcbiAgICAgICAgYmFzZVVybFxuICAgIH07XG59XG5hc3luYyBmdW5jdGlvbiByZXF1ZXN0VXBsb2FkKHBhcmFtcykge1xuICAgIGNvbnN0IHsgcHJvdmlkZXIsIHJvdXRlciwgY3R4VG9rZW4sIGJvZHk6IHsgYnVja2V0TmFtZSwgaW5wdXQsIGZpbGVJbmZvIH0gfSA9IHBhcmFtcztcbiAgICBjb25zdCBsb2cgPSBnbG9iYWxUaGlzLl9FREdFX1NUT1JFX0xPR0dFUjtcbiAgICBsb2cuZGVidWcoJ1J1bm5pbmcgW3JlcXVlc3RVcGxvYWRdJywge1xuICAgICAgICBidWNrZXROYW1lLFxuICAgICAgICBpbnB1dCxcbiAgICAgICAgZmlsZUluZm9cbiAgICB9KTtcbiAgICBpZiAoIWN0eFRva2VuKSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiAnTWlzc2luZyBlZGdlc3RvcmUtY3R4IGNvb2tpZScsXG4gICAgICAgICAgICBjb2RlOiAnVU5BVVRIT1JJWkVEJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgY3R4ID0gYXdhaXQgZ2V0Q29udGV4dChjdHhUb2tlbik7XG4gICAgbG9nLmRlYnVnKCdEZWNyeXB0ZWQgQ29udGV4dCcsIHtcbiAgICAgICAgY3R4XG4gICAgfSk7XG4gICAgY29uc3QgYnVja2V0ID0gcm91dGVyLmJ1Y2tldHNbYnVja2V0TmFtZV07XG4gICAgaWYgKCFidWNrZXQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBCdWNrZXQgJHtidWNrZXROYW1lfSBub3QgZm91bmRgLFxuICAgICAgICAgICAgY29kZTogJ0JBRF9SRVFVRVNUJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGJ1Y2tldC5fZGVmLmJlZm9yZVVwbG9hZCkge1xuICAgICAgICBsb2cuZGVidWcoJ1J1bm5pbmcgW2JlZm9yZVVwbG9hZF0nKTtcbiAgICAgICAgY29uc3QgY2FuVXBsb2FkID0gYXdhaXQgYnVja2V0Ll9kZWYuYmVmb3JlVXBsb2FkPy4oe1xuICAgICAgICAgICAgY3R4LFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBmaWxlSW5mbzoge1xuICAgICAgICAgICAgICAgIHNpemU6IGZpbGVJbmZvLnNpemUsXG4gICAgICAgICAgICAgICAgdHlwZTogZmlsZUluZm8udHlwZSxcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogZmlsZUluZm8uZmlsZU5hbWUsXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uOiBmaWxlSW5mby5leHRlbnNpb24sXG4gICAgICAgICAgICAgICAgcmVwbGFjZVRhcmdldFVybDogZmlsZUluZm8ucmVwbGFjZVRhcmdldFVybCxcbiAgICAgICAgICAgICAgICB0ZW1wb3Jhcnk6IGZpbGVJbmZvLnRlbXBvcmFyeVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbG9nLmRlYnVnKCdGaW5pc2hlZCBbYmVmb3JlVXBsb2FkXScsIHtcbiAgICAgICAgICAgIGNhblVwbG9hZFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFjYW5VcGxvYWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1VwbG9hZCBub3QgYWxsb3dlZCBmb3IgdGhlIGN1cnJlbnQgY29udGV4dCcsXG4gICAgICAgICAgICAgICAgY29kZTogJ1VQTE9BRF9OT1RfQUxMT1dFRCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChidWNrZXQuX2RlZi50eXBlID09PSAnSU1BR0UnKSB7XG4gICAgICAgIGlmICghSU1BR0VfTUlNRV9UWVBFUy5pbmNsdWRlcyhmaWxlSW5mby50eXBlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiAnTUlNRV9UWVBFX05PVF9BTExPV0VEJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnT25seSBpbWFnZXMgYXJlIGFsbG93ZWQgaW4gdGhpcyBidWNrZXQnLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dlZE1pbWVUeXBlczogSU1BR0VfTUlNRV9UWVBFUyxcbiAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IGZpbGVJbmZvLnR5cGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYnVja2V0Ll9kZWYuYnVja2V0Q29uZmlnPy5tYXhTaXplKSB7XG4gICAgICAgIGlmIChmaWxlSW5mby5zaXplID4gYnVja2V0Ll9kZWYuYnVja2V0Q29uZmlnLm1heFNpemUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogJ0ZJTEVfVE9PX0xBUkdFJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgRmlsZSBzaXplIGlzIHRvbyBiaWcuIE1heCBzaXplIGlzICR7YnVja2V0Ll9kZWYuYnVja2V0Q29uZmlnLm1heFNpemV9YCxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIG1heEZpbGVTaXplOiBidWNrZXQuX2RlZi5idWNrZXRDb25maWcubWF4U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgZmlsZVNpemU6IGZpbGVJbmZvLnNpemVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYnVja2V0Ll9kZWYuYnVja2V0Q29uZmlnPy5hY2NlcHQpIHtcbiAgICAgICAgY29uc3QgYWNjZXB0ID0gYnVja2V0Ll9kZWYuYnVja2V0Q29uZmlnLmFjY2VwdDtcbiAgICAgICAgbGV0IGFjY2VwdGVkID0gZmFsc2U7XG4gICAgICAgIGZvciAoY29uc3QgYWNjZXB0ZWRNaW1lVHlwZSBvZiBhY2NlcHQpe1xuICAgICAgICAgICAgaWYgKGFjY2VwdGVkTWltZVR5cGUuZW5kc1dpdGgoJy8qJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtaW1lVHlwZSA9IGFjY2VwdGVkTWltZVR5cGUucmVwbGFjZSgnLyonLCAnJyk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVJbmZvLnR5cGUuc3RhcnRzV2l0aChtaW1lVHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjZXB0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpbGVJbmZvLnR5cGUgPT09IGFjY2VwdGVkTWltZVR5cGUpIHtcbiAgICAgICAgICAgICAgICBhY2NlcHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhY2NlcHRlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiAnTUlNRV9UWVBFX05PVF9BTExPV0VEJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgXCIke2ZpbGVJbmZvLnR5cGV9XCIgaXMgbm90IGFsbG93ZWQuIEFjY2VwdGVkIHR5cGVzIGFyZSAke0pTT04uc3RyaW5naWZ5KGFjY2VwdCl9YCxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIGFsbG93ZWRNaW1lVHlwZXM6IGFjY2VwdCxcbiAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IGZpbGVJbmZvLnR5cGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwYXRoID0gYnVpbGRQYXRoKHtcbiAgICAgICAgZmlsZUluZm8sXG4gICAgICAgIGJ1Y2tldCxcbiAgICAgICAgcGF0aEF0dHJzOiB7XG4gICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICBpbnB1dFxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCBidWNrZXQuX2RlZi5tZXRhZGF0YT8uKHtcbiAgICAgICAgY3R4LFxuICAgICAgICBpbnB1dFxuICAgIH0pO1xuICAgIGNvbnN0IGlzUHVibGljID0gYnVja2V0Ll9kZWYuYWNjZXNzQ29udHJvbCA9PT0gdW5kZWZpbmVkO1xuICAgIGxvZy5kZWJ1ZygndXBsb2FkIGluZm8nLCB7XG4gICAgICAgIHBhdGgsXG4gICAgICAgIG1ldGFkYXRhLFxuICAgICAgICBpc1B1YmxpYyxcbiAgICAgICAgYnVja2V0VHlwZTogYnVja2V0Ll9kZWYudHlwZVxuICAgIH0pO1xuICAgIGNvbnN0IHJlcXVlc3RVcGxvYWRSZXMgPSBhd2FpdCBwcm92aWRlci5yZXF1ZXN0VXBsb2FkKHtcbiAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgYnVja2V0VHlwZTogYnVja2V0Ll9kZWYudHlwZSxcbiAgICAgICAgZmlsZUluZm86IHtcbiAgICAgICAgICAgIC4uLmZpbGVJbmZvLFxuICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgIGlzUHVibGljLFxuICAgICAgICAgICAgbWV0YWRhdGFcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IHsgcGFyc2VkUGF0aCwgcGF0aE9yZGVyIH0gPSBwYXJzZVBhdGgocGF0aCk7XG4gICAgbG9nLmRlYnVnKCdGaW5pc2hlZCBbcmVxdWVzdFVwbG9hZF0nKTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5yZXF1ZXN0VXBsb2FkUmVzLFxuICAgICAgICBzaXplOiBmaWxlSW5mby5zaXplLFxuICAgICAgICB1cGxvYWRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHBhdGg6IHBhcnNlZFBhdGgsXG4gICAgICAgIHBhdGhPcmRlcixcbiAgICAgICAgbWV0YWRhdGFcbiAgICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFVwbG9hZFBhcnRzKHBhcmFtcykge1xuICAgIGNvbnN0IHsgcHJvdmlkZXIsIGN0eFRva2VuLCBib2R5OiB7IG11bHRpcGFydCwgcGF0aCB9IH0gPSBwYXJhbXM7XG4gICAgY29uc3QgbG9nID0gZ2xvYmFsVGhpcy5fRURHRV9TVE9SRV9MT0dHRVI7XG4gICAgbG9nLmRlYnVnKCdSdW5uaW5nIFtyZXF1ZXN0VXBsb2FkUGFydHNdJywge1xuICAgICAgICBtdWx0aXBhcnQsXG4gICAgICAgIHBhdGhcbiAgICB9KTtcbiAgICBpZiAoIWN0eFRva2VuKSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiAnTWlzc2luZyBlZGdlc3RvcmUtY3R4IGNvb2tpZScsXG4gICAgICAgICAgICBjb2RlOiAnVU5BVVRIT1JJWkVEJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXdhaXQgZ2V0Q29udGV4dChjdHhUb2tlbik7IC8vIGp1c3QgdG8gY2hlY2sgaWYgdGhlIHRva2VuIGlzIHZhbGlkXG4gICAgY29uc3QgcmVzID0gYXdhaXQgcHJvdmlkZXIucmVxdWVzdFVwbG9hZFBhcnRzKHtcbiAgICAgICAgbXVsdGlwYXJ0LFxuICAgICAgICBwYXRoXG4gICAgfSk7XG4gICAgbG9nLmRlYnVnKCdGaW5pc2hlZCBbcmVxdWVzdFVwbG9hZFBhcnRzXScpO1xuICAgIHJldHVybiByZXM7XG59XG5hc3luYyBmdW5jdGlvbiBjb21wbGV0ZU11bHRpcGFydFVwbG9hZChwYXJhbXMpIHtcbiAgICBjb25zdCB7IHByb3ZpZGVyLCByb3V0ZXIsIGN0eFRva2VuLCBib2R5OiB7IGJ1Y2tldE5hbWUsIHVwbG9hZElkLCBrZXksIHBhcnRzIH0gfSA9IHBhcmFtcztcbiAgICBjb25zdCBsb2cgPSBnbG9iYWxUaGlzLl9FREdFX1NUT1JFX0xPR0dFUjtcbiAgICBsb2cuZGVidWcoJ1J1bm5pbmcgW2NvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkXScsIHtcbiAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgdXBsb2FkSWQsXG4gICAgICAgIGtleVxuICAgIH0pO1xuICAgIGlmICghY3R4VG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdNaXNzaW5nIGVkZ2VzdG9yZS1jdHggY29va2llJyxcbiAgICAgICAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhd2FpdCBnZXRDb250ZXh0KGN0eFRva2VuKTsgLy8ganVzdCB0byBjaGVjayBpZiB0aGUgdG9rZW4gaXMgdmFsaWRcbiAgICBjb25zdCBidWNrZXQgPSByb3V0ZXIuYnVja2V0c1tidWNrZXROYW1lXTtcbiAgICBpZiAoIWJ1Y2tldCkge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogYEJ1Y2tldCAke2J1Y2tldE5hbWV9IG5vdCBmb3VuZGAsXG4gICAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCBwcm92aWRlci5jb21wbGV0ZU11bHRpcGFydFVwbG9hZCh7XG4gICAgICAgIHVwbG9hZElkLFxuICAgICAgICBrZXksXG4gICAgICAgIHBhcnRzXG4gICAgfSk7XG4gICAgbG9nLmRlYnVnKCdGaW5pc2hlZCBbY29tcGxldGVNdWx0aXBhcnRVcGxvYWRdJyk7XG4gICAgcmV0dXJuIHJlcztcbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1VcGxvYWQocGFyYW1zKSB7XG4gICAgY29uc3QgeyBwcm92aWRlciwgcm91dGVyLCBjdHhUb2tlbiwgYm9keTogeyBidWNrZXROYW1lLCB1cmwgfSB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGxvZyA9IGdsb2JhbFRoaXMuX0VER0VfU1RPUkVfTE9HR0VSO1xuICAgIGxvZy5kZWJ1ZygnUnVubmluZyBbY29uZmlybVVwbG9hZF0nLCB7XG4gICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgIHVybFxuICAgIH0pO1xuICAgIGlmICghY3R4VG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdNaXNzaW5nIGVkZ2VzdG9yZS1jdHggY29va2llJyxcbiAgICAgICAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhd2FpdCBnZXRDb250ZXh0KGN0eFRva2VuKTsgLy8ganVzdCB0byBjaGVjayBpZiB0aGUgdG9rZW4gaXMgdmFsaWRcbiAgICBjb25zdCBidWNrZXQgPSByb3V0ZXIuYnVja2V0c1tidWNrZXROYW1lXTtcbiAgICBpZiAoIWJ1Y2tldCkge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogYEJ1Y2tldCAke2J1Y2tldE5hbWV9IG5vdCBmb3VuZGAsXG4gICAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBhd2FpdCBwcm92aWRlci5jb25maXJtVXBsb2FkKHtcbiAgICAgICAgYnVja2V0LFxuICAgICAgICB1cmw6IHVucHJveHlVcmwodXJsKVxuICAgIH0pO1xuICAgIGxvZy5kZWJ1ZygnRmluaXNoZWQgW2NvbmZpcm1VcGxvYWRdJyk7XG4gICAgcmV0dXJuIHJlcztcbn1cbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUZpbGUocGFyYW1zKSB7XG4gICAgY29uc3QgeyBwcm92aWRlciwgcm91dGVyLCBjdHhUb2tlbiwgYm9keTogeyBidWNrZXROYW1lLCB1cmwgfSB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGxvZyA9IGdsb2JhbFRoaXMuX0VER0VfU1RPUkVfTE9HR0VSO1xuICAgIGxvZy5kZWJ1ZygnUnVubmluZyBbZGVsZXRlRmlsZV0nLCB7XG4gICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgIHVybFxuICAgIH0pO1xuICAgIGlmICghY3R4VG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdNaXNzaW5nIGVkZ2VzdG9yZS1jdHggY29va2llJyxcbiAgICAgICAgICAgIGNvZGU6ICdVTkFVVEhPUklaRUQnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBjdHggPSBhd2FpdCBnZXRDb250ZXh0KGN0eFRva2VuKTtcbiAgICBjb25zdCBidWNrZXQgPSByb3V0ZXIuYnVja2V0c1tidWNrZXROYW1lXTtcbiAgICBpZiAoIWJ1Y2tldCkge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogYEJ1Y2tldCAke2J1Y2tldE5hbWV9IG5vdCBmb3VuZGAsXG4gICAgICAgICAgICBjb2RlOiAnQkFEX1JFUVVFU1QnXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoIWJ1Y2tldC5fZGVmLmJlZm9yZURlbGV0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgbWVzc2FnZTogJ1lvdSBuZWVkIHRvIGRlZmluZSBiZWZvcmVEZWxldGUgaWYgeW91IHdhbnQgdG8gZGVsZXRlIGZpbGVzIGRpcmVjdGx5IGZyb20gdGhlIGZyb250ZW5kLicsXG4gICAgICAgICAgICBjb2RlOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgZmlsZUluZm8gPSBhd2FpdCBwcm92aWRlci5nZXRGaWxlKHtcbiAgICAgICAgdXJsOiB1bnByb3h5VXJsKHVybClcbiAgICB9KTtcbiAgICBjb25zdCBjYW5EZWxldGUgPSBhd2FpdCBidWNrZXQuX2RlZi5iZWZvcmVEZWxldGUoe1xuICAgICAgICBjdHgsXG4gICAgICAgIGZpbGVJbmZvXG4gICAgfSk7XG4gICAgaWYgKCFjYW5EZWxldGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUVycm9yKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWxldGUgbm90IGFsbG93ZWQgZm9yIHRoZSBjdXJyZW50IGNvbnRleHQnLFxuICAgICAgICAgICAgY29kZTogJ0RFTEVURV9OT1RfQUxMT1dFRCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHByb3ZpZGVyLmRlbGV0ZUZpbGUoe1xuICAgICAgICBidWNrZXQsXG4gICAgICAgIHVybDogdW5wcm94eVVybCh1cmwpXG4gICAgfSk7XG4gICAgbG9nLmRlYnVnKCdGaW5pc2hlZCBbZGVsZXRlRmlsZV0nKTtcbiAgICByZXR1cm4gcmVzO1xufVxuYXN5bmMgZnVuY3Rpb24gZW5jcnlwdEpXVChjdHgpIHtcbiAgICBjb25zdCBzZWNyZXQgPSBwcm9jZXNzLmVudi5FREdFX1NUT1JFX0pXVF9TRUNSRVQgPz8gcHJvY2Vzcy5lbnYuRURHRV9TVE9SRV9TRUNSRVRfS0VZO1xuICAgIGlmICghc2VjcmV0KSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiAnRURHRV9TVE9SRV9KV1RfU0VDUkVUIG9yIEVER0VfU1RPUkVfU0VDUkVUX0tFWSBpcyBub3QgZGVmaW5lZCcsXG4gICAgICAgICAgICBjb2RlOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgZW5jcnlwdGlvblNlY3JldCA9IGF3YWl0IGdldERlcml2ZWRFbmNyeXB0aW9uS2V5KHNlY3JldCk7XG4gICAgcmV0dXJuIGF3YWl0IG5ldyBFbmNyeXB0SldUKGN0eCkuc2V0UHJvdGVjdGVkSGVhZGVyKHtcbiAgICAgICAgYWxnOiAnZGlyJyxcbiAgICAgICAgZW5jOiAnQTI1NkdDTSdcbiAgICB9KS5zZXRJc3N1ZWRBdCgpLnNldEV4cGlyYXRpb25UaW1lKERhdGUubm93KCkgLyAxMDAwICsgREVGQVVMVF9NQVhfQUdFKS5zZXRKdGkodjQoKSkuZW5jcnlwdChlbmNyeXB0aW9uU2VjcmV0KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGRlY3J5cHRKV1QodG9rZW4pIHtcbiAgICBjb25zdCBzZWNyZXQgPSBwcm9jZXNzLmVudi5FREdFX1NUT1JFX0pXVF9TRUNSRVQgPz8gcHJvY2Vzcy5lbnYuRURHRV9TVE9SRV9TRUNSRVRfS0VZO1xuICAgIGlmICghc2VjcmV0KSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVFcnJvcih7XG4gICAgICAgICAgICBtZXNzYWdlOiAnRURHRV9TVE9SRV9KV1RfU0VDUkVUIG9yIEVER0VfU1RPUkVfU0VDUkVUX0tFWSBpcyBub3QgZGVmaW5lZCcsXG4gICAgICAgICAgICBjb2RlOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgZW5jcnlwdGlvblNlY3JldCA9IGF3YWl0IGdldERlcml2ZWRFbmNyeXB0aW9uS2V5KHNlY3JldCk7XG4gICAgY29uc3QgeyBwYXlsb2FkIH0gPSBhd2FpdCBqd3REZWNyeXB0KHRva2VuLCBlbmNyeXB0aW9uU2VjcmV0LCB7XG4gICAgICAgIGNsb2NrVG9sZXJhbmNlOiAxNVxuICAgIH0pO1xuICAgIHJldHVybiBwYXlsb2FkO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0RGVyaXZlZEVuY3J5cHRpb25LZXkoc2VjcmV0KSB7XG4gICAgcmV0dXJuIGF3YWl0IGhrZGYoJ3NoYTI1NicsIHNlY3JldCwgJycsICdFZGdlIFN0b3JlIEdlbmVyYXRlZCBFbmNyeXB0aW9uIEtleScsIDMyKTtcbn1cbmZ1bmN0aW9uIGJ1aWxkUGF0aChwYXJhbXMpIHtcbiAgICBjb25zdCB7IGJ1Y2tldCB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IHBhdGhQYXJhbXMgPSBidWNrZXQuX2RlZi5wYXRoO1xuICAgIGNvbnN0IHBhdGggPSBwYXRoUGFyYW1zLm1hcCgocGFyYW0pPT57XG4gICAgICAgIGNvbnN0IHBhcmFtRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHBhcmFtKTtcbiAgICAgICAgaWYgKHBhcmFtRW50cmllc1swXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBFbXB0eSBwYXRoIHBhcmFtIGZvdW5kIGluOiAke0pTT04uc3RyaW5naWZ5KHBhdGhQYXJhbXMpfWAsXG4gICAgICAgICAgICAgICAgY29kZTogJ1NFUlZFUl9FUlJPUidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHBhcmFtRW50cmllc1swXTtcbiAgICAgICAgLy8gdGhpcyBpcyBhIHN0cmluZyBsaWtlOiBcImN0eC54eHhcIiBvciBcImlucHV0Lnl5eS56enpcIlxuICAgICAgICBjb25zdCBjdXJyUGFyYW1WYWwgPSB2YWx1ZSgpLnNwbGl0KCcuJykucmVkdWNlKChhY2MyLCBrZXkpPT57XG4gICAgICAgICAgICBpZiAoYWNjMltrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgTWlzc2luZyBrZXkgJHtrZXl9IGluICR7SlNPTi5zdHJpbmdpZnkoYWNjMil9YCxcbiAgICAgICAgICAgICAgICAgICAgY29kZTogJ0JBRF9SRVFVRVNUJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFjYzJba2V5XTtcbiAgICAgICAgfSwgcGFyYW1zLnBhdGhBdHRycyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICB2YWx1ZTogY3VyclBhcmFtVmFsXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHBhdGg7XG59XG5mdW5jdGlvbiBwYXJzZVBhdGgocGF0aCkge1xuICAgIGNvbnN0IHBhcnNlZFBhdGggPSBwYXRoLnJlZHVjZSgoYWNjLCBjdXJyKT0+e1xuICAgICAgICBhY2NbY3Vyci5rZXldID0gY3Vyci52YWx1ZTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG4gICAgY29uc3QgcGF0aE9yZGVyID0gcGF0aC5tYXAoKHApPT5wLmtleSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcGFyc2VkUGF0aCxcbiAgICAgICAgcGF0aE9yZGVyXG4gICAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldENvbnRleHQodG9rZW4pIHtcbiAgICByZXR1cm4gYXdhaXQgZGVjcnlwdEpXVCh0b2tlbik7XG59XG4vKipcbiAqIE9uIGxvY2FsIGRldmVsb3BtZW50LCBwcm90ZWN0ZWQgZmlsZXMgYXJlIHByb3hpZWQgdG8gdGhlIHNlcnZlcixcbiAqIHdoaWNoIGNoYW5nZXMgdGhlIG9yaWdpbmFsIFVSTC5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZ2V0IHRoZSBvcmlnaW5hbCBVUkwsXG4gKiBzbyB0aGF0IHdlIGNhbiBkZWxldGUgb3IgY29uZmlybSB0aGUgdXBsb2FkLlxuICovIGZ1bmN0aW9uIHVucHJveHlVcmwodXJsKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHVybC5zdGFydHNXaXRoKCdodHRwOi8vJykpIHtcbiAgICAgICAgLy8gZ2V0IHRoZSB1cmwgcGFyYW0gZnJvbSB0aGUgcXVlcnkgc3RyaW5nXG4gICAgICAgIGNvbnN0IHVybFBhcmFtID0gbmV3IFVSTCh1cmwpLnNlYXJjaFBhcmFtcy5nZXQoJ3VybCcpO1xuICAgICAgICBpZiAodXJsUGFyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiB1cmxQYXJhbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXJsO1xufVxuXG5leHBvcnQgeyByZXF1ZXN0VXBsb2FkUGFydHMgYXMgYSwgYnVpbGRQYXRoIGFzIGIsIGNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkIGFzIGMsIGNvbmZpcm1VcGxvYWQgYXMgZCwgZGVsZXRlRmlsZSBhcyBlLCBpbml0IGFzIGksIHBhcnNlUGF0aCBhcyBwLCByZXF1ZXN0VXBsb2FkIGFzIHIgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/shared-039276af.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/utils-f6f56d38.mjs":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/utils-f6f56d38.mjs ***!
  \****************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   L: () => (/* binding */ Logger),\n/* harmony export */   m: () => (/* binding */ matchPath)\n/* harmony export */ });\n/* eslint-disable no-console */ function _define_property(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\nconst logLevel = [\n    'debug',\n    'info',\n    'warn',\n    'error',\n    'none'\n];\nclass Logger {\n    shouldLog(level) {\n        return logLevel.indexOf(level) >= logLevel.indexOf(this.logLevel);\n    }\n    debug(message, ...optionalParams) {\n        if (this.shouldLog('debug')) {\n            console.debug('[EdgeStoreDebug]', message, ...optionalParams);\n        }\n    }\n    info(message, ...optionalParams) {\n        if (this.shouldLog('info')) {\n            console.info('[EdgeStoreInfo]', message, ...optionalParams);\n        }\n    }\n    warn(message, ...optionalParams) {\n        if (this.shouldLog('warn')) {\n            console.warn('[EdgeStoreWarn]', message, ...optionalParams);\n        }\n    }\n    error(message, ...optionalParams) {\n        if (this.shouldLog('error')) {\n            console.error('[EdgeStoreError]', message, ...optionalParams);\n        }\n    }\n    constructor(logLevel){\n        _define_property(this, \"logLevel\", void 0);\n        this.logLevel = logLevel ?? ( false ? 0 : 'info');\n    }\n}\n\n/**\n * Check if a route matches the current path.\n */ function matchPath(pathname, route) {\n    // Allow trailing slash\n    // Allow query string\n    const regex = new RegExp(`${route}/?(\\\\?.*)?$`);\n    return regex.test(pathname);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStzZXJ2ZXJAMC4yLjJfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfem9kQDMuMjMuOC9ub2RlX21vZHVsZXMvQGVkZ2VzdG9yZS9zZXJ2ZXIvZGlzdC91dGlscy1mNmY1NmQzOC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsTUFBcUMsR0FBRyxDQUFPO0FBQ3BGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxNQUFNO0FBQ3RDO0FBQ0E7O0FBRXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmxpbmstZS1jb21tZXJjZS8uL25vZGVfbW9kdWxlcy8ucG5wbS9AZWRnZXN0b3JlK3NlcnZlckAwLjIuMl9yZWFjdC1kb21AMTguMy4xX3JlYWN0QDE4LjMuMV96b2RAMy4yMy44L25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3NlcnZlci9kaXN0L3V0aWxzLWY2ZjU2ZDM4Lm1qcz9hNjhjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8gZnVuY3Rpb24gX2RlZmluZV9wcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufVxuY29uc3QgbG9nTGV2ZWwgPSBbXG4gICAgJ2RlYnVnJyxcbiAgICAnaW5mbycsXG4gICAgJ3dhcm4nLFxuICAgICdlcnJvcicsXG4gICAgJ25vbmUnXG5dO1xuY2xhc3MgTG9nZ2VyIHtcbiAgICBzaG91bGRMb2cobGV2ZWwpIHtcbiAgICAgICAgcmV0dXJuIGxvZ0xldmVsLmluZGV4T2YobGV2ZWwpID49IGxvZ0xldmVsLmluZGV4T2YodGhpcy5sb2dMZXZlbCk7XG4gICAgfVxuICAgIGRlYnVnKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZExvZygnZGVidWcnKSkge1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnW0VkZ2VTdG9yZURlYnVnXScsIG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbmZvKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZExvZygnaW5mbycpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ1tFZGdlU3RvcmVJbmZvXScsIG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3YXJuKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZExvZygnd2FybicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1tFZGdlU3RvcmVXYXJuXScsIG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlcnJvcihtZXNzYWdlLCAuLi5vcHRpb25hbFBhcmFtcykge1xuICAgICAgICBpZiAodGhpcy5zaG91bGRMb2coJ2Vycm9yJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tFZGdlU3RvcmVFcnJvcl0nLCBtZXNzYWdlLCAuLi5vcHRpb25hbFBhcmFtcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3RydWN0b3IobG9nTGV2ZWwpe1xuICAgICAgICBfZGVmaW5lX3Byb3BlcnR5KHRoaXMsIFwibG9nTGV2ZWxcIiwgdm9pZCAwKTtcbiAgICAgICAgdGhpcy5sb2dMZXZlbCA9IGxvZ0xldmVsID8/IChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gJ2Vycm9yJyA6ICdpbmZvJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgcm91dGUgbWF0Y2hlcyB0aGUgY3VycmVudCBwYXRoLlxuICovIGZ1bmN0aW9uIG1hdGNoUGF0aChwYXRobmFtZSwgcm91dGUpIHtcbiAgICAvLyBBbGxvdyB0cmFpbGluZyBzbGFzaFxuICAgIC8vIEFsbG93IHF1ZXJ5IHN0cmluZ1xuICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgJHtyb3V0ZX0vPyhcXFxcPy4qKT8kYCk7XG4gICAgcmV0dXJuIHJlZ2V4LnRlc3QocGF0aG5hbWUpO1xufVxuXG5leHBvcnQgeyBMb2dnZXIgYXMgTCwgbWF0Y2hQYXRoIGFzIG0gfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/@edgestore+server@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/server/dist/utils-f6f56d38.mjs\n");

/***/ })

};
;