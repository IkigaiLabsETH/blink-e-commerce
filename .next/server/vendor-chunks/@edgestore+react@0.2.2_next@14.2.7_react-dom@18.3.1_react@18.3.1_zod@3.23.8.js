"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@edgestore+react@0.2.2_next@14.2.7_react-dom@18.3.1_react@18.3.1_zod@3.23.8";
exports.ids = ["vendor-chunks/@edgestore+react@0.2.2_next@14.2.7_react-dom@18.3.1_react@18.3.1_zod@3.23.8"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@edgestore+react@0.2.2_next@14.2.7_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/react/dist/index.mjs":
/*!*****************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@edgestore+react@0.2.2_next@14.2.7_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/react/dist/index.mjs ***!
  \*****************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEdgeStoreProvider: () => (/* binding */ createEdgeStoreProvider)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@14.2.7_@babel+core@7.25.2_react-dom@18.3.1_react@18.3.1/node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _edgestore_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @edgestore/shared */ \"(ssr)/./node_modules/.pnpm/@edgestore+shared@0.2.2_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/shared/dist/index.mjs\");\n/* harmony import */ var _uploadAbortedError_e1379bb0_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./uploadAbortedError-e1379bb0.mjs */ \"(ssr)/./node_modules/.pnpm/@edgestore+react@0.2.2_next@14.2.7_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/react/dist/uploadAbortedError-e1379bb0.mjs\");\n\n\n\n\nclass EdgeStoreClientError extends Error {\n    constructor(message){\n        super(message);\n        this.name = 'EdgeStoreError';\n    }\n}\n\nasync function handleError(res) {\n    let json = {};\n    try {\n        json = await res.json();\n    } catch (err) {\n        throw new EdgeStoreClientError(`Failed to parse response. Make sure the api is correctly configured at ${res.url}`);\n    }\n    throw new _edgestore_shared__WEBPACK_IMPORTED_MODULE_1__.EdgeStoreApiClientError({\n        response: json\n    });\n}\n\nfunction createNextProxy({ apiPath, uploadingCountRef, maxConcurrentUploads = 5 }) {\n    return new Proxy({}, {\n        get (_, prop) {\n            const bucketName = prop;\n            const bucketFunctions = {\n                upload: async (params)=>{\n                    try {\n                        params.onProgressChange?.(0);\n                        // This handles the case where the user cancels the upload while it's waiting in the queue\n                        const abortPromise = new Promise((resolve)=>{\n                            params.signal?.addEventListener('abort', ()=>{\n                                resolve();\n                            }, {\n                                once: true\n                            });\n                        });\n                        while(uploadingCountRef.current >= maxConcurrentUploads && uploadingCountRef.current > 0){\n                            await Promise.race([\n                                new Promise((resolve)=>setTimeout(resolve, 300)),\n                                abortPromise\n                            ]);\n                            if (params.signal?.aborted) {\n                                throw new _uploadAbortedError_e1379bb0_mjs__WEBPACK_IMPORTED_MODULE_2__.U('File upload aborted');\n                            }\n                        }\n                        uploadingCountRef.current++;\n                        const fileInfo = await uploadFile(params, {\n                            bucketName: bucketName,\n                            apiPath\n                        });\n                        return fileInfo;\n                    } finally{\n                        uploadingCountRef.current--;\n                    }\n                },\n                confirmUpload: async (params)=>{\n                    const { success } = await confirmUpload(params, {\n                        bucketName: bucketName,\n                        apiPath\n                    });\n                    if (!success) {\n                        throw new EdgeStoreClientError('Failed to confirm upload');\n                    }\n                },\n                delete: async (params)=>{\n                    const { success } = await deleteFile(params, {\n                        bucketName: bucketName,\n                        apiPath\n                    });\n                    if (!success) {\n                        throw new EdgeStoreClientError('Failed to delete file');\n                    }\n                }\n            };\n            return bucketFunctions;\n        }\n    });\n}\nasync function uploadFile({ file, signal, input, onProgressChange, options }, { apiPath, bucketName }) {\n    try {\n        onProgressChange?.(0);\n        const res = await fetch(`${apiPath}/request-upload`, {\n            method: 'POST',\n            credentials: 'include',\n            signal: signal,\n            body: JSON.stringify({\n                bucketName,\n                input,\n                fileInfo: {\n                    extension: file.name.split('.').pop(),\n                    type: file.type,\n                    size: file.size,\n                    fileName: options?.manualFileName,\n                    replaceTargetUrl: options?.replaceTargetUrl,\n                    temporary: options?.temporary\n                }\n            }),\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        });\n        if (!res.ok) {\n            await handleError(res);\n        }\n        const json = await res.json();\n        if ('multipart' in json) {\n            await multipartUpload({\n                bucketName,\n                multipartInfo: json.multipart,\n                onProgressChange,\n                signal,\n                file,\n                apiPath\n            });\n        } else if ('uploadUrl' in json) {\n            // Single part upload\n            // Upload the file to the signed URL and get the progress\n            await uploadFileInner({\n                file,\n                uploadUrl: json.uploadUrl,\n                onProgressChange,\n                signal\n            });\n        } else {\n            throw new EdgeStoreClientError('An error occurred');\n        }\n        return {\n            url: getUrl(json.accessUrl, apiPath),\n            thumbnailUrl: json.thumbnailUrl ? getUrl(json.thumbnailUrl, apiPath) : null,\n            size: json.size,\n            uploadedAt: new Date(json.uploadedAt),\n            path: json.path,\n            pathOrder: json.pathOrder,\n            metadata: json.metadata\n        };\n    } catch (e) {\n        if (e instanceof Error && e.name === 'AbortError') {\n            throw new _uploadAbortedError_e1379bb0_mjs__WEBPACK_IMPORTED_MODULE_2__.U('File upload aborted');\n        }\n        onProgressChange?.(0);\n        throw e;\n    }\n}\n/**\n * Protected files need third-party cookies to work.\n * Since third party cookies don't work on localhost,\n * we need to proxy the file through the server.\n */ function getUrl(url, apiPath) {\n    const mode = typeof process !== 'undefined' ? \"development\" :  false ? 0 : 'production';\n    if (mode === 'development' && !url.includes('/_public/')) {\n        const proxyUrl = new URL(window.location.origin);\n        proxyUrl.pathname = `${apiPath}/proxy-file`;\n        proxyUrl.search = new URLSearchParams({\n            url\n        }).toString();\n        return proxyUrl.toString();\n    }\n    return url;\n}\nasync function uploadFileInner(props) {\n    const { file, uploadUrl, onProgressChange, signal } = props;\n    const promise = new Promise((resolve, reject)=>{\n        if (signal?.aborted) {\n            reject(new _uploadAbortedError_e1379bb0_mjs__WEBPACK_IMPORTED_MODULE_2__.U('File upload aborted'));\n            return;\n        }\n        const request = new XMLHttpRequest();\n        request.open('PUT', uploadUrl);\n        // This is for Azure provider. Specifies the blob type\n        request.setRequestHeader('x-ms-blob-type', 'BlockBlob');\n        request.addEventListener('loadstart', ()=>{\n            onProgressChange?.(0);\n        });\n        request.upload.addEventListener('progress', (e)=>{\n            if (e.lengthComputable) {\n                // 2 decimal progress\n                const progress = Math.round(e.loaded / e.total * 10000) / 100;\n                onProgressChange?.(progress);\n            }\n        });\n        request.addEventListener('error', ()=>{\n            reject(new Error('Error uploading file'));\n        });\n        request.addEventListener('abort', ()=>{\n            reject(new _uploadAbortedError_e1379bb0_mjs__WEBPACK_IMPORTED_MODULE_2__.U('File upload aborted'));\n        });\n        request.addEventListener('loadend', ()=>{\n            // Return the ETag header (needed to complete multipart upload)\n            resolve(request.getResponseHeader('ETag'));\n        });\n        if (signal) {\n            signal.addEventListener('abort', ()=>{\n                request.abort();\n            });\n        }\n        request.send(file);\n    });\n    return promise;\n}\nasync function multipartUpload(params) {\n    const { bucketName, multipartInfo, onProgressChange, file, signal, apiPath } = params;\n    const { partSize, parts, totalParts, uploadId, key } = multipartInfo;\n    const uploadingParts = [];\n    const uploadPart = async (params)=>{\n        const { part, chunk } = params;\n        const { uploadUrl } = part;\n        const eTag = await uploadFileInner({\n            file: chunk,\n            uploadUrl,\n            signal,\n            onProgressChange: (progress)=>{\n                const uploadingPart = uploadingParts.find((p)=>p.partNumber === part.partNumber);\n                if (uploadingPart) {\n                    uploadingPart.progress = progress;\n                } else {\n                    uploadingParts.push({\n                        partNumber: part.partNumber,\n                        progress\n                    });\n                }\n                const totalProgress = Math.round(uploadingParts.reduce((acc, p)=>acc + p.progress * 100, 0) / totalParts) / 100;\n                onProgressChange?.(totalProgress);\n            }\n        });\n        if (!eTag) {\n            throw new EdgeStoreClientError('Could not get ETag from multipart response');\n        }\n        return {\n            partNumber: part.partNumber,\n            eTag\n        };\n    };\n    // Upload the parts in parallel\n    const completedParts = await queuedPromises({\n        items: parts.map((part)=>({\n                part,\n                chunk: file.slice((part.partNumber - 1) * partSize, part.partNumber * partSize)\n            })),\n        fn: uploadPart,\n        maxParallel: 5,\n        maxRetries: 10\n    });\n    // Complete multipart upload\n    const res = await fetch(`${apiPath}/complete-multipart-upload`, {\n        method: 'POST',\n        credentials: 'include',\n        body: JSON.stringify({\n            bucketName,\n            uploadId,\n            key,\n            parts: completedParts\n        }),\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    });\n    if (!res.ok) {\n        await handleError(res);\n    }\n}\nasync function confirmUpload({ url }, { apiPath, bucketName }) {\n    const res = await fetch(`${apiPath}/confirm-upload`, {\n        method: 'POST',\n        credentials: 'include',\n        body: JSON.stringify({\n            url,\n            bucketName\n        }),\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    });\n    if (!res.ok) {\n        await handleError(res);\n    }\n    return res.json();\n}\nasync function deleteFile({ url }, { apiPath, bucketName }) {\n    const res = await fetch(`${apiPath}/delete-file`, {\n        method: 'POST',\n        credentials: 'include',\n        body: JSON.stringify({\n            url,\n            bucketName\n        }),\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    });\n    if (!res.ok) {\n        await handleError(res);\n    }\n    return res.json();\n}\nasync function queuedPromises({ items, fn, maxParallel, maxRetries = 0 }) {\n    const results = new Array(items.length);\n    const executeWithRetry = async (func, retries)=>{\n        try {\n            return await func();\n        } catch (error) {\n            if (error instanceof _uploadAbortedError_e1379bb0_mjs__WEBPACK_IMPORTED_MODULE_2__.U) {\n                throw error;\n            }\n            if (retries > 0) {\n                await new Promise((resolve)=>setTimeout(resolve, 5000));\n                return executeWithRetry(func, retries - 1);\n            } else {\n                throw error;\n            }\n        }\n    };\n    const semaphore = {\n        count: maxParallel,\n        async wait () {\n            // If we've reached our maximum concurrency, or it's the last item, wait\n            while(this.count <= 0)await new Promise((resolve)=>setTimeout(resolve, 500));\n            this.count--;\n        },\n        signal () {\n            this.count++;\n        }\n    };\n    const tasks = items.map((item, i)=>(async ()=>{\n            await semaphore.wait();\n            try {\n                const result = await executeWithRetry(()=>fn(item), maxRetries);\n                results[i] = result;\n            } finally{\n                semaphore.signal();\n            }\n        })());\n    await Promise.all(tasks);\n    return results;\n}\n\nconst DEFAULT_BASE_URL = (typeof process !== 'undefined' ? process.env.NEXT_PUBLIC_EDGE_STORE_BASE_URL :  undefined) ?? 'https://files.edgestore.dev';\nfunction createEdgeStoreProvider(opts) {\n    const EdgeStoreContext = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createContext(undefined);\n    const EdgeStoreProvider = ({ children, basePath })=>{\n        return EdgeStoreProviderInner({\n            children,\n            context: EdgeStoreContext,\n            basePath,\n            maxConcurrentUploads: opts?.maxConcurrentUploads\n        });\n    };\n    function useEdgeStore() {\n        if (!EdgeStoreContext) {\n            throw new Error('React Context is unavailable in Server Components');\n        }\n        // @ts-expect-error - We know that the context value should not be undefined\n        const value = react__WEBPACK_IMPORTED_MODULE_0__.useContext(EdgeStoreContext);\n        if (!value && \"development\" !== 'production') {\n            throw new Error('[edgestore]: `useEdgeStore` must be wrapped in a <EdgeStoreProvider />');\n        }\n        return value;\n    }\n    return {\n        EdgeStoreProvider,\n        useEdgeStore\n    };\n}\nfunction EdgeStoreProviderInner({ children, context, basePath, maxConcurrentUploads }) {\n    const apiPath = basePath ? `${basePath}` : '/api/edgestore';\n    const [state, setState] = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n        loading: true,\n        initialized: false,\n        error: false\n    });\n    const uploadingCountRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(0);\n    const initExecuted = react__WEBPACK_IMPORTED_MODULE_0__.useRef(false); // to make sure we don't run init twice\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(()=>{\n        if (!initExecuted.current) {\n            void init();\n        }\n        return ()=>{\n            initExecuted.current = true;\n        };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    async function init() {\n        try {\n            setState({\n                loading: true,\n                initialized: false,\n                error: false\n            });\n            const res = await fetch(`${apiPath}/init`, {\n                method: 'POST',\n                credentials: 'include'\n            });\n            if (res.ok) {\n                const json = await res.json();\n                const innerRes = await fetch(`${DEFAULT_BASE_URL}/_init`, {\n                    method: 'GET',\n                    credentials: 'include',\n                    headers: {\n                        'x-edgestore-token': json.token\n                    }\n                });\n                if (innerRes.ok) {\n                    // update state\n                    setState({\n                        loading: false,\n                        initialized: true,\n                        error: false\n                    });\n                } else {\n                    setState({\n                        loading: false,\n                        initialized: false,\n                        error: true\n                    });\n                    throw new EdgeStoreClientError(\"Couldn't initialize Edge Store.\");\n                }\n            } else {\n                setState({\n                    loading: false,\n                    initialized: false,\n                    error: true\n                });\n                await handleError(res);\n            }\n        } catch (err) {\n            setState({\n                loading: false,\n                initialized: false,\n                error: true\n            });\n            throw err;\n        }\n    }\n    async function reset() {\n        await init();\n    }\n    return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(context.Provider, {\n        value: {\n            edgestore: createNextProxy({\n                apiPath,\n                uploadingCountRef,\n                maxConcurrentUploads\n            }),\n            reset,\n            state\n        }\n    }, children));\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStyZWFjdEAwLjIuMl9uZXh0QDE0LjIuN19yZWFjdC1kb21AMTguMy4xX3JlYWN0QDE4LjMuMV96b2RAMy4yMy44L25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3JlYWN0L2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0I7QUFDNkI7QUFDZ0I7O0FBRTVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixpSEFBaUgsUUFBUTtBQUN6SDtBQUNBLGNBQWMsc0VBQXVCO0FBQ3JDO0FBQ0EsS0FBSztBQUNMOztBQUVBLDJCQUEyQixzREFBc0Q7QUFDakYsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsK0RBQWtCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsNEJBQTRCLFVBQVU7QUFDdEM7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSw0QkFBNEIsVUFBVTtBQUN0QztBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNEJBQTRCLGdEQUFnRCxJQUFJLHFCQUFxQjtBQUNyRztBQUNBO0FBQ0EsbUNBQW1DLFFBQVE7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxtREFBbUQ7QUFDckYsa0NBQWtDLFNBQVM7QUFDM0MsOEJBQThCLDJDQUFjO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCw4QkFBOEIseUNBQVk7QUFDMUMseUJBQXlCLHlDQUFZLFNBQVM7QUFDOUMsSUFBSSw0Q0FBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsdUNBQXVDLFFBQVE7QUFDL0M7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZ0RBQWdELGlCQUFpQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixnREFBbUIsQ0FBQywyQ0FBYyxzQkFBc0IsZ0RBQW1CO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVtQyIsInNvdXJjZXMiOlsid2VicGFjazovL2JsaW5rLWUtY29tbWVyY2UvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStyZWFjdEAwLjIuMl9uZXh0QDE0LjIuN19yZWFjdC1kb21AMTguMy4xX3JlYWN0QDE4LjMuMV96b2RAMy4yMy44L25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3JlYWN0L2Rpc3QvaW5kZXgubWpzP2RmYWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRWRnZVN0b3JlQXBpQ2xpZW50RXJyb3IgfSBmcm9tICdAZWRnZXN0b3JlL3NoYXJlZCc7XG5pbXBvcnQgeyBVIGFzIFVwbG9hZEFib3J0ZWRFcnJvciB9IGZyb20gJy4vdXBsb2FkQWJvcnRlZEVycm9yLWUxMzc5YmIwLm1qcyc7XG5cbmNsYXNzIEVkZ2VTdG9yZUNsaWVudEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2Upe1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gJ0VkZ2VTdG9yZUVycm9yJztcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUVycm9yKHJlcykge1xuICAgIGxldCBqc29uID0ge307XG4gICAgdHJ5IHtcbiAgICAgICAganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRocm93IG5ldyBFZGdlU3RvcmVDbGllbnRFcnJvcihgRmFpbGVkIHRvIHBhcnNlIHJlc3BvbnNlLiBNYWtlIHN1cmUgdGhlIGFwaSBpcyBjb3JyZWN0bHkgY29uZmlndXJlZCBhdCAke3Jlcy51cmx9YCk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFZGdlU3RvcmVBcGlDbGllbnRFcnJvcih7XG4gICAgICAgIHJlc3BvbnNlOiBqc29uXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5leHRQcm94eSh7IGFwaVBhdGgsIHVwbG9hZGluZ0NvdW50UmVmLCBtYXhDb25jdXJyZW50VXBsb2FkcyA9IDUgfSkge1xuICAgIHJldHVybiBuZXcgUHJveHkoe30sIHtcbiAgICAgICAgZ2V0IChfLCBwcm9wKSB7XG4gICAgICAgICAgICBjb25zdCBidWNrZXROYW1lID0gcHJvcDtcbiAgICAgICAgICAgIGNvbnN0IGJ1Y2tldEZ1bmN0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICB1cGxvYWQ6IGFzeW5jIChwYXJhbXMpPT57XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMub25Qcm9ncmVzc0NoYW5nZT8uKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBoYW5kbGVzIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGNhbmNlbHMgdGhlIHVwbG9hZCB3aGlsZSBpdCdzIHdhaXRpbmcgaW4gdGhlIHF1ZXVlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhYm9ydFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSk9PntcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMuc2lnbmFsPy5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpPT57XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uY2U6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUodXBsb2FkaW5nQ291bnRSZWYuY3VycmVudCA+PSBtYXhDb25jdXJyZW50VXBsb2FkcyAmJiB1cGxvYWRpbmdDb3VudFJlZi5jdXJyZW50ID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5yYWNlKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFByb21pc2UoKHJlc29sdmUpPT5zZXRUaW1lb3V0KHJlc29sdmUsIDMwMCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydFByb21pc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkQWJvcnRlZEVycm9yKCdGaWxlIHVwbG9hZCBhYm9ydGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkaW5nQ291bnRSZWYuY3VycmVudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZUluZm8gPSBhd2FpdCB1cGxvYWRGaWxlKHBhcmFtcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1Y2tldE5hbWU6IGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpUGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZUluZm87XG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZGluZ0NvdW50UmVmLmN1cnJlbnQtLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29uZmlybVVwbG9hZDogYXN5bmMgKHBhcmFtcyk9PntcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBzdWNjZXNzIH0gPSBhd2FpdCBjb25maXJtVXBsb2FkKHBhcmFtcywge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0TmFtZTogYnVja2V0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaVBhdGhcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUNsaWVudEVycm9yKCdGYWlsZWQgdG8gY29uZmlybSB1cGxvYWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVsZXRlOiBhc3luYyAocGFyYW1zKT0+e1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHN1Y2Nlc3MgfSA9IGF3YWl0IGRlbGV0ZUZpbGUocGFyYW1zLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWNrZXROYW1lOiBidWNrZXROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpUGF0aFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlQ2xpZW50RXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgZmlsZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBidWNrZXRGdW5jdGlvbnM7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHVwbG9hZEZpbGUoeyBmaWxlLCBzaWduYWwsIGlucHV0LCBvblByb2dyZXNzQ2hhbmdlLCBvcHRpb25zIH0sIHsgYXBpUGF0aCwgYnVja2V0TmFtZSB9KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgb25Qcm9ncmVzc0NoYW5nZT8uKDApO1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHthcGlQYXRofS9yZXF1ZXN0LXVwbG9hZGAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgICAgIHNpZ25hbDogc2lnbmFsLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGJ1Y2tldE5hbWUsXG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgZmlsZUluZm86IHtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5zaW9uOiBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZmlsZS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBvcHRpb25zPy5tYW51YWxGaWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcmVwbGFjZVRhcmdldFVybDogb3B0aW9ucz8ucmVwbGFjZVRhcmdldFVybCxcbiAgICAgICAgICAgICAgICAgICAgdGVtcG9yYXJ5OiBvcHRpb25zPy50ZW1wb3JhcnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlRXJyb3IocmVzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgaWYgKCdtdWx0aXBhcnQnIGluIGpzb24pIHtcbiAgICAgICAgICAgIGF3YWl0IG11bHRpcGFydFVwbG9hZCh7XG4gICAgICAgICAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgICAgICAgICBtdWx0aXBhcnRJbmZvOiBqc29uLm11bHRpcGFydCxcbiAgICAgICAgICAgICAgICBvblByb2dyZXNzQ2hhbmdlLFxuICAgICAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgICAgIGFwaVBhdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKCd1cGxvYWRVcmwnIGluIGpzb24pIHtcbiAgICAgICAgICAgIC8vIFNpbmdsZSBwYXJ0IHVwbG9hZFxuICAgICAgICAgICAgLy8gVXBsb2FkIHRoZSBmaWxlIHRvIHRoZSBzaWduZWQgVVJMIGFuZCBnZXQgdGhlIHByb2dyZXNzXG4gICAgICAgICAgICBhd2FpdCB1cGxvYWRGaWxlSW5uZXIoe1xuICAgICAgICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgICAgICAgdXBsb2FkVXJsOiBqc29uLnVwbG9hZFVybCxcbiAgICAgICAgICAgICAgICBvblByb2dyZXNzQ2hhbmdlLFxuICAgICAgICAgICAgICAgIHNpZ25hbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlQ2xpZW50RXJyb3IoJ0FuIGVycm9yIG9jY3VycmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVybDogZ2V0VXJsKGpzb24uYWNjZXNzVXJsLCBhcGlQYXRoKSxcbiAgICAgICAgICAgIHRodW1ibmFpbFVybDoganNvbi50aHVtYm5haWxVcmwgPyBnZXRVcmwoanNvbi50aHVtYm5haWxVcmwsIGFwaVBhdGgpIDogbnVsbCxcbiAgICAgICAgICAgIHNpemU6IGpzb24uc2l6ZSxcbiAgICAgICAgICAgIHVwbG9hZGVkQXQ6IG5ldyBEYXRlKGpzb24udXBsb2FkZWRBdCksXG4gICAgICAgICAgICBwYXRoOiBqc29uLnBhdGgsXG4gICAgICAgICAgICBwYXRoT3JkZXI6IGpzb24ucGF0aE9yZGVyLFxuICAgICAgICAgICAgbWV0YWRhdGE6IGpzb24ubWV0YWRhdGFcbiAgICAgICAgfTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVcGxvYWRBYm9ydGVkRXJyb3IoJ0ZpbGUgdXBsb2FkIGFib3J0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBvblByb2dyZXNzQ2hhbmdlPy4oMCk7XG4gICAgICAgIHRocm93IGU7XG4gICAgfVxufVxuLyoqXG4gKiBQcm90ZWN0ZWQgZmlsZXMgbmVlZCB0aGlyZC1wYXJ0eSBjb29raWVzIHRvIHdvcmsuXG4gKiBTaW5jZSB0aGlyZCBwYXJ0eSBjb29raWVzIGRvbid0IHdvcmsgb24gbG9jYWxob3N0LFxuICogd2UgbmVlZCB0byBwcm94eSB0aGUgZmlsZSB0aHJvdWdoIHRoZSBzZXJ2ZXIuXG4gKi8gZnVuY3Rpb24gZ2V0VXJsKHVybCwgYXBpUGF0aCkge1xuICAgIGNvbnN0IG1vZGUgPSB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgPyBwcm9jZXNzLmVudi5OT0RFX0VOViA6IGltcG9ydC5tZXRhLmVudj8uREVWID8gJ2RldmVsb3BtZW50JyA6ICdwcm9kdWN0aW9uJztcbiAgICBpZiAobW9kZSA9PT0gJ2RldmVsb3BtZW50JyAmJiAhdXJsLmluY2x1ZGVzKCcvX3B1YmxpYy8nKSkge1xuICAgICAgICBjb25zdCBwcm94eVVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLm9yaWdpbik7XG4gICAgICAgIHByb3h5VXJsLnBhdGhuYW1lID0gYCR7YXBpUGF0aH0vcHJveHktZmlsZWA7XG4gICAgICAgIHByb3h5VXJsLnNlYXJjaCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAgICAgdXJsXG4gICAgICAgIH0pLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBwcm94eVVybC50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gdXJsO1xufVxuYXN5bmMgZnVuY3Rpb24gdXBsb2FkRmlsZUlubmVyKHByb3BzKSB7XG4gICAgY29uc3QgeyBmaWxlLCB1cGxvYWRVcmwsIG9uUHJvZ3Jlc3NDaGFuZ2UsIHNpZ25hbCB9ID0gcHJvcHM7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpPT57XG4gICAgICAgIGlmIChzaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgVXBsb2FkQWJvcnRlZEVycm9yKCdGaWxlIHVwbG9hZCBhYm9ydGVkJykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgcmVxdWVzdC5vcGVuKCdQVVQnLCB1cGxvYWRVcmwpO1xuICAgICAgICAvLyBUaGlzIGlzIGZvciBBenVyZSBwcm92aWRlci4gU3BlY2lmaWVzIHRoZSBibG9iIHR5cGVcbiAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCd4LW1zLWJsb2ItdHlwZScsICdCbG9ja0Jsb2InKTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdsb2Fkc3RhcnQnLCAoKT0+e1xuICAgICAgICAgICAgb25Qcm9ncmVzc0NoYW5nZT8uKDApO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCAoZSk9PntcbiAgICAgICAgICAgIGlmIChlLmxlbmd0aENvbXB1dGFibGUpIHtcbiAgICAgICAgICAgICAgICAvLyAyIGRlY2ltYWwgcHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgucm91bmQoZS5sb2FkZWQgLyBlLnRvdGFsICogMTAwMDApIC8gMTAwO1xuICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3NDaGFuZ2U/Lihwcm9ncmVzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCk9PntcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0Vycm9yIHVwbG9hZGluZyBmaWxlJykpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpPT57XG4gICAgICAgICAgICByZWplY3QobmV3IFVwbG9hZEFib3J0ZWRFcnJvcignRmlsZSB1cGxvYWQgYWJvcnRlZCcpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsICgpPT57XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIEVUYWcgaGVhZGVyIChuZWVkZWQgdG8gY29tcGxldGUgbXVsdGlwYXJ0IHVwbG9hZClcbiAgICAgICAgICAgIHJlc29sdmUocmVxdWVzdC5nZXRSZXNwb25zZUhlYWRlcignRVRhZycpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzaWduYWwpIHtcbiAgICAgICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpPT57XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVxdWVzdC5zZW5kKGZpbGUpO1xuICAgIH0pO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuYXN5bmMgZnVuY3Rpb24gbXVsdGlwYXJ0VXBsb2FkKHBhcmFtcykge1xuICAgIGNvbnN0IHsgYnVja2V0TmFtZSwgbXVsdGlwYXJ0SW5mbywgb25Qcm9ncmVzc0NoYW5nZSwgZmlsZSwgc2lnbmFsLCBhcGlQYXRoIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgeyBwYXJ0U2l6ZSwgcGFydHMsIHRvdGFsUGFydHMsIHVwbG9hZElkLCBrZXkgfSA9IG11bHRpcGFydEluZm87XG4gICAgY29uc3QgdXBsb2FkaW5nUGFydHMgPSBbXTtcbiAgICBjb25zdCB1cGxvYWRQYXJ0ID0gYXN5bmMgKHBhcmFtcyk9PntcbiAgICAgICAgY29uc3QgeyBwYXJ0LCBjaHVuayB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCB7IHVwbG9hZFVybCB9ID0gcGFydDtcbiAgICAgICAgY29uc3QgZVRhZyA9IGF3YWl0IHVwbG9hZEZpbGVJbm5lcih7XG4gICAgICAgICAgICBmaWxlOiBjaHVuayxcbiAgICAgICAgICAgIHVwbG9hZFVybCxcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgIG9uUHJvZ3Jlc3NDaGFuZ2U6IChwcm9ncmVzcyk9PntcbiAgICAgICAgICAgICAgICBjb25zdCB1cGxvYWRpbmdQYXJ0ID0gdXBsb2FkaW5nUGFydHMuZmluZCgocCk9PnAucGFydE51bWJlciA9PT0gcGFydC5wYXJ0TnVtYmVyKTtcbiAgICAgICAgICAgICAgICBpZiAodXBsb2FkaW5nUGFydCkge1xuICAgICAgICAgICAgICAgICAgICB1cGxvYWRpbmdQYXJ0LnByb2dyZXNzID0gcHJvZ3Jlc3M7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkaW5nUGFydHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0TnVtYmVyOiBwYXJ0LnBhcnROdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdG90YWxQcm9ncmVzcyA9IE1hdGgucm91bmQodXBsb2FkaW5nUGFydHMucmVkdWNlKChhY2MsIHApPT5hY2MgKyBwLnByb2dyZXNzICogMTAwLCAwKSAvIHRvdGFsUGFydHMpIC8gMTAwO1xuICAgICAgICAgICAgICAgIG9uUHJvZ3Jlc3NDaGFuZ2U/Lih0b3RhbFByb2dyZXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghZVRhZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVkZ2VTdG9yZUNsaWVudEVycm9yKCdDb3VsZCBub3QgZ2V0IEVUYWcgZnJvbSBtdWx0aXBhcnQgcmVzcG9uc2UnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGFydE51bWJlcjogcGFydC5wYXJ0TnVtYmVyLFxuICAgICAgICAgICAgZVRhZ1xuICAgICAgICB9O1xuICAgIH07XG4gICAgLy8gVXBsb2FkIHRoZSBwYXJ0cyBpbiBwYXJhbGxlbFxuICAgIGNvbnN0IGNvbXBsZXRlZFBhcnRzID0gYXdhaXQgcXVldWVkUHJvbWlzZXMoe1xuICAgICAgICBpdGVtczogcGFydHMubWFwKChwYXJ0KT0+KHtcbiAgICAgICAgICAgICAgICBwYXJ0LFxuICAgICAgICAgICAgICAgIGNodW5rOiBmaWxlLnNsaWNlKChwYXJ0LnBhcnROdW1iZXIgLSAxKSAqIHBhcnRTaXplLCBwYXJ0LnBhcnROdW1iZXIgKiBwYXJ0U2l6ZSlcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgZm46IHVwbG9hZFBhcnQsXG4gICAgICAgIG1heFBhcmFsbGVsOiA1LFxuICAgICAgICBtYXhSZXRyaWVzOiAxMFxuICAgIH0pO1xuICAgIC8vIENvbXBsZXRlIG11bHRpcGFydCB1cGxvYWRcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHthcGlQYXRofS9jb21wbGV0ZS1tdWx0aXBhcnQtdXBsb2FkYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgYnVja2V0TmFtZSxcbiAgICAgICAgICAgIHVwbG9hZElkLFxuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgcGFydHM6IGNvbXBsZXRlZFBhcnRzXG4gICAgICAgIH0pLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICBhd2FpdCBoYW5kbGVFcnJvcihyZXMpO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1VcGxvYWQoeyB1cmwgfSwgeyBhcGlQYXRoLCBidWNrZXROYW1lIH0pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHthcGlQYXRofS9jb25maXJtLXVwbG9hZGAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIGJ1Y2tldE5hbWVcbiAgICAgICAgfSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIGF3YWl0IGhhbmRsZUVycm9yKHJlcyk7XG4gICAgfVxuICAgIHJldHVybiByZXMuanNvbigpO1xufVxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlRmlsZSh7IHVybCB9LCB7IGFwaVBhdGgsIGJ1Y2tldE5hbWUgfSkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2FwaVBhdGh9L2RlbGV0ZS1maWxlYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgY3JlZGVudGlhbHM6ICdpbmNsdWRlJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgYnVja2V0TmFtZVxuICAgICAgICB9KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgYXdhaXQgaGFuZGxlRXJyb3IocmVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy5qc29uKCk7XG59XG5hc3luYyBmdW5jdGlvbiBxdWV1ZWRQcm9taXNlcyh7IGl0ZW1zLCBmbiwgbWF4UGFyYWxsZWwsIG1heFJldHJpZXMgPSAwIH0pIHtcbiAgICBjb25zdCByZXN1bHRzID0gbmV3IEFycmF5KGl0ZW1zLmxlbmd0aCk7XG4gICAgY29uc3QgZXhlY3V0ZVdpdGhSZXRyeSA9IGFzeW5jIChmdW5jLCByZXRyaWVzKT0+e1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGZ1bmMoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFVwbG9hZEFib3J0ZWRFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJldHJpZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpPT5zZXRUaW1lb3V0KHJlc29sdmUsIDUwMDApKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhlY3V0ZVdpdGhSZXRyeShmdW5jLCByZXRyaWVzIC0gMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzZW1hcGhvcmUgPSB7XG4gICAgICAgIGNvdW50OiBtYXhQYXJhbGxlbCxcbiAgICAgICAgYXN5bmMgd2FpdCAoKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSd2ZSByZWFjaGVkIG91ciBtYXhpbXVtIGNvbmN1cnJlbmN5LCBvciBpdCdzIHRoZSBsYXN0IGl0ZW0sIHdhaXRcbiAgICAgICAgICAgIHdoaWxlKHRoaXMuY291bnQgPD0gMClhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSk9PnNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7XG4gICAgICAgICAgICB0aGlzLmNvdW50LS07XG4gICAgICAgIH0sXG4gICAgICAgIHNpZ25hbCAoKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50Kys7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IHRhc2tzID0gaXRlbXMubWFwKChpdGVtLCBpKT0+KGFzeW5jICgpPT57XG4gICAgICAgICAgICBhd2FpdCBzZW1hcGhvcmUud2FpdCgpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjdXRlV2l0aFJldHJ5KCgpPT5mbihpdGVtKSwgbWF4UmV0cmllcyk7XG4gICAgICAgICAgICAgICAgcmVzdWx0c1tpXSA9IHJlc3VsdDtcbiAgICAgICAgICAgIH0gZmluYWxseXtcbiAgICAgICAgICAgICAgICBzZW1hcGhvcmUuc2lnbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCkpO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHRhc2tzKTtcbiAgICByZXR1cm4gcmVzdWx0cztcbn1cblxuY29uc3QgREVGQVVMVF9CQVNFX1VSTCA9ICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgPyBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19FREdFX1NUT1JFX0JBU0VfVVJMIDogaW1wb3J0Lm1ldGEuZW52Py5FREdFX1NUT1JFX0JBU0VfVVJMKSA/PyAnaHR0cHM6Ly9maWxlcy5lZGdlc3RvcmUuZGV2JztcbmZ1bmN0aW9uIGNyZWF0ZUVkZ2VTdG9yZVByb3ZpZGVyKG9wdHMpIHtcbiAgICBjb25zdCBFZGdlU3RvcmVDb250ZXh0ID0gLyojX19QVVJFX18qLyBSZWFjdC5jcmVhdGVDb250ZXh0KHVuZGVmaW5lZCk7XG4gICAgY29uc3QgRWRnZVN0b3JlUHJvdmlkZXIgPSAoeyBjaGlsZHJlbiwgYmFzZVBhdGggfSk9PntcbiAgICAgICAgcmV0dXJuIEVkZ2VTdG9yZVByb3ZpZGVySW5uZXIoe1xuICAgICAgICAgICAgY2hpbGRyZW4sXG4gICAgICAgICAgICBjb250ZXh0OiBFZGdlU3RvcmVDb250ZXh0LFxuICAgICAgICAgICAgYmFzZVBhdGgsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW50VXBsb2Fkczogb3B0cz8ubWF4Q29uY3VycmVudFVwbG9hZHNcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiB1c2VFZGdlU3RvcmUoKSB7XG4gICAgICAgIGlmICghRWRnZVN0b3JlQ29udGV4dCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWFjdCBDb250ZXh0IGlzIHVuYXZhaWxhYmxlIGluIFNlcnZlciBDb21wb25lbnRzJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAtIFdlIGtub3cgdGhhdCB0aGUgY29udGV4dCB2YWx1ZSBzaG91bGQgbm90IGJlIHVuZGVmaW5lZFxuICAgICAgICBjb25zdCB2YWx1ZSA9IFJlYWN0LnVzZUNvbnRleHQoRWRnZVN0b3JlQ29udGV4dCk7XG4gICAgICAgIGlmICghdmFsdWUgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdbZWRnZXN0b3JlXTogYHVzZUVkZ2VTdG9yZWAgbXVzdCBiZSB3cmFwcGVkIGluIGEgPEVkZ2VTdG9yZVByb3ZpZGVyIC8+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBFZGdlU3RvcmVQcm92aWRlcixcbiAgICAgICAgdXNlRWRnZVN0b3JlXG4gICAgfTtcbn1cbmZ1bmN0aW9uIEVkZ2VTdG9yZVByb3ZpZGVySW5uZXIoeyBjaGlsZHJlbiwgY29udGV4dCwgYmFzZVBhdGgsIG1heENvbmN1cnJlbnRVcGxvYWRzIH0pIHtcbiAgICBjb25zdCBhcGlQYXRoID0gYmFzZVBhdGggPyBgJHtiYXNlUGF0aH1gIDogJy9hcGkvZWRnZXN0b3JlJztcbiAgICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IFJlYWN0LnVzZVN0YXRlKHtcbiAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZmFsc2VcbiAgICB9KTtcbiAgICBjb25zdCB1cGxvYWRpbmdDb3VudFJlZiA9IFJlYWN0LnVzZVJlZigwKTtcbiAgICBjb25zdCBpbml0RXhlY3V0ZWQgPSBSZWFjdC51c2VSZWYoZmFsc2UpOyAvLyB0byBtYWtlIHN1cmUgd2UgZG9uJ3QgcnVuIGluaXQgdHdpY2VcbiAgICBSZWFjdC51c2VFZmZlY3QoKCk9PntcbiAgICAgICAgaWYgKCFpbml0RXhlY3V0ZWQuY3VycmVudCkge1xuICAgICAgICAgICAgdm9pZCBpbml0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpPT57XG4gICAgICAgICAgICBpbml0RXhlY3V0ZWQuY3VycmVudCA9IHRydWU7XG4gICAgICAgIH07XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtdKTtcbiAgICBhc3luYyBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVycm9yOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHthcGlQYXRofS9pbml0YCwge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyUmVzID0gYXdhaXQgZmV0Y2goYCR7REVGQVVMVF9CQVNFX1VSTH0vX2luaXRgLCB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd4LWVkZ2VzdG9yZS10b2tlbic6IGpzb24udG9rZW5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lclJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsaXplZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRWRnZVN0b3JlQ2xpZW50RXJyb3IoXCJDb3VsZG4ndCBpbml0aWFsaXplIEVkZ2UgU3RvcmUuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZUVycm9yKHJlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlcnJvcjogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgIGF3YWl0IGluaXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi8gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCwgLyojX19QVVJFX18qLyBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIGVkZ2VzdG9yZTogY3JlYXRlTmV4dFByb3h5KHtcbiAgICAgICAgICAgICAgICBhcGlQYXRoLFxuICAgICAgICAgICAgICAgIHVwbG9hZGluZ0NvdW50UmVmLFxuICAgICAgICAgICAgICAgIG1heENvbmN1cnJlbnRVcGxvYWRzXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHJlc2V0LFxuICAgICAgICAgICAgc3RhdGVcbiAgICAgICAgfVxuICAgIH0sIGNoaWxkcmVuKSk7XG59XG5cbmV4cG9ydCB7IGNyZWF0ZUVkZ2VTdG9yZVByb3ZpZGVyIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@edgestore+react@0.2.2_next@14.2.7_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/react/dist/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@edgestore+react@0.2.2_next@14.2.7_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/react/dist/uploadAbortedError-e1379bb0.mjs":
/*!***************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@edgestore+react@0.2.2_next@14.2.7_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/react/dist/uploadAbortedError-e1379bb0.mjs ***!
  \***************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   U: () => (/* binding */ UploadAbortedError)\n/* harmony export */ });\nclass UploadAbortedError extends Error {\n    constructor(message){\n        super(message);\n        this.name = 'UploadAbortedError';\n    }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStyZWFjdEAwLjIuMl9uZXh0QDE0LjIuN19yZWFjdC1kb21AMTguMy4xX3JlYWN0QDE4LjMuMV96b2RAMy4yMy44L25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3JlYWN0L2Rpc3QvdXBsb2FkQWJvcnRlZEVycm9yLWUxMzc5YmIwLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVtQyIsInNvdXJjZXMiOlsid2VicGFjazovL2JsaW5rLWUtY29tbWVyY2UvLi9ub2RlX21vZHVsZXMvLnBucG0vQGVkZ2VzdG9yZStyZWFjdEAwLjIuMl9uZXh0QDE0LjIuN19yZWFjdC1kb21AMTguMy4xX3JlYWN0QDE4LjMuMV96b2RAMy4yMy44L25vZGVfbW9kdWxlcy9AZWRnZXN0b3JlL3JlYWN0L2Rpc3QvdXBsb2FkQWJvcnRlZEVycm9yLWUxMzc5YmIwLm1qcz80MWYyIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFVwbG9hZEFib3J0ZWRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKXtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9ICdVcGxvYWRBYm9ydGVkRXJyb3InO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgVXBsb2FkQWJvcnRlZEVycm9yIGFzIFUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@edgestore+react@0.2.2_next@14.2.7_react-dom@18.3.1_react@18.3.1_zod@3.23.8/node_modules/@edgestore/react/dist/uploadAbortedError-e1379bb0.mjs\n");

/***/ })

};
;