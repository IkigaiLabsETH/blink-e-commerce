"use strict";(()=>{var e={};e.id=244,e.ids=[244],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},524:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},1808:e=>{e.exports=require("net")},6005:e=>{e.exports=require("node:crypto")},1041:e=>{e.exports=require("node:url")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},4404:e=>{e.exports=require("tls")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},110:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>P,patchFetch:()=>j,requestAsyncStorage:()=>g,routeModule:()=>q,serverHooks:()=>b,staticGenerationAsyncStorage:()=>f});var o={};t.r(o),t.d(o,{OPTIONS:()=>x,POST:()=>h});var s=t(5820),i=t(3944),n=t(765),a=t(7338),u=t(643),p=t(2458),c=t(8895),d=t(7568),l=t(279);let m=(0,a.Q)(),x=()=>Response.json({message:""},{headers:m}),h=async(e,{params:r})=>{try{let t;let o=await e.json();try{t=new d.PublicKey(o.account)}catch(e){return Response.json({message:"Invalid public key"},{headers:u.jS})}let s=await l.Z.order.findUnique({where:{id:r.orderid},include:{product:!0}});if(!s)return Response.json({message:"Order not found"},{headers:m});let i={type:"inline",action:{icon:s.product.imageUrl,description:s.product.description,label:s.product.label,title:s.product.title,type:"action",links:{actions:[{label:"Cancel Order",href:`/api/actions/${r.username}/orders/${r.orderid}/refund`}]}}},n=(0,c.B)(),a=new d.Transaction;a.add(d.ComputeBudgetProgram.setComputeUnitPrice({microLamports:5e3}),new d.TransactionInstruction({programId:new d.PublicKey(u.jI),keys:[],data:Buffer.from(JSON.stringify(r),"utf-8")})),a.feePayer=t,a.recentBlockhash=(await n.getLatestBlockhash()).blockhash;let x=await (0,p.p)({fields:{transaction:a,links:{next:i}}});return Response.json(x,{headers:m})}catch(e){return console.error("Error in POST request:",e),Response.json({message:"An error occurred while processing your request"},{headers:m})}},q=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/actions/[username]/orders/[orderid]/route",pathname:"/api/actions/[username]/orders/[orderid]",filename:"route",bundlePath:"app/api/actions/[username]/orders/[orderid]/route"},resolvedPagePath:"/workspaces/blink-e-commerce/src/app/api/actions/[username]/orders/[orderid]/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:g,staticGenerationAsyncStorage:f,serverHooks:b}=q,P="/api/actions/[username]/orders/[orderid]/route";function j(){return(0,n.patchFetch)({serverHooks:b,staticGenerationAsyncStorage:f})}},279:(e,r,t)=>{t.d(r,{Z:()=>s});var o=t(3524);let s=global.prismaGlobal??new o.PrismaClient},8895:(e,r,t)=>{t.d(r,{B:()=>s});var o=t(7568);let s=()=>new o.Connection(process.env.NEXT_PUBLIC_RPC_END_POINT||(0,o.clusterApiUrl)("devnet"),"confirmed")},7338:(e,r,t)=>{t.d(r,{Q:()=>s});var o=t(643);function s({headers:e,chainId:r,actionVersion:t}={}){return(r&&(e=Object.assign({},e||{},{"X-Blockchain-Ids":Object.hasOwn(o.Mo,r)?o.Mo[r]:r})),t&&(e=Object.assign({},e||{},{"X-Action-Version":t.toString()})),e)?Object.assign({},o.jS,e):o.jS}}};var r=require("../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[544,744,458],()=>t(110));module.exports=o})();